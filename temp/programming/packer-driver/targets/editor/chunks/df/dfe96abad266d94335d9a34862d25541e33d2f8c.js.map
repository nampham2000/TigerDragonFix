{"version":3,"sources":["file:///C:/Users/Admin/OneDrive/Desktop/dragonfix/extensions/Colyseus%20Multiplayer%20SDK/runtime/colyseus.js"],"names":["_cjsLoader","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","global","factory","amd","globalThis","self","Colyseus","_mergeNamespaces","n","m","forEach","e","Array","isArray","Object","keys","k","d","getOwnPropertyDescriptor","defineProperty","get","enumerable","freeze","ArrayBuffer","isView","a","buffer","window","extendStatics","b","setPrototypeOf","__proto__","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","__assign","assign","t","s","i","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","pop","push","__classPrivateFieldGet","receiver","state","kind","has","__classPrivateFieldSet","set","CloseCode","ServerError","_super","code","message","_this","name","Error","Decoder","offset","_offset","_buffer","_view","DataView","byteOffset","byteLength","utf8Read$1","view","string","chr","end","byte","getUint8","fromCharCode","toString","_array","_parse","_map","key","_str","_bin","slice","prefix","type","hi","lo","getUint16","getUint32","getInt8","ns","getInt32","Date","getFloat32","getFloat64","Math","pow","getInt16","decode","decoder","TIMESTAMP32_MAX_SEC","TIMESTAMP64_MAX_SEC","utf8Write","str","c","l","charCodeAt","setUint8","utf8Length$1","_encode","bytes","defers","size","_length","floor","isFinite","_float","ms","getTime","toJSON","allKeys","undefined","encode","buf","deferIndex","deferWritten","nextOffset","defer","deferLength","bin","Uint8Array","j","setFloat64","browser","WebSocket","WebSocketTransport","events","send","data","ws","connect","protocols","binaryType","onopen","onmessage","onclose","onerror","close","reason","readyState","OPEN","configurable","Connection","transport","isOpen","Protocol","ErrorCode","utf8Read","utf8Length","serializers","registerSerializer","id","serializer","getSerializer","createNanoEvents","emit","event","args","_i","callbacks","length_1","on","cb","_a","filter","EventEmitter","handlers","register","once","invoke","handler","invokeAsync","all","map","remove","index","indexOf","clear","createSignal","emitter","callback","commonjsGlobal","createCommonjsModule","fn","umd","__decorate","decorators","target","desc","r","Reflect","decorate","__spreadArray","to","from","pack","ar","concat","SWITCH_TO_STRUCTURE","TYPE_ID","OPERATION","ChangeTree","ref","parent","root","changed","changes","Map","allChanges","Set","caches","currentCustomOperation","setParent","parentIndex","indexes","Schema","definition","field","schema","parentIndex_1","changeTreee","parentIndex_2","operation","change","fieldName","ADD","assertValidIndex","previousChange","DELETE","TOUCH","DELETE_AND_ADD","add","touchParents","touch","getType","fieldsByIndex","parentType","values","getChildrenFilter","childFilters","getValue","delete","console","warn","previousValue","discard","discardAll","cache","cachedBytes","clone","ensureRefId","refId","getNextUniqueId","addCallback","$callbacks","existing","item","spliceOne","removeChildRefs","needRemoveRef","$changes","$items","removeRef","arr","len","DEFAULT_SORT","A","B","getArrayProxy","Proxy","obj","prop","isNaN","at","setValue","parseInt","deleteAt","setAt","deleteProperty","ArraySchema","items","$indexes","$refId","onAdd","triggerAll","onRemove","onChange","REPLACE","is","splice","lastIndex","_b","$deleteAt","CLEAR","bind","join","separator","reverse","reversedItems","shift","shiftAt","start","sliced","sort","compareFn","sortedItems","deleteCount","removedItems","unshift","addedLength","previousValues","searchElement","fromIndex","lastIndexOf","every","callbackfn","some","reduce","initialValue","reduceRight","find","predicate","findIndex","fill","copyWithin","toLocaleString","entries","includes","flatMap","flat","depth","findLast","findLastIndex","setIndex","getIndex","getByIndex","deleteByIndex","toArray","isDecoding","cloned","getMapProxy","MapSchema","initialValues","toStringTag","hasIndex","isRef","registeredTypes","registerType","identifier","SchemaDefinition","deprecated","descriptors","addField","getNextFieldIndex","array","hasField","addFilter","filters","indexesWithFilters","addChildrenFilter","hasFilter","klass","_context","useFilters","Context","types","schemas","typeid","_definition","_typeid","options","context","globalContext","definitionAtLine","stack","split","trim","isMap","childType","manual","writable","fieldCached","filterChildren","throws","defineTypes","fields","int8$1","uint8$1","int16$1","uint16$1","int32$1","uint32$1","b4","b3","b2","b1","int64$1","high","low","uint64$1","float32$1","writeFloat32","float64$1","writeFloat64","_int32$1","Int32Array","_float32$1","Float32Array","_float64$1","Float64Array","boolean$1","string$1","number$1","Number","MAX_SAFE_INTEGER","int8","uint8","int16","uint16","int32","uint32","int64","uint64","float32","float64","boolean","number","error","it","readFloat32","readFloat64","_int32","_float32","_float64","stringCheck","numberCheck","arrayCheck","switchStructureCheck","CollectionSchema","entry","SetSchema","ClientState","refIds","WeakSet","containerIndexes","WeakMap","addRefId","changeTree","client","$filterState","ReferenceTracker","refs","refCounts","deletedRefs","nextUniqueId","addRef","incrementCount","clearRefs","garbageCollectDeletedRefs","child","EncodeSchemaError","assertType","typeofTarget","allowNull","log","foundValue","JSON","stringify","assertInstanceType","encodePrimitiveType","encodeFunc","decodePrimitiveType","defineProperties","onError","props","setDirty","property","listen","immediate","$root","totalBytes","nextRef","isSchema","fieldIndex","dynamicIndex","nextIterator","refId_1","getSchemaType","createTypeInstance","typeDef","refId_2","valueRef","iter","value_1","_triggerChanges","encodeAll","rootChangeTree","refIdsVisited","changeTrees","numChangeTrees","cl","beginIndex","tryEncodeTypeId","applyFilters","refIdsDissallowed","filteredBytes","_loop_1","clientHasRefId","isEncodeAll","indexWithFilter","discardAllChanges","targetType","defaultType","instance","_c","_d","_e","_f","_g","_h","_j","uniqueRefIds","$refs","_loop_2","dumpChanges","dump","currentStructure","reflectionContext","ReflectionField","ReflectionType","Reflection","rootSchemaType","reflection","rootType","buildType","currentType","fieldType","type_1","childTypeSchema","referencedType","type_2","schemaTypes","reflectionType","schemaType","refType","typeInfo","rootInstance","Room","rootSchema","onStateChange","onLeave","onJoin","hasJoined","onMessageHandlers","roomId","removeAllListeners","endpoint","devModeCloseCallback","room","connection","onMessageCallback","DEVMODE_RESTART","destroy","leave","consented","LEAVE_ROOM","CONSENTED","onMessage","getMessageHandlerKey","initialBytes","ROOM_DATA","encoded","sendBytes","ROOM_DATA_BYTES","getState","JOIN_ROOM","reconnectionToken","serializerId","handshake","ERROR","it_1","code_1","ROOM_DATA_SCHEMA","it_2","context_1","dispatchMessage","ROOM_STATE","setState","ROOM_STATE_PATCH","patch","it_3","it_4","encodedState","binaryPatch","messageType","teardown","src","tar","headers","statusMessage","statusText","statusCode","status","response","method","uri","opts","res","rej","req","XMLHttpRequest","tmp","timeout","ontimeout","err","open","href","onload","getAllResponseHeaders","toLowerCase","parse","reviver","FormData","withCredentials","setRequestHeader","post","del","put","del_1","get_1","patch_1","post_1","put_1","send_1","xhr","httpie","HTTP","path","request","getOptions","catch","authToken","storage","getStorage","cc","sys","localStorage","setItem","getItem","removeItem","_Auth__initialized","_Auth__initializationPromise","_Auth__signInWindow","_Auth__events","Auth","http","settings","token","unbindChange","getUserData","userData","emitChange","user","finally","registerWithEmailAndPassword","email","password","signInWithEmailAndPassword","signInAnonymously","sendPasswordResetEmail","signInWithProvider","providerName","w","width","h","height","upgradingToken","title","toUpperCase","substring","left","screen","top","clearInterval","rejectionChecker","removeEventListener","setInterval","closed","addEventListener","signOut","authData","MatchMakeError","DEFAULT_ENDPOINT","location","hostname","protocol","replace","port","Client","URL","secure","pathname","endsWith","auth","joinOrCreate","roomName","createMatchMakeRequest","joinById","reconnect","getAvailableRooms","consumeSeatReservation","reuseRoomInstance","targetRoom","createRoom","sessionId","buildEndpoint","devMode","retryCount","retryMaxRetries","retryReconnection","info","fromCodePoint","setTimeout","params","name_1","publicAddress","getEndpointPort","processId","getHttpEndpoint","segments","startsWith","SchemaSerializer","rawState","patches","NoneSerializer","_cjsExports","_Protocol","_ErrorCode","_OPERATION","_ArraySchema","_CollectionSchema","_Context","_MapSchema","_Reflection","_ReflectionField","_ReflectionType","_Schema","_SchemaDefinition","_SetSchema","_decode","_defineTypes","_deprecated","_dumpChanges","_encode0","_filter","_filterChildren","_hasFilter","_registerType","_type","___esModule","__esModule","_Auth","_Client","_Room","_SchemaSerializer","_registerSerializer"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nlet _cjsExports;\nlet _Protocol;\nlet _ErrorCode;\nlet _OPERATION;\nlet _ArraySchema;\nlet _CollectionSchema;\nlet _Context;\nlet _MapSchema;\nlet _Reflection;\nlet _ReflectionField;\nlet _ReflectionType;\nlet _Schema;\nlet _SchemaDefinition;\nlet _SetSchema;\nlet _decode;\nlet _defineTypes;\nlet _deprecated;\nlet _dumpChanges;\nlet _encode0;\nlet _filter;\nlet _filterChildren;\nlet _hasFilter;\nlet _registerType;\nlet _type;\nlet ___esModule;\nlet _Auth;\nlet _Client;\nlet _Room;\nlet _SchemaSerializer;\nlet _registerSerializer;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n // THIS VERSION USES \"XMLHttpRequest\" INSTEAD OF \"fetch\" FOR COMPATIBILITY WITH COCOS CREATOR\r\n // colyseus.js@0.15.17 (@colyseus/schema 2.0.9)\r\n (function (global, factory) {\r\n     typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\r\n     typeof define === 'function' && define.amd ? define('colyseus.js', ['exports'], factory) :\r\n     (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Colyseus = {}));\r\n })(this, (function (exports) { 'use strict';\r\n\r\n     function _mergeNamespaces(n, m) {\r\n         m.forEach(function (e) {\r\n             e && typeof e !== 'string' && !Array.isArray(e) && Object.keys(e).forEach(function (k) {\r\n                 if (k !== 'default' && !(k in n)) {\r\n                     var d = Object.getOwnPropertyDescriptor(e, k);\r\n                     Object.defineProperty(n, k, d.get ? d : {\r\n                         enumerable: true,\r\n                         get: function () { return e[k]; }\r\n                     });\r\n                 }\r\n             });\r\n         });\r\n         return Object.freeze(n);\r\n     }\r\n\r\n     //\r\n     // Polyfills for legacy environments\r\n     //\r\n     /*\r\n      * Support Android 4.4.x\r\n      */\r\n     if (!ArrayBuffer.isView) {\r\n         ArrayBuffer.isView = function (a) {\r\n             return a !== null && typeof (a) === 'object' && a.buffer instanceof ArrayBuffer;\r\n         };\r\n     }\r\n     // Define globalThis if not available.\r\n     // https://github.com/colyseus/colyseus.js/issues/86\r\n     if (typeof (globalThis) === \"undefined\" &&\r\n         typeof (window) !== \"undefined\") {\r\n         // @ts-ignore\r\n         window['globalThis'] = window;\r\n     }\r\n\r\n     /******************************************************************************\r\n     Copyright (c) Microsoft Corporation.\r\n\r\n     Permission to use, copy, modify, and/or distribute this software for any\r\n     purpose with or without fee is hereby granted.\r\n\r\n     THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n     REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n     AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n     INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n     LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n     OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n     PERFORMANCE OF THIS SOFTWARE.\r\n     ***************************************************************************** */\r\n     /* global Reflect, Promise */\r\n\r\n     var extendStatics = function(d, b) {\r\n         extendStatics = Object.setPrototypeOf ||\r\n             ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n             function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n         return extendStatics(d, b);\r\n     };\r\n\r\n     function __extends(d, b) {\r\n         if (typeof b !== \"function\" && b !== null)\r\n             throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n         extendStatics(d, b);\r\n         function __() { this.constructor = d; }\r\n         d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n     }\r\n\r\n     var __assign = function() {\r\n         __assign = Object.assign || function __assign(t) {\r\n             for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                 s = arguments[i];\r\n                 for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n             }\r\n             return t;\r\n         };\r\n         return __assign.apply(this, arguments);\r\n     };\r\n\r\n     function __awaiter(thisArg, _arguments, P, generator) {\r\n         function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n         return new (P || (P = Promise))(function (resolve, reject) {\r\n             function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n             function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n             function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n             step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n         });\r\n     }\r\n\r\n     function __generator(thisArg, body) {\r\n         var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n         return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n         function verb(n) { return function (v) { return step([n, v]); }; }\r\n         function step(op) {\r\n             if (f) throw new TypeError(\"Generator is already executing.\");\r\n             while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n                 if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                 if (y = 0, t) op = [op[0] & 2, t.value];\r\n                 switch (op[0]) {\r\n                     case 0: case 1: t = op; break;\r\n                     case 4: _.label++; return { value: op[1], done: false };\r\n                     case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                     case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                     default:\r\n                         if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                         if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                         if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                         if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                         if (t[2]) _.ops.pop();\r\n                         _.trys.pop(); continue;\r\n                 }\r\n                 op = body.call(thisArg, _);\r\n             } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n             if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n         }\r\n     }\r\n\r\n     function __classPrivateFieldGet(receiver, state, kind, f) {\r\n         if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n         if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n         return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n     }\r\n\r\n     function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n         if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n         if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n         if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n         return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n     }\r\n\r\n     var CloseCode;\r\n     (function (CloseCode) {\r\n         CloseCode[CloseCode[\"CONSENTED\"] = 4000] = \"CONSENTED\";\r\n         CloseCode[CloseCode[\"DEVMODE_RESTART\"] = 4010] = \"DEVMODE_RESTART\";\r\n     })(CloseCode || (CloseCode = {}));\r\n     var ServerError = /** @class */ (function (_super) {\r\n         __extends(ServerError, _super);\r\n         function ServerError(code, message) {\r\n             var _this = _super.call(this, message) || this;\r\n             _this.name = \"ServerError\";\r\n             _this.code = code;\r\n             return _this;\r\n         }\r\n         return ServerError;\r\n     }(Error));\r\n\r\n     /**\r\n      * Copyright (c) 2014 Ion Drive Software Ltd.\r\n      * https://github.com/darrachequesne/notepack/\r\n      *\r\n      * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n      * of this software and associated documentation files (the \"Software\"), to deal\r\n      * in the Software without restriction, including without limitation the rights\r\n      * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n      * copies of the Software, and to permit persons to whom the Software is\r\n      * furnished to do so, subject to the following conditions:\r\n      *\r\n      * The above copyright notice and this permission notice shall be included in all\r\n      * copies or substantial portions of the Software.\r\n      *\r\n      * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n      * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n      * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n      * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n      * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n      * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n      * SOFTWARE.\r\n      */\r\n     /**\r\n      * Patch for Colyseus:\r\n      * -------------------\r\n      * notepack.io@3.0.1\r\n      *\r\n      * added `offset` on Decoder constructor, for messages arriving with a code\r\n      * before actual msgpack data\r\n      */\r\n     //\r\n     // DECODER\r\n     //\r\n     function Decoder(buffer, offset) {\r\n         this._offset = offset;\r\n         if (buffer instanceof ArrayBuffer) {\r\n             this._buffer = buffer;\r\n             this._view = new DataView(this._buffer);\r\n         }\r\n         else if (ArrayBuffer.isView(buffer)) {\r\n             this._buffer = buffer.buffer;\r\n             this._view = new DataView(this._buffer, buffer.byteOffset, buffer.byteLength);\r\n         }\r\n         else {\r\n             throw new Error('Invalid argument');\r\n         }\r\n     }\r\n     function utf8Read$1(view, offset, length) {\r\n         var string = '', chr = 0;\r\n         for (var i = offset, end = offset + length; i < end; i++) {\r\n             var byte = view.getUint8(i);\r\n             if ((byte & 0x80) === 0x00) {\r\n                 string += String.fromCharCode(byte);\r\n                 continue;\r\n             }\r\n             if ((byte & 0xe0) === 0xc0) {\r\n                 string += String.fromCharCode(((byte & 0x1f) << 6) |\r\n                     (view.getUint8(++i) & 0x3f));\r\n                 continue;\r\n             }\r\n             if ((byte & 0xf0) === 0xe0) {\r\n                 string += String.fromCharCode(((byte & 0x0f) << 12) |\r\n                     ((view.getUint8(++i) & 0x3f) << 6) |\r\n                     ((view.getUint8(++i) & 0x3f) << 0));\r\n                 continue;\r\n             }\r\n             if ((byte & 0xf8) === 0xf0) {\r\n                 chr = ((byte & 0x07) << 18) |\r\n                     ((view.getUint8(++i) & 0x3f) << 12) |\r\n                     ((view.getUint8(++i) & 0x3f) << 6) |\r\n                     ((view.getUint8(++i) & 0x3f) << 0);\r\n                 if (chr >= 0x010000) { // surrogate pair\r\n                     chr -= 0x010000;\r\n                     string += String.fromCharCode((chr >>> 10) + 0xD800, (chr & 0x3FF) + 0xDC00);\r\n                 }\r\n                 else {\r\n                     string += String.fromCharCode(chr);\r\n                 }\r\n                 continue;\r\n             }\r\n             throw new Error('Invalid byte ' + byte.toString(16));\r\n         }\r\n         return string;\r\n     }\r\n     Decoder.prototype._array = function (length) {\r\n         var value = new Array(length);\r\n         for (var i = 0; i < length; i++) {\r\n             value[i] = this._parse();\r\n         }\r\n         return value;\r\n     };\r\n     Decoder.prototype._map = function (length) {\r\n         var key = '', value = {};\r\n         for (var i = 0; i < length; i++) {\r\n             key = this._parse();\r\n             value[key] = this._parse();\r\n         }\r\n         return value;\r\n     };\r\n     Decoder.prototype._str = function (length) {\r\n         var value = utf8Read$1(this._view, this._offset, length);\r\n         this._offset += length;\r\n         return value;\r\n     };\r\n     Decoder.prototype._bin = function (length) {\r\n         var value = this._buffer.slice(this._offset, this._offset + length);\r\n         this._offset += length;\r\n         return value;\r\n     };\r\n     Decoder.prototype._parse = function () {\r\n         var prefix = this._view.getUint8(this._offset++);\r\n         var value, length = 0, type = 0, hi = 0, lo = 0;\r\n         if (prefix < 0xc0) {\r\n             // positive fixint\r\n             if (prefix < 0x80) {\r\n                 return prefix;\r\n             }\r\n             // fixmap\r\n             if (prefix < 0x90) {\r\n                 return this._map(prefix & 0x0f);\r\n             }\r\n             // fixarray\r\n             if (prefix < 0xa0) {\r\n                 return this._array(prefix & 0x0f);\r\n             }\r\n             // fixstr\r\n             return this._str(prefix & 0x1f);\r\n         }\r\n         // negative fixint\r\n         if (prefix > 0xdf) {\r\n             return (0xff - prefix + 1) * -1;\r\n         }\r\n         switch (prefix) {\r\n             // nil\r\n             case 0xc0:\r\n                 return null;\r\n             // false\r\n             case 0xc2:\r\n                 return false;\r\n             // true\r\n             case 0xc3:\r\n                 return true;\r\n             // bin\r\n             case 0xc4:\r\n                 length = this._view.getUint8(this._offset);\r\n                 this._offset += 1;\r\n                 return this._bin(length);\r\n             case 0xc5:\r\n                 length = this._view.getUint16(this._offset);\r\n                 this._offset += 2;\r\n                 return this._bin(length);\r\n             case 0xc6:\r\n                 length = this._view.getUint32(this._offset);\r\n                 this._offset += 4;\r\n                 return this._bin(length);\r\n             // ext\r\n             case 0xc7:\r\n                 length = this._view.getUint8(this._offset);\r\n                 type = this._view.getInt8(this._offset + 1);\r\n                 this._offset += 2;\r\n                 if (type === -1) {\r\n                     // timestamp 96\r\n                     var ns = this._view.getUint32(this._offset);\r\n                     hi = this._view.getInt32(this._offset + 4);\r\n                     lo = this._view.getUint32(this._offset + 8);\r\n                     this._offset += 12;\r\n                     return new Date((hi * 0x100000000 + lo) * 1e3 + ns / 1e6);\r\n                 }\r\n                 return [type, this._bin(length)];\r\n             case 0xc8:\r\n                 length = this._view.getUint16(this._offset);\r\n                 type = this._view.getInt8(this._offset + 2);\r\n                 this._offset += 3;\r\n                 return [type, this._bin(length)];\r\n             case 0xc9:\r\n                 length = this._view.getUint32(this._offset);\r\n                 type = this._view.getInt8(this._offset + 4);\r\n                 this._offset += 5;\r\n                 return [type, this._bin(length)];\r\n             // float\r\n             case 0xca:\r\n                 value = this._view.getFloat32(this._offset);\r\n                 this._offset += 4;\r\n                 return value;\r\n             case 0xcb:\r\n                 value = this._view.getFloat64(this._offset);\r\n                 this._offset += 8;\r\n                 return value;\r\n             // uint\r\n             case 0xcc:\r\n                 value = this._view.getUint8(this._offset);\r\n                 this._offset += 1;\r\n                 return value;\r\n             case 0xcd:\r\n                 value = this._view.getUint16(this._offset);\r\n                 this._offset += 2;\r\n                 return value;\r\n             case 0xce:\r\n                 value = this._view.getUint32(this._offset);\r\n                 this._offset += 4;\r\n                 return value;\r\n             case 0xcf:\r\n                 hi = this._view.getUint32(this._offset) * Math.pow(2, 32);\r\n                 lo = this._view.getUint32(this._offset + 4);\r\n                 this._offset += 8;\r\n                 return hi + lo;\r\n             // int\r\n             case 0xd0:\r\n                 value = this._view.getInt8(this._offset);\r\n                 this._offset += 1;\r\n                 return value;\r\n             case 0xd1:\r\n                 value = this._view.getInt16(this._offset);\r\n                 this._offset += 2;\r\n                 return value;\r\n             case 0xd2:\r\n                 value = this._view.getInt32(this._offset);\r\n                 this._offset += 4;\r\n                 return value;\r\n             case 0xd3:\r\n                 hi = this._view.getInt32(this._offset) * Math.pow(2, 32);\r\n                 lo = this._view.getUint32(this._offset + 4);\r\n                 this._offset += 8;\r\n                 return hi + lo;\r\n             // fixext\r\n             case 0xd4:\r\n                 type = this._view.getInt8(this._offset);\r\n                 this._offset += 1;\r\n                 if (type === 0x00) {\r\n                     // custom encoding for 'undefined' (kept for backward-compatibility)\r\n                     this._offset += 1;\r\n                     return void 0;\r\n                 }\r\n                 return [type, this._bin(1)];\r\n             case 0xd5:\r\n                 type = this._view.getInt8(this._offset);\r\n                 this._offset += 1;\r\n                 return [type, this._bin(2)];\r\n             case 0xd6:\r\n                 type = this._view.getInt8(this._offset);\r\n                 this._offset += 1;\r\n                 if (type === -1) {\r\n                     // timestamp 32\r\n                     value = this._view.getUint32(this._offset);\r\n                     this._offset += 4;\r\n                     return new Date(value * 1e3);\r\n                 }\r\n                 return [type, this._bin(4)];\r\n             case 0xd7:\r\n                 type = this._view.getInt8(this._offset);\r\n                 this._offset += 1;\r\n                 if (type === 0x00) {\r\n                     // custom date encoding (kept for backward-compatibility)\r\n                     hi = this._view.getInt32(this._offset) * Math.pow(2, 32);\r\n                     lo = this._view.getUint32(this._offset + 4);\r\n                     this._offset += 8;\r\n                     return new Date(hi + lo);\r\n                 }\r\n                 if (type === -1) {\r\n                     // timestamp 64\r\n                     hi = this._view.getUint32(this._offset);\r\n                     lo = this._view.getUint32(this._offset + 4);\r\n                     this._offset += 8;\r\n                     var s = (hi & 0x3) * 0x100000000 + lo;\r\n                     return new Date(s * 1e3 + (hi >>> 2) / 1e6);\r\n                 }\r\n                 return [type, this._bin(8)];\r\n             case 0xd8:\r\n                 type = this._view.getInt8(this._offset);\r\n                 this._offset += 1;\r\n                 return [type, this._bin(16)];\r\n             // str\r\n             case 0xd9:\r\n                 length = this._view.getUint8(this._offset);\r\n                 this._offset += 1;\r\n                 return this._str(length);\r\n             case 0xda:\r\n                 length = this._view.getUint16(this._offset);\r\n                 this._offset += 2;\r\n                 return this._str(length);\r\n             case 0xdb:\r\n                 length = this._view.getUint32(this._offset);\r\n                 this._offset += 4;\r\n                 return this._str(length);\r\n             // array\r\n             case 0xdc:\r\n                 length = this._view.getUint16(this._offset);\r\n                 this._offset += 2;\r\n                 return this._array(length);\r\n             case 0xdd:\r\n                 length = this._view.getUint32(this._offset);\r\n                 this._offset += 4;\r\n                 return this._array(length);\r\n             // map\r\n             case 0xde:\r\n                 length = this._view.getUint16(this._offset);\r\n                 this._offset += 2;\r\n                 return this._map(length);\r\n             case 0xdf:\r\n                 length = this._view.getUint32(this._offset);\r\n                 this._offset += 4;\r\n                 return this._map(length);\r\n         }\r\n         throw new Error('Could not parse');\r\n     };\r\n     function decode(buffer, offset) {\r\n         if (offset === void 0) { offset = 0; }\r\n         var decoder = new Decoder(buffer, offset);\r\n         var value = decoder._parse();\r\n         if (decoder._offset !== buffer.byteLength) {\r\n             throw new Error((buffer.byteLength - decoder._offset) + ' trailing bytes');\r\n         }\r\n         return value;\r\n     }\r\n     //\r\n     // ENCODER\r\n     //\r\n     var TIMESTAMP32_MAX_SEC = 0x100000000 - 1; // 32-bit unsigned int\r\n     var TIMESTAMP64_MAX_SEC = 0x400000000 - 1; // 34-bit unsigned int\r\n     function utf8Write(view, offset, str) {\r\n         var c = 0;\r\n         for (var i = 0, l = str.length; i < l; i++) {\r\n             c = str.charCodeAt(i);\r\n             if (c < 0x80) {\r\n                 view.setUint8(offset++, c);\r\n             }\r\n             else if (c < 0x800) {\r\n                 view.setUint8(offset++, 0xc0 | (c >> 6));\r\n                 view.setUint8(offset++, 0x80 | (c & 0x3f));\r\n             }\r\n             else if (c < 0xd800 || c >= 0xe000) {\r\n                 view.setUint8(offset++, 0xe0 | (c >> 12));\r\n                 view.setUint8(offset++, 0x80 | (c >> 6) & 0x3f);\r\n                 view.setUint8(offset++, 0x80 | (c & 0x3f));\r\n             }\r\n             else {\r\n                 i++;\r\n                 c = 0x10000 + (((c & 0x3ff) << 10) | (str.charCodeAt(i) & 0x3ff));\r\n                 view.setUint8(offset++, 0xf0 | (c >> 18));\r\n                 view.setUint8(offset++, 0x80 | (c >> 12) & 0x3f);\r\n                 view.setUint8(offset++, 0x80 | (c >> 6) & 0x3f);\r\n                 view.setUint8(offset++, 0x80 | (c & 0x3f));\r\n             }\r\n         }\r\n     }\r\n     function utf8Length$1(str) {\r\n         var c = 0, length = 0;\r\n         for (var i = 0, l = str.length; i < l; i++) {\r\n             c = str.charCodeAt(i);\r\n             if (c < 0x80) {\r\n                 length += 1;\r\n             }\r\n             else if (c < 0x800) {\r\n                 length += 2;\r\n             }\r\n             else if (c < 0xd800 || c >= 0xe000) {\r\n                 length += 3;\r\n             }\r\n             else {\r\n                 i++;\r\n                 length += 4;\r\n             }\r\n         }\r\n         return length;\r\n     }\r\n     function _encode(bytes, defers, value) {\r\n         var type = typeof value, i = 0, l = 0, hi = 0, lo = 0, length = 0, size = 0;\r\n         if (type === 'string') {\r\n             length = utf8Length$1(value);\r\n             // fixstr\r\n             if (length < 0x20) {\r\n                 bytes.push(length | 0xa0);\r\n                 size = 1;\r\n             }\r\n             // str 8\r\n             else if (length < 0x100) {\r\n                 bytes.push(0xd9, length);\r\n                 size = 2;\r\n             }\r\n             // str 16\r\n             else if (length < 0x10000) {\r\n                 bytes.push(0xda, length >> 8, length);\r\n                 size = 3;\r\n             }\r\n             // str 32\r\n             else if (length < 0x100000000) {\r\n                 bytes.push(0xdb, length >> 24, length >> 16, length >> 8, length);\r\n                 size = 5;\r\n             }\r\n             else {\r\n                 throw new Error('String too long');\r\n             }\r\n             defers.push({ _str: value, _length: length, _offset: bytes.length });\r\n             return size + length;\r\n         }\r\n         if (type === 'number') {\r\n             // TODO: encode to float 32?\r\n             // float 64\r\n             if (Math.floor(value) !== value || !isFinite(value)) {\r\n                 bytes.push(0xcb);\r\n                 defers.push({ _float: value, _length: 8, _offset: bytes.length });\r\n                 return 9;\r\n             }\r\n             if (value >= 0) {\r\n                 // positive fixnum\r\n                 if (value < 0x80) {\r\n                     bytes.push(value);\r\n                     return 1;\r\n                 }\r\n                 // uint 8\r\n                 if (value < 0x100) {\r\n                     bytes.push(0xcc, value);\r\n                     return 2;\r\n                 }\r\n                 // uint 16\r\n                 if (value < 0x10000) {\r\n                     bytes.push(0xcd, value >> 8, value);\r\n                     return 3;\r\n                 }\r\n                 // uint 32\r\n                 if (value < 0x100000000) {\r\n                     bytes.push(0xce, value >> 24, value >> 16, value >> 8, value);\r\n                     return 5;\r\n                 }\r\n                 // uint 64\r\n                 hi = (value / Math.pow(2, 32)) >> 0;\r\n                 lo = value >>> 0;\r\n                 bytes.push(0xcf, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);\r\n                 return 9;\r\n             }\r\n             else {\r\n                 // negative fixnum\r\n                 if (value >= -0x20) {\r\n                     bytes.push(value);\r\n                     return 1;\r\n                 }\r\n                 // int 8\r\n                 if (value >= -0x80) {\r\n                     bytes.push(0xd0, value);\r\n                     return 2;\r\n                 }\r\n                 // int 16\r\n                 if (value >= -0x8000) {\r\n                     bytes.push(0xd1, value >> 8, value);\r\n                     return 3;\r\n                 }\r\n                 // int 32\r\n                 if (value >= -0x80000000) {\r\n                     bytes.push(0xd2, value >> 24, value >> 16, value >> 8, value);\r\n                     return 5;\r\n                 }\r\n                 // int 64\r\n                 hi = Math.floor(value / Math.pow(2, 32));\r\n                 lo = value >>> 0;\r\n                 bytes.push(0xd3, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);\r\n                 return 9;\r\n             }\r\n         }\r\n         if (type === 'object') {\r\n             // nil\r\n             if (value === null) {\r\n                 bytes.push(0xc0);\r\n                 return 1;\r\n             }\r\n             if (Array.isArray(value)) {\r\n                 length = value.length;\r\n                 // fixarray\r\n                 if (length < 0x10) {\r\n                     bytes.push(length | 0x90);\r\n                     size = 1;\r\n                 }\r\n                 // array 16\r\n                 else if (length < 0x10000) {\r\n                     bytes.push(0xdc, length >> 8, length);\r\n                     size = 3;\r\n                 }\r\n                 // array 32\r\n                 else if (length < 0x100000000) {\r\n                     bytes.push(0xdd, length >> 24, length >> 16, length >> 8, length);\r\n                     size = 5;\r\n                 }\r\n                 else {\r\n                     throw new Error('Array too large');\r\n                 }\r\n                 for (i = 0; i < length; i++) {\r\n                     size += _encode(bytes, defers, value[i]);\r\n                 }\r\n                 return size;\r\n             }\r\n             if (value instanceof Date) {\r\n                 var ms = value.getTime();\r\n                 var s = Math.floor(ms / 1e3);\r\n                 var ns = (ms - s * 1e3) * 1e6;\r\n                 if (s >= 0 && ns >= 0 && s <= TIMESTAMP64_MAX_SEC) {\r\n                     if (ns === 0 && s <= TIMESTAMP32_MAX_SEC) {\r\n                         // timestamp 32\r\n                         bytes.push(0xd6, 0xff, s >> 24, s >> 16, s >> 8, s);\r\n                         return 6;\r\n                     }\r\n                     else {\r\n                         // timestamp 64\r\n                         hi = s / 0x100000000;\r\n                         lo = s & 0xffffffff;\r\n                         bytes.push(0xd7, 0xff, ns >> 22, ns >> 14, ns >> 6, hi, lo >> 24, lo >> 16, lo >> 8, lo);\r\n                         return 10;\r\n                     }\r\n                 }\r\n                 else {\r\n                     // timestamp 96\r\n                     hi = Math.floor(s / 0x100000000);\r\n                     lo = s >>> 0;\r\n                     bytes.push(0xc7, 0x0c, 0xff, ns >> 24, ns >> 16, ns >> 8, ns, hi >> 24, hi >> 16, hi >> 8, hi, lo >> 24, lo >> 16, lo >> 8, lo);\r\n                     return 15;\r\n                 }\r\n             }\r\n             if (value instanceof ArrayBuffer) {\r\n                 length = value.byteLength;\r\n                 // bin 8\r\n                 if (length < 0x100) {\r\n                     bytes.push(0xc4, length);\r\n                     size = 2;\r\n                 }\r\n                 else \r\n                 // bin 16\r\n                 if (length < 0x10000) {\r\n                     bytes.push(0xc5, length >> 8, length);\r\n                     size = 3;\r\n                 }\r\n                 else \r\n                 // bin 32\r\n                 if (length < 0x100000000) {\r\n                     bytes.push(0xc6, length >> 24, length >> 16, length >> 8, length);\r\n                     size = 5;\r\n                 }\r\n                 else {\r\n                     throw new Error('Buffer too large');\r\n                 }\r\n                 defers.push({ _bin: value, _length: length, _offset: bytes.length });\r\n                 return size + length;\r\n             }\r\n             if (typeof value.toJSON === 'function') {\r\n                 return _encode(bytes, defers, value.toJSON());\r\n             }\r\n             var keys = [], key = '';\r\n             var allKeys = Object.keys(value);\r\n             for (i = 0, l = allKeys.length; i < l; i++) {\r\n                 key = allKeys[i];\r\n                 if (value[key] !== undefined && typeof value[key] !== 'function') {\r\n                     keys.push(key);\r\n                 }\r\n             }\r\n             length = keys.length;\r\n             // fixmap\r\n             if (length < 0x10) {\r\n                 bytes.push(length | 0x80);\r\n                 size = 1;\r\n             }\r\n             // map 16\r\n             else if (length < 0x10000) {\r\n                 bytes.push(0xde, length >> 8, length);\r\n                 size = 3;\r\n             }\r\n             // map 32\r\n             else if (length < 0x100000000) {\r\n                 bytes.push(0xdf, length >> 24, length >> 16, length >> 8, length);\r\n                 size = 5;\r\n             }\r\n             else {\r\n                 throw new Error('Object too large');\r\n             }\r\n             for (i = 0; i < length; i++) {\r\n                 key = keys[i];\r\n                 size += _encode(bytes, defers, key);\r\n                 size += _encode(bytes, defers, value[key]);\r\n             }\r\n             return size;\r\n         }\r\n         // false/true\r\n         if (type === 'boolean') {\r\n             bytes.push(value ? 0xc3 : 0xc2);\r\n             return 1;\r\n         }\r\n         if (type === 'undefined') {\r\n             bytes.push(0xc0);\r\n             return 1;\r\n         }\r\n         // custom types like BigInt (typeof value === 'bigint')\r\n         if (typeof value.toJSON === 'function') {\r\n             return _encode(bytes, defers, value.toJSON());\r\n         }\r\n         throw new Error('Could not encode');\r\n     }\r\n     function encode(value) {\r\n         var bytes = [];\r\n         var defers = [];\r\n         var size = _encode(bytes, defers, value);\r\n         var buf = new ArrayBuffer(size);\r\n         var view = new DataView(buf);\r\n         var deferIndex = 0;\r\n         var deferWritten = 0;\r\n         var nextOffset = -1;\r\n         if (defers.length > 0) {\r\n             nextOffset = defers[0]._offset;\r\n         }\r\n         var defer, deferLength = 0, offset = 0;\r\n         for (var i = 0, l = bytes.length; i < l; i++) {\r\n             view.setUint8(deferWritten + i, bytes[i]);\r\n             if (i + 1 !== nextOffset) {\r\n                 continue;\r\n             }\r\n             defer = defers[deferIndex];\r\n             deferLength = defer._length;\r\n             offset = deferWritten + nextOffset;\r\n             if (defer._bin) {\r\n                 var bin = new Uint8Array(defer._bin);\r\n                 for (var j = 0; j < deferLength; j++) {\r\n                     view.setUint8(offset + j, bin[j]);\r\n                 }\r\n             }\r\n             else if (defer._str) {\r\n                 utf8Write(view, offset, defer._str);\r\n             }\r\n             else if (defer._float !== undefined) {\r\n                 view.setFloat64(offset, defer._float);\r\n             }\r\n             deferIndex++;\r\n             deferWritten += deferLength;\r\n             if (defers[deferIndex]) {\r\n                 nextOffset = defers[deferIndex]._offset;\r\n             }\r\n         }\r\n         return buf;\r\n     }\r\n\r\n     var browser = function () {\r\n       throw new Error(\r\n         'ws does not work in the browser. Browser clients must use the native ' +\r\n           'WebSocket object'\r\n       );\r\n     };\r\n\r\n     var WebSocket = globalThis.WebSocket || browser;\r\n     var WebSocketTransport = /** @class */ (function () {\r\n         function WebSocketTransport(events) {\r\n             this.events = events;\r\n         }\r\n         WebSocketTransport.prototype.send = function (data) {\r\n             if (data instanceof ArrayBuffer) {\r\n                 this.ws.send(data);\r\n             }\r\n             else if (Array.isArray(data)) {\r\n                 this.ws.send((new Uint8Array(data)).buffer);\r\n             }\r\n         };\r\n         WebSocketTransport.prototype.connect = function (url) {\r\n             this.ws = new WebSocket(url, this.protocols);\r\n             this.ws.binaryType = 'arraybuffer';\r\n             this.ws.onopen = this.events.onopen;\r\n             this.ws.onmessage = this.events.onmessage;\r\n             this.ws.onclose = this.events.onclose;\r\n             this.ws.onerror = this.events.onerror;\r\n         };\r\n         WebSocketTransport.prototype.close = function (code, reason) {\r\n             this.ws.close(code, reason);\r\n         };\r\n         Object.defineProperty(WebSocketTransport.prototype, \"isOpen\", {\r\n             get: function () {\r\n                 return this.ws.readyState === WebSocket.OPEN;\r\n             },\r\n             enumerable: false,\r\n             configurable: true\r\n         });\r\n         return WebSocketTransport;\r\n     }());\r\n\r\n     var Connection = /** @class */ (function () {\r\n         function Connection() {\r\n             this.events = {};\r\n             this.transport = new WebSocketTransport(this.events);\r\n         }\r\n         Connection.prototype.send = function (data) {\r\n             this.transport.send(data);\r\n         };\r\n         Connection.prototype.connect = function (url) {\r\n             this.transport.connect(url);\r\n         };\r\n         Connection.prototype.close = function (code, reason) {\r\n             this.transport.close(code, reason);\r\n         };\r\n         Object.defineProperty(Connection.prototype, \"isOpen\", {\r\n             get: function () {\r\n                 return this.transport.isOpen;\r\n             },\r\n             enumerable: false,\r\n             configurable: true\r\n         });\r\n         return Connection;\r\n     }());\r\n\r\n     // Use codes between 0~127 for lesser throughput (1 byte)\r\n     exports.Protocol = void 0;\r\n     (function (Protocol) {\r\n         // Room-related (10~19)\r\n         Protocol[Protocol[\"HANDSHAKE\"] = 9] = \"HANDSHAKE\";\r\n         Protocol[Protocol[\"JOIN_ROOM\"] = 10] = \"JOIN_ROOM\";\r\n         Protocol[Protocol[\"ERROR\"] = 11] = \"ERROR\";\r\n         Protocol[Protocol[\"LEAVE_ROOM\"] = 12] = \"LEAVE_ROOM\";\r\n         Protocol[Protocol[\"ROOM_DATA\"] = 13] = \"ROOM_DATA\";\r\n         Protocol[Protocol[\"ROOM_STATE\"] = 14] = \"ROOM_STATE\";\r\n         Protocol[Protocol[\"ROOM_STATE_PATCH\"] = 15] = \"ROOM_STATE_PATCH\";\r\n         Protocol[Protocol[\"ROOM_DATA_SCHEMA\"] = 16] = \"ROOM_DATA_SCHEMA\";\r\n         Protocol[Protocol[\"ROOM_DATA_BYTES\"] = 17] = \"ROOM_DATA_BYTES\";\r\n     })(exports.Protocol || (exports.Protocol = {}));\r\n     exports.ErrorCode = void 0;\r\n     (function (ErrorCode) {\r\n         ErrorCode[ErrorCode[\"MATCHMAKE_NO_HANDLER\"] = 4210] = \"MATCHMAKE_NO_HANDLER\";\r\n         ErrorCode[ErrorCode[\"MATCHMAKE_INVALID_CRITERIA\"] = 4211] = \"MATCHMAKE_INVALID_CRITERIA\";\r\n         ErrorCode[ErrorCode[\"MATCHMAKE_INVALID_ROOM_ID\"] = 4212] = \"MATCHMAKE_INVALID_ROOM_ID\";\r\n         ErrorCode[ErrorCode[\"MATCHMAKE_UNHANDLED\"] = 4213] = \"MATCHMAKE_UNHANDLED\";\r\n         ErrorCode[ErrorCode[\"MATCHMAKE_EXPIRED\"] = 4214] = \"MATCHMAKE_EXPIRED\";\r\n         ErrorCode[ErrorCode[\"AUTH_FAILED\"] = 4215] = \"AUTH_FAILED\";\r\n         ErrorCode[ErrorCode[\"APPLICATION_ERROR\"] = 4216] = \"APPLICATION_ERROR\";\r\n     })(exports.ErrorCode || (exports.ErrorCode = {}));\r\n     function utf8Read(view, offset) {\r\n         var length = view[offset++];\r\n         var string = '', chr = 0;\r\n         for (var i = offset, end = offset + length; i < end; i++) {\r\n             var byte = view[i];\r\n             if ((byte & 0x80) === 0x00) {\r\n                 string += String.fromCharCode(byte);\r\n                 continue;\r\n             }\r\n             if ((byte & 0xe0) === 0xc0) {\r\n                 string += String.fromCharCode(((byte & 0x1f) << 6) |\r\n                     (view[++i] & 0x3f));\r\n                 continue;\r\n             }\r\n             if ((byte & 0xf0) === 0xe0) {\r\n                 string += String.fromCharCode(((byte & 0x0f) << 12) |\r\n                     ((view[++i] & 0x3f) << 6) |\r\n                     ((view[++i] & 0x3f) << 0));\r\n                 continue;\r\n             }\r\n             if ((byte & 0xf8) === 0xf0) {\r\n                 chr = ((byte & 0x07) << 18) |\r\n                     ((view[++i] & 0x3f) << 12) |\r\n                     ((view[++i] & 0x3f) << 6) |\r\n                     ((view[++i] & 0x3f) << 0);\r\n                 if (chr >= 0x010000) { // surrogate pair\r\n                     chr -= 0x010000;\r\n                     string += String.fromCharCode((chr >>> 10) + 0xD800, (chr & 0x3FF) + 0xDC00);\r\n                 }\r\n                 else {\r\n                     string += String.fromCharCode(chr);\r\n                 }\r\n                 continue;\r\n             }\r\n             throw new Error('Invalid byte ' + byte.toString(16));\r\n         }\r\n         return string;\r\n     }\r\n     // Faster for short strings than Buffer.byteLength\r\n     function utf8Length(str) {\r\n         if (str === void 0) { str = ''; }\r\n         var c = 0;\r\n         var length = 0;\r\n         for (var i = 0, l = str.length; i < l; i++) {\r\n             c = str.charCodeAt(i);\r\n             if (c < 0x80) {\r\n                 length += 1;\r\n             }\r\n             else if (c < 0x800) {\r\n                 length += 2;\r\n             }\r\n             else if (c < 0xd800 || c >= 0xe000) {\r\n                 length += 3;\r\n             }\r\n             else {\r\n                 i++;\r\n                 length += 4;\r\n             }\r\n         }\r\n         return length + 1;\r\n     }\r\n\r\n     var serializers = {};\r\n     function registerSerializer(id, serializer) {\r\n         serializers[id] = serializer;\r\n     }\r\n     function getSerializer(id) {\r\n         var serializer = serializers[id];\r\n         if (!serializer) {\r\n             throw new Error(\"missing serializer: \" + id);\r\n         }\r\n         return serializer;\r\n     }\r\n\r\n     /**\r\n      * The MIT License (MIT)\r\n      *\r\n      * Copyright 2016 Andrey Sitnik <andrey@sitnik.ru>\r\n      *\r\n      * Permission is hereby granted, free of charge, to any person obtaining a copy of\r\n      * this software and associated documentation files (the \"Software\"), to deal in\r\n      * the Software without restriction, including without limitation the rights to\r\n      * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\r\n      * the Software, and to permit persons to whom the Software is furnished to do so,\r\n      * subject to the following conditions:\r\n      *\r\n      * The above copyright notice and this permission notice shall be included in all\r\n      * copies or substantial portions of the Software.\r\n      *\r\n      * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n      * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\r\n      * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\r\n      * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\n      * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\r\n      * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n      */\r\n     var createNanoEvents = function () { return ({\r\n         emit: function (event) {\r\n             var args = [];\r\n             for (var _i = 1; _i < arguments.length; _i++) {\r\n                 args[_i - 1] = arguments[_i];\r\n             }\r\n             var callbacks = this.events[event] || [];\r\n             for (var i = 0, length_1 = callbacks.length; i < length_1; i++) {\r\n                 callbacks[i].apply(callbacks, args);\r\n             }\r\n         },\r\n         events: {},\r\n         on: function (event, cb) {\r\n             var _this = this;\r\n             var _a;\r\n             ((_a = this.events[event]) === null || _a === void 0 ? void 0 : _a.push(cb)) || (this.events[event] = [cb]);\r\n             return function () {\r\n                 var _a;\r\n                 _this.events[event] = (_a = _this.events[event]) === null || _a === void 0 ? void 0 : _a.filter(function (i) { return cb !== i; });\r\n             };\r\n         }\r\n     }); };\r\n\r\n     var EventEmitter = /** @class */ (function () {\r\n         function EventEmitter() {\r\n             this.handlers = [];\r\n         }\r\n         EventEmitter.prototype.register = function (cb, once) {\r\n             this.handlers.push(cb);\r\n             return this;\r\n         };\r\n         EventEmitter.prototype.invoke = function () {\r\n             var _this = this;\r\n             var args = [];\r\n             for (var _i = 0; _i < arguments.length; _i++) {\r\n                 args[_i] = arguments[_i];\r\n             }\r\n             this.handlers.forEach(function (handler) { return handler.apply(_this, args); });\r\n         };\r\n         EventEmitter.prototype.invokeAsync = function () {\r\n             var _this = this;\r\n             var args = [];\r\n             for (var _i = 0; _i < arguments.length; _i++) {\r\n                 args[_i] = arguments[_i];\r\n             }\r\n             return Promise.all(this.handlers.map(function (handler) { return handler.apply(_this, args); }));\r\n         };\r\n         EventEmitter.prototype.remove = function (cb) {\r\n             var index = this.handlers.indexOf(cb);\r\n             this.handlers[index] = this.handlers[this.handlers.length - 1];\r\n             this.handlers.pop();\r\n         };\r\n         EventEmitter.prototype.clear = function () {\r\n             this.handlers = [];\r\n         };\r\n         return EventEmitter;\r\n     }());\r\n     function createSignal() {\r\n         var emitter = new EventEmitter();\r\n         function register(cb) {\r\n             return emitter.register(cb, this === null);\r\n         }\r\n         register.once = function (cb) {\r\n             var callback = function () {\r\n                 var args = [];\r\n                 for (var _i = 0; _i < arguments.length; _i++) {\r\n                     args[_i] = arguments[_i];\r\n                 }\r\n                 cb.apply(this, args);\r\n                 emitter.remove(callback);\r\n             };\r\n             emitter.register(callback);\r\n         };\r\n         register.remove = function (cb) { return emitter.remove(cb); };\r\n         register.invoke = function () {\r\n             var args = [];\r\n             for (var _i = 0; _i < arguments.length; _i++) {\r\n                 args[_i] = arguments[_i];\r\n             }\r\n             return emitter.invoke.apply(emitter, args);\r\n         };\r\n         register.invokeAsync = function () {\r\n             var args = [];\r\n             for (var _i = 0; _i < arguments.length; _i++) {\r\n                 args[_i] = arguments[_i];\r\n             }\r\n             return emitter.invokeAsync.apply(emitter, args);\r\n         };\r\n         register.clear = function () { return emitter.clear(); };\r\n         return register;\r\n     }\r\n\r\n     var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\r\n\r\n     function createCommonjsModule(fn) {\r\n       var module = { exports: {} };\r\n     \treturn fn(module, module.exports), module.exports;\r\n     }\r\n\r\n     var umd = createCommonjsModule(function (module, exports) {\r\n     (function (global, factory) {\r\n         factory(exports) ;\r\n     })(commonjsGlobal, (function (exports) {\r\n         /******************************************************************************\r\n         Copyright (c) Microsoft Corporation.\r\n\r\n         Permission to use, copy, modify, and/or distribute this software for any\r\n         purpose with or without fee is hereby granted.\r\n\r\n         THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n         REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n         AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n         INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n         LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n         OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n         PERFORMANCE OF THIS SOFTWARE.\r\n         ***************************************************************************** */\r\n         /* global Reflect, Promise */\r\n\r\n         var extendStatics = function(d, b) {\r\n             extendStatics = Object.setPrototypeOf ||\r\n                 ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n                 function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n             return extendStatics(d, b);\r\n         };\r\n\r\n         function __extends(d, b) {\r\n             if (typeof b !== \"function\" && b !== null)\r\n                 throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n             extendStatics(d, b);\r\n             function __() { this.constructor = d; }\r\n             d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n         }\r\n\r\n         function __decorate(decorators, target, key, desc) {\r\n             var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n             if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n             else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n             return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n         }\r\n\r\n         function __spreadArray(to, from, pack) {\r\n             if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n                 if (ar || !(i in from)) {\r\n                     if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n                     ar[i] = from[i];\r\n                 }\r\n             }\r\n             return to.concat(ar || Array.prototype.slice.call(from));\r\n         }\r\n\r\n         // export const SWITCH_TO_STRUCTURE = 193; (easily collides with DELETE_AND_ADD + fieldIndex = 2)\r\n         var SWITCH_TO_STRUCTURE = 255; // (decoding collides with DELETE_AND_ADD + fieldIndex = 63)\r\n         var TYPE_ID = 213;\r\n         /**\r\n          * Encoding Schema field operations.\r\n          */\r\n         exports.OPERATION = void 0;\r\n         (function (OPERATION) {\r\n             // add new structure/primitive\r\n             OPERATION[OPERATION[\"ADD\"] = 128] = \"ADD\";\r\n             // replace structure/primitive\r\n             OPERATION[OPERATION[\"REPLACE\"] = 0] = \"REPLACE\";\r\n             // delete field\r\n             OPERATION[OPERATION[\"DELETE\"] = 64] = \"DELETE\";\r\n             // DELETE field, followed by an ADD\r\n             OPERATION[OPERATION[\"DELETE_AND_ADD\"] = 192] = \"DELETE_AND_ADD\";\r\n             // TOUCH is used to determine hierarchy of nested Schema structures during serialization.\r\n             // touches are NOT encoded.\r\n             OPERATION[OPERATION[\"TOUCH\"] = 1] = \"TOUCH\";\r\n             // MapSchema Operations\r\n             OPERATION[OPERATION[\"CLEAR\"] = 10] = \"CLEAR\";\r\n         })(exports.OPERATION || (exports.OPERATION = {}));\r\n         // export enum OPERATION {\r\n         //     // add new structure/primitive\r\n         //     // (128)\r\n         //     ADD = 128, // 10000000,\r\n         //     // replace structure/primitive\r\n         //     REPLACE = 1,// 00000001\r\n         //     // delete field\r\n         //     DELETE = 192, // 11000000\r\n         //     // DELETE field, followed by an ADD\r\n         //     DELETE_AND_ADD = 224, // 11100000\r\n         //     // TOUCH is used to determine hierarchy of nested Schema structures during serialization.\r\n         //     // touches are NOT encoded.\r\n         //     TOUCH = 0, // 00000000\r\n         //     // MapSchema Operations\r\n         //     CLEAR = 10,\r\n         // }\r\n\r\n         var ChangeTree = /** @class */ (function () {\r\n             function ChangeTree(ref, parent, root) {\r\n                 this.changed = false;\r\n                 this.changes = new Map();\r\n                 this.allChanges = new Set();\r\n                 // cached indexes for filtering\r\n                 this.caches = {};\r\n                 this.currentCustomOperation = 0;\r\n                 this.ref = ref;\r\n                 this.setParent(parent, root);\r\n             }\r\n             ChangeTree.prototype.setParent = function (parent, root, parentIndex) {\r\n                 var _this = this;\r\n                 if (!this.indexes) {\r\n                     this.indexes = (this.ref instanceof Schema)\r\n                         ? this.ref['_definition'].indexes\r\n                         : {};\r\n                 }\r\n                 this.parent = parent;\r\n                 this.parentIndex = parentIndex;\r\n                 // avoid setting parents with empty `root`\r\n                 if (!root) {\r\n                     return;\r\n                 }\r\n                 this.root = root;\r\n                 //\r\n                 // assign same parent on child structures\r\n                 //\r\n                 if (this.ref instanceof Schema) {\r\n                     var definition = this.ref['_definition'];\r\n                     for (var field in definition.schema) {\r\n                         var value = this.ref[field];\r\n                         if (value && value['$changes']) {\r\n                             var parentIndex_1 = definition.indexes[field];\r\n                             value['$changes'].setParent(this.ref, root, parentIndex_1);\r\n                         }\r\n                     }\r\n                 }\r\n                 else if (typeof (this.ref) === \"object\") {\r\n                     this.ref.forEach(function (value, key) {\r\n                         if (value instanceof Schema) {\r\n                             var changeTreee = value['$changes'];\r\n                             var parentIndex_2 = _this.ref['$changes'].indexes[key];\r\n                             changeTreee.setParent(_this.ref, _this.root, parentIndex_2);\r\n                         }\r\n                     });\r\n                 }\r\n             };\r\n             ChangeTree.prototype.operation = function (op) {\r\n                 this.changes.set(--this.currentCustomOperation, op);\r\n             };\r\n             ChangeTree.prototype.change = function (fieldName, operation) {\r\n                 if (operation === void 0) { operation = exports.OPERATION.ADD; }\r\n                 var index = (typeof (fieldName) === \"number\")\r\n                     ? fieldName\r\n                     : this.indexes[fieldName];\r\n                 this.assertValidIndex(index, fieldName);\r\n                 var previousChange = this.changes.get(index);\r\n                 if (!previousChange ||\r\n                     previousChange.op === exports.OPERATION.DELETE ||\r\n                     previousChange.op === exports.OPERATION.TOUCH // (mazmorra.io's BattleAction issue)\r\n                 ) {\r\n                     this.changes.set(index, {\r\n                         op: (!previousChange)\r\n                             ? operation\r\n                             : (previousChange.op === exports.OPERATION.DELETE)\r\n                                 ? exports.OPERATION.DELETE_AND_ADD\r\n                                 : operation,\r\n                         // : OPERATION.REPLACE,\r\n                         index: index\r\n                     });\r\n                 }\r\n                 this.allChanges.add(index);\r\n                 this.changed = true;\r\n                 this.touchParents();\r\n             };\r\n             ChangeTree.prototype.touch = function (fieldName) {\r\n                 var index = (typeof (fieldName) === \"number\")\r\n                     ? fieldName\r\n                     : this.indexes[fieldName];\r\n                 this.assertValidIndex(index, fieldName);\r\n                 if (!this.changes.has(index)) {\r\n                     this.changes.set(index, { op: exports.OPERATION.TOUCH, index: index });\r\n                 }\r\n                 this.allChanges.add(index);\r\n                 // ensure touch is placed until the $root is found.\r\n                 this.touchParents();\r\n             };\r\n             ChangeTree.prototype.touchParents = function () {\r\n                 if (this.parent) {\r\n                     this.parent['$changes'].touch(this.parentIndex);\r\n                 }\r\n             };\r\n             ChangeTree.prototype.getType = function (index) {\r\n                 if (this.ref['_definition']) {\r\n                     var definition = this.ref['_definition'];\r\n                     return definition.schema[definition.fieldsByIndex[index]];\r\n                 }\r\n                 else {\r\n                     var definition = this.parent['_definition'];\r\n                     var parentType = definition.schema[definition.fieldsByIndex[this.parentIndex]];\r\n                     //\r\n                     // Get the child type from parent structure.\r\n                     // - [\"string\"] => \"string\"\r\n                     // - { map: \"string\" } => \"string\"\r\n                     // - { set: \"string\" } => \"string\"\r\n                     //\r\n                     return Object.values(parentType)[0];\r\n                 }\r\n             };\r\n             ChangeTree.prototype.getChildrenFilter = function () {\r\n                 var childFilters = this.parent['_definition'].childFilters;\r\n                 return childFilters && childFilters[this.parentIndex];\r\n             };\r\n             //\r\n             // used during `.encode()`\r\n             //\r\n             ChangeTree.prototype.getValue = function (index) {\r\n                 return this.ref['getByIndex'](index);\r\n             };\r\n             ChangeTree.prototype.delete = function (fieldName) {\r\n                 var index = (typeof (fieldName) === \"number\")\r\n                     ? fieldName\r\n                     : this.indexes[fieldName];\r\n                 if (index === undefined) {\r\n                     console.warn(\"@colyseus/schema \".concat(this.ref.constructor.name, \": trying to delete non-existing index: \").concat(fieldName, \" (\").concat(index, \")\"));\r\n                     return;\r\n                 }\r\n                 var previousValue = this.getValue(index);\r\n                 // console.log(\"$changes.delete =>\", { fieldName, index, previousValue });\r\n                 this.changes.set(index, { op: exports.OPERATION.DELETE, index: index });\r\n                 this.allChanges.delete(index);\r\n                 // delete cache\r\n                 delete this.caches[index];\r\n                 // remove `root` reference\r\n                 if (previousValue && previousValue['$changes']) {\r\n                     previousValue['$changes'].parent = undefined;\r\n                 }\r\n                 this.changed = true;\r\n                 this.touchParents();\r\n             };\r\n             ChangeTree.prototype.discard = function (changed, discardAll) {\r\n                 var _this = this;\r\n                 if (changed === void 0) { changed = false; }\r\n                 if (discardAll === void 0) { discardAll = false; }\r\n                 //\r\n                 // Map, Array, etc:\r\n                 // Remove cached key to ensure ADD operations is unsed instead of\r\n                 // REPLACE in case same key is used on next patches.\r\n                 //\r\n                 // TODO: refactor this. this is not relevant for Collection and Set.\r\n                 //\r\n                 if (!(this.ref instanceof Schema)) {\r\n                     this.changes.forEach(function (change) {\r\n                         if (change.op === exports.OPERATION.DELETE) {\r\n                             var index = _this.ref['getIndex'](change.index);\r\n                             delete _this.indexes[index];\r\n                         }\r\n                     });\r\n                 }\r\n                 this.changes.clear();\r\n                 this.changed = changed;\r\n                 if (discardAll) {\r\n                     this.allChanges.clear();\r\n                 }\r\n                 // re-set `currentCustomOperation`\r\n                 this.currentCustomOperation = 0;\r\n             };\r\n             /**\r\n              * Recursively discard all changes from this, and child structures.\r\n              */\r\n             ChangeTree.prototype.discardAll = function () {\r\n                 var _this = this;\r\n                 this.changes.forEach(function (change) {\r\n                     var value = _this.getValue(change.index);\r\n                     if (value && value['$changes']) {\r\n                         value['$changes'].discardAll();\r\n                     }\r\n                 });\r\n                 this.discard();\r\n             };\r\n             // cache(field: number, beginIndex: number, endIndex: number) {\r\n             ChangeTree.prototype.cache = function (field, cachedBytes) {\r\n                 this.caches[field] = cachedBytes;\r\n             };\r\n             ChangeTree.prototype.clone = function () {\r\n                 return new ChangeTree(this.ref, this.parent, this.root);\r\n             };\r\n             ChangeTree.prototype.ensureRefId = function () {\r\n                 // skip if refId is already set.\r\n                 if (this.refId !== undefined) {\r\n                     return;\r\n                 }\r\n                 this.refId = this.root.getNextUniqueId();\r\n             };\r\n             ChangeTree.prototype.assertValidIndex = function (index, fieldName) {\r\n                 if (index === undefined) {\r\n                     throw new Error(\"ChangeTree: missing index for field \\\"\".concat(fieldName, \"\\\"\"));\r\n                 }\r\n             };\r\n             return ChangeTree;\r\n         }());\r\n\r\n         function addCallback($callbacks, op, callback, existing) {\r\n             // initialize list of callbacks\r\n             if (!$callbacks[op]) {\r\n                 $callbacks[op] = [];\r\n             }\r\n             $callbacks[op].push(callback);\r\n             //\r\n             // Trigger callback for existing elements\r\n             // - OPERATION.ADD\r\n             // - OPERATION.REPLACE\r\n             //\r\n             existing === null || existing === void 0 ? void 0 : existing.forEach(function (item, key) { return callback(item, key); });\r\n             return function () { return spliceOne($callbacks[op], $callbacks[op].indexOf(callback)); };\r\n         }\r\n         function removeChildRefs(changes) {\r\n             var _this = this;\r\n             var needRemoveRef = (typeof (this.$changes.getType()) !== \"string\");\r\n             this.$items.forEach(function (item, key) {\r\n                 changes.push({\r\n                     refId: _this.$changes.refId,\r\n                     op: exports.OPERATION.DELETE,\r\n                     field: key,\r\n                     value: undefined,\r\n                     previousValue: item\r\n                 });\r\n                 if (needRemoveRef) {\r\n                     _this.$changes.root.removeRef(item['$changes'].refId);\r\n                 }\r\n             });\r\n         }\r\n         function spliceOne(arr, index) {\r\n             // manually splice an array\r\n             if (index === -1 || index >= arr.length) {\r\n                 return false;\r\n             }\r\n             var len = arr.length - 1;\r\n             for (var i = index; i < len; i++) {\r\n                 arr[i] = arr[i + 1];\r\n             }\r\n             arr.length = len;\r\n             return true;\r\n         }\r\n\r\n         var DEFAULT_SORT = function (a, b) {\r\n             var A = a.toString();\r\n             var B = b.toString();\r\n             if (A < B)\r\n                 return -1;\r\n             else if (A > B)\r\n                 return 1;\r\n             else\r\n                 return 0;\r\n         };\r\n         function getArrayProxy(value) {\r\n             value['$proxy'] = true;\r\n             //\r\n             // compatibility with @colyseus/schema 0.5.x\r\n             // - allow `map[\"key\"]`\r\n             // - allow `map[\"key\"] = \"xxx\"`\r\n             // - allow `delete map[\"key\"]`\r\n             //\r\n             value = new Proxy(value, {\r\n                 get: function (obj, prop) {\r\n                     if (typeof (prop) !== \"symbol\" &&\r\n                         !isNaN(prop) // https://stackoverflow.com/a/175787/892698\r\n                     ) {\r\n                         return obj.at(prop);\r\n                     }\r\n                     else {\r\n                         return obj[prop];\r\n                     }\r\n                 },\r\n                 set: function (obj, prop, setValue) {\r\n                     if (typeof (prop) !== \"symbol\" &&\r\n                         !isNaN(prop)) {\r\n                         var indexes = Array.from(obj['$items'].keys());\r\n                         var key = parseInt(indexes[prop] || prop);\r\n                         if (setValue === undefined || setValue === null) {\r\n                             obj.deleteAt(key);\r\n                         }\r\n                         else {\r\n                             obj.setAt(key, setValue);\r\n                         }\r\n                     }\r\n                     else {\r\n                         obj[prop] = setValue;\r\n                     }\r\n                     return true;\r\n                 },\r\n                 deleteProperty: function (obj, prop) {\r\n                     if (typeof (prop) === \"number\") {\r\n                         obj.deleteAt(prop);\r\n                     }\r\n                     else {\r\n                         delete obj[prop];\r\n                     }\r\n                     return true;\r\n                 },\r\n             });\r\n             return value;\r\n         }\r\n         var ArraySchema = /** @class */ (function () {\r\n             function ArraySchema() {\r\n                 var items = [];\r\n                 for (var _i = 0; _i < arguments.length; _i++) {\r\n                     items[_i] = arguments[_i];\r\n                 }\r\n                 this.$changes = new ChangeTree(this);\r\n                 this.$items = new Map();\r\n                 this.$indexes = new Map();\r\n                 this.$refId = 0;\r\n                 this.push.apply(this, items);\r\n             }\r\n             ArraySchema.prototype.onAdd = function (callback, triggerAll) {\r\n                 if (triggerAll === void 0) { triggerAll = true; }\r\n                 return addCallback((this.$callbacks || (this.$callbacks = [])), exports.OPERATION.ADD, callback, (triggerAll)\r\n                     ? this.$items\r\n                     : undefined);\r\n             };\r\n             ArraySchema.prototype.onRemove = function (callback) { return addCallback(this.$callbacks || (this.$callbacks = []), exports.OPERATION.DELETE, callback); };\r\n             ArraySchema.prototype.onChange = function (callback) { return addCallback(this.$callbacks || (this.$callbacks = []), exports.OPERATION.REPLACE, callback); };\r\n             ArraySchema.is = function (type) {\r\n                 return (\r\n                 // type format: [\"string\"]\r\n                 Array.isArray(type) ||\r\n                     // type format: { array: \"string\" }\r\n                     (type['array'] !== undefined));\r\n             };\r\n             Object.defineProperty(ArraySchema.prototype, \"length\", {\r\n                 get: function () {\r\n                     return this.$items.size;\r\n                 },\r\n                 set: function (value) {\r\n                     if (value === 0) {\r\n                         this.clear();\r\n                     }\r\n                     else {\r\n                         this.splice(value, this.length - value);\r\n                     }\r\n                 },\r\n                 enumerable: false,\r\n                 configurable: true\r\n             });\r\n             ArraySchema.prototype.push = function () {\r\n                 var _this = this;\r\n                 var values = [];\r\n                 for (var _i = 0; _i < arguments.length; _i++) {\r\n                     values[_i] = arguments[_i];\r\n                 }\r\n                 var lastIndex;\r\n                 values.forEach(function (value) {\r\n                     // set \"index\" for reference.\r\n                     lastIndex = _this.$refId++;\r\n                     _this.setAt(lastIndex, value);\r\n                 });\r\n                 return lastIndex;\r\n             };\r\n             /**\r\n              * Removes the last element from an array and returns it.\r\n              */\r\n             ArraySchema.prototype.pop = function () {\r\n                 var key = Array.from(this.$indexes.values()).pop();\r\n                 if (key === undefined) {\r\n                     return undefined;\r\n                 }\r\n                 this.$changes.delete(key);\r\n                 this.$indexes.delete(key);\r\n                 var value = this.$items.get(key);\r\n                 this.$items.delete(key);\r\n                 return value;\r\n             };\r\n             ArraySchema.prototype.at = function (index) {\r\n                 //\r\n                 // FIXME: this should be O(1)\r\n                 //\r\n                 var key = Array.from(this.$items.keys())[index];\r\n                 return this.$items.get(key);\r\n             };\r\n             ArraySchema.prototype.setAt = function (index, value) {\r\n                 var _a, _b;\r\n                 if (value['$changes'] !== undefined) {\r\n                     value['$changes'].setParent(this, this.$changes.root, index);\r\n                 }\r\n                 var operation = (_b = (_a = this.$changes.indexes[index]) === null || _a === void 0 ? void 0 : _a.op) !== null && _b !== void 0 ? _b : exports.OPERATION.ADD;\r\n                 this.$changes.indexes[index] = index;\r\n                 this.$indexes.set(index, index);\r\n                 this.$items.set(index, value);\r\n                 this.$changes.change(index, operation);\r\n             };\r\n             ArraySchema.prototype.deleteAt = function (index) {\r\n                 var key = Array.from(this.$items.keys())[index];\r\n                 if (key === undefined) {\r\n                     return false;\r\n                 }\r\n                 return this.$deleteAt(key);\r\n             };\r\n             ArraySchema.prototype.$deleteAt = function (index) {\r\n                 // delete at internal index\r\n                 this.$changes.delete(index);\r\n                 this.$indexes.delete(index);\r\n                 return this.$items.delete(index);\r\n             };\r\n             ArraySchema.prototype.clear = function (changes) {\r\n                 // discard previous operations.\r\n                 this.$changes.discard(true, true);\r\n                 this.$changes.indexes = {};\r\n                 // clear previous indexes\r\n                 this.$indexes.clear();\r\n                 //\r\n                 // When decoding:\r\n                 // - enqueue items for DELETE callback.\r\n                 // - flag child items for garbage collection.\r\n                 //\r\n                 if (changes) {\r\n                     removeChildRefs.call(this, changes);\r\n                 }\r\n                 // clear items\r\n                 this.$items.clear();\r\n                 this.$changes.operation({ index: 0, op: exports.OPERATION.CLEAR });\r\n                 // touch all structures until reach root\r\n                 this.$changes.touchParents();\r\n             };\r\n             /**\r\n              * Combines two or more arrays.\r\n              * @param items Additional items to add to the end of array1.\r\n              */\r\n             // @ts-ignore\r\n             ArraySchema.prototype.concat = function () {\r\n                 var _a;\r\n                 var items = [];\r\n                 for (var _i = 0; _i < arguments.length; _i++) {\r\n                     items[_i] = arguments[_i];\r\n                 }\r\n                 return new (ArraySchema.bind.apply(ArraySchema, __spreadArray([void 0], (_a = Array.from(this.$items.values())).concat.apply(_a, items), false)))();\r\n             };\r\n             /**\r\n              * Adds all the elements of an array separated by the specified separator string.\r\n              * @param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.\r\n              */\r\n             ArraySchema.prototype.join = function (separator) {\r\n                 return Array.from(this.$items.values()).join(separator);\r\n             };\r\n             /**\r\n              * Reverses the elements in an Array.\r\n              */\r\n             // @ts-ignore\r\n             ArraySchema.prototype.reverse = function () {\r\n                 var _this = this;\r\n                 var indexes = Array.from(this.$items.keys());\r\n                 var reversedItems = Array.from(this.$items.values()).reverse();\r\n                 reversedItems.forEach(function (item, i) {\r\n                     _this.setAt(indexes[i], item);\r\n                 });\r\n                 return this;\r\n             };\r\n             /**\r\n              * Removes the first element from an array and returns it.\r\n              */\r\n             ArraySchema.prototype.shift = function () {\r\n                 var indexes = Array.from(this.$items.keys());\r\n                 var shiftAt = indexes.shift();\r\n                 if (shiftAt === undefined) {\r\n                     return undefined;\r\n                 }\r\n                 var value = this.$items.get(shiftAt);\r\n                 this.$deleteAt(shiftAt);\r\n                 return value;\r\n             };\r\n             /**\r\n              * Returns a section of an array.\r\n              * @param start The beginning of the specified portion of the array.\r\n              * @param end The end of the specified portion of the array. This is exclusive of the element at the index 'end'.\r\n              */\r\n             ArraySchema.prototype.slice = function (start, end) {\r\n                 var sliced = new ArraySchema();\r\n                 sliced.push.apply(sliced, Array.from(this.$items.values()).slice(start, end));\r\n                 return sliced;\r\n             };\r\n             /**\r\n              * Sorts an array.\r\n              * @param compareFn Function used to determine the order of the elements. It is expected to return\r\n              * a negative value if first argument is less than second argument, zero if they're equal and a positive\r\n              * value otherwise. If omitted, the elements are sorted in ascending, ASCII character order.\r\n              * ```ts\r\n              * [11,2,22,1].sort((a, b) => a - b)\r\n              * ```\r\n              */\r\n             ArraySchema.prototype.sort = function (compareFn) {\r\n                 var _this = this;\r\n                 if (compareFn === void 0) { compareFn = DEFAULT_SORT; }\r\n                 var indexes = Array.from(this.$items.keys());\r\n                 var sortedItems = Array.from(this.$items.values()).sort(compareFn);\r\n                 sortedItems.forEach(function (item, i) {\r\n                     _this.setAt(indexes[i], item);\r\n                 });\r\n                 return this;\r\n             };\r\n             /**\r\n              * Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\r\n              * @param start The zero-based location in the array from which to start removing elements.\r\n              * @param deleteCount The number of elements to remove.\r\n              * @param items Elements to insert into the array in place of the deleted elements.\r\n              */\r\n             ArraySchema.prototype.splice = function (start, deleteCount) {\r\n                 if (deleteCount === void 0) { deleteCount = this.length - start; }\r\n                 var indexes = Array.from(this.$items.keys());\r\n                 var removedItems = [];\r\n                 for (var i = start; i < start + deleteCount; i++) {\r\n                     removedItems.push(this.$items.get(indexes[i]));\r\n                     this.$deleteAt(indexes[i]);\r\n                 }\r\n                 return removedItems;\r\n             };\r\n             /**\r\n              * Inserts new elements at the start of an array.\r\n              * @param items  Elements to insert at the start of the Array.\r\n              */\r\n             ArraySchema.prototype.unshift = function () {\r\n                 var _this = this;\r\n                 var items = [];\r\n                 for (var _i = 0; _i < arguments.length; _i++) {\r\n                     items[_i] = arguments[_i];\r\n                 }\r\n                 var length = this.length;\r\n                 var addedLength = items.length;\r\n                 // const indexes = Array.from(this.$items.keys());\r\n                 var previousValues = Array.from(this.$items.values());\r\n                 items.forEach(function (item, i) {\r\n                     _this.setAt(i, item);\r\n                 });\r\n                 previousValues.forEach(function (previousValue, i) {\r\n                     _this.setAt(addedLength + i, previousValue);\r\n                 });\r\n                 return length + addedLength;\r\n             };\r\n             /**\r\n              * Returns the index of the first occurrence of a value in an array.\r\n              * @param searchElement The value to locate in the array.\r\n              * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.\r\n              */\r\n             ArraySchema.prototype.indexOf = function (searchElement, fromIndex) {\r\n                 return Array.from(this.$items.values()).indexOf(searchElement, fromIndex);\r\n             };\r\n             /**\r\n              * Returns the index of the last occurrence of a specified value in an array.\r\n              * @param searchElement The value to locate in the array.\r\n              * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.\r\n              */\r\n             ArraySchema.prototype.lastIndexOf = function (searchElement, fromIndex) {\r\n                 if (fromIndex === void 0) { fromIndex = this.length - 1; }\r\n                 return Array.from(this.$items.values()).lastIndexOf(searchElement, fromIndex);\r\n             };\r\n             /**\r\n              * Determines whether all the members of an array satisfy the specified test.\r\n              * @param callbackfn A function that accepts up to three arguments. The every method calls\r\n              * the callbackfn function for each element in the array until the callbackfn returns a value\r\n              * which is coercible to the Boolean value false, or until the end of the array.\r\n              * @param thisArg An object to which the this keyword can refer in the callbackfn function.\r\n              * If thisArg is omitted, undefined is used as the this value.\r\n              */\r\n             ArraySchema.prototype.every = function (callbackfn, thisArg) {\r\n                 return Array.from(this.$items.values()).every(callbackfn, thisArg);\r\n             };\r\n             /**\r\n              * Determines whether the specified callback function returns true for any element of an array.\r\n              * @param callbackfn A function that accepts up to three arguments. The some method calls\r\n              * the callbackfn function for each element in the array until the callbackfn returns a value\r\n              * which is coercible to the Boolean value true, or until the end of the array.\r\n              * @param thisArg An object to which the this keyword can refer in the callbackfn function.\r\n              * If thisArg is omitted, undefined is used as the this value.\r\n              */\r\n             ArraySchema.prototype.some = function (callbackfn, thisArg) {\r\n                 return Array.from(this.$items.values()).some(callbackfn, thisArg);\r\n             };\r\n             /**\r\n              * Performs the specified action for each element in an array.\r\n              * @param callbackfn  A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\r\n              * @param thisArg  An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\r\n              */\r\n             ArraySchema.prototype.forEach = function (callbackfn, thisArg) {\r\n                 Array.from(this.$items.values()).forEach(callbackfn, thisArg);\r\n             };\r\n             /**\r\n              * Calls a defined callback function on each element of an array, and returns an array that contains the results.\r\n              * @param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\r\n              * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\r\n              */\r\n             ArraySchema.prototype.map = function (callbackfn, thisArg) {\r\n                 return Array.from(this.$items.values()).map(callbackfn, thisArg);\r\n             };\r\n             ArraySchema.prototype.filter = function (callbackfn, thisArg) {\r\n                 return Array.from(this.$items.values()).filter(callbackfn, thisArg);\r\n             };\r\n             /**\r\n              * Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\r\n              * @param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\r\n              * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\r\n              */\r\n             ArraySchema.prototype.reduce = function (callbackfn, initialValue) {\r\n                 return Array.prototype.reduce.apply(Array.from(this.$items.values()), arguments);\r\n             };\r\n             /**\r\n              * Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\r\n              * @param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\r\n              * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\r\n              */\r\n             ArraySchema.prototype.reduceRight = function (callbackfn, initialValue) {\r\n                 return Array.prototype.reduceRight.apply(Array.from(this.$items.values()), arguments);\r\n             };\r\n             /**\r\n              * Returns the value of the first element in the array where predicate is true, and undefined\r\n              * otherwise.\r\n              * @param predicate find calls predicate once for each element of the array, in ascending\r\n              * order, until it finds one where predicate returns true. If such an element is found, find\r\n              * immediately returns that element value. Otherwise, find returns undefined.\r\n              * @param thisArg If provided, it will be used as the this value for each invocation of\r\n              * predicate. If it is not provided, undefined is used instead.\r\n              */\r\n             ArraySchema.prototype.find = function (predicate, thisArg) {\r\n                 return Array.from(this.$items.values()).find(predicate, thisArg);\r\n             };\r\n             /**\r\n              * Returns the index of the first element in the array where predicate is true, and -1\r\n              * otherwise.\r\n              * @param predicate find calls predicate once for each element of the array, in ascending\r\n              * order, until it finds one where predicate returns true. If such an element is found,\r\n              * findIndex immediately returns that element index. Otherwise, findIndex returns -1.\r\n              * @param thisArg If provided, it will be used as the this value for each invocation of\r\n              * predicate. If it is not provided, undefined is used instead.\r\n              */\r\n             ArraySchema.prototype.findIndex = function (predicate, thisArg) {\r\n                 return Array.from(this.$items.values()).findIndex(predicate, thisArg);\r\n             };\r\n             /**\r\n              * Returns the this object after filling the section identified by start and end with value\r\n              * @param value value to fill array section with\r\n              * @param start index to start filling the array at. If start is negative, it is treated as\r\n              * length+start where length is the length of the array.\r\n              * @param end index to stop filling the array at. If end is negative, it is treated as\r\n              * length+end.\r\n              */\r\n             ArraySchema.prototype.fill = function (value, start, end) {\r\n                 //\r\n                 // TODO\r\n                 //\r\n                 throw new Error(\"ArraySchema#fill() not implemented\");\r\n             };\r\n             /**\r\n              * Returns the this object after copying a section of the array identified by start and end\r\n              * to the same array starting at position target\r\n              * @param target If target is negative, it is treated as length+target where length is the\r\n              * length of the array.\r\n              * @param start If start is negative, it is treated as length+start. If end is negative, it\r\n              * is treated as length+end.\r\n              * @param end If not specified, length of the this object is used as its default value.\r\n              */\r\n             ArraySchema.prototype.copyWithin = function (target, start, end) {\r\n                 //\r\n                 // TODO\r\n                 //\r\n                 throw new Error(\"ArraySchema#copyWithin() not implemented\");\r\n             };\r\n             /**\r\n              * Returns a string representation of an array.\r\n              */\r\n             ArraySchema.prototype.toString = function () { return this.$items.toString(); };\r\n             /**\r\n              * Returns a string representation of an array. The elements are converted to string using their toLocalString methods.\r\n              */\r\n             ArraySchema.prototype.toLocaleString = function () { return this.$items.toLocaleString(); };\r\n             /** Iterator */\r\n             ArraySchema.prototype[Symbol.iterator] = function () {\r\n                 return Array.from(this.$items.values())[Symbol.iterator]();\r\n             };\r\n             /**\r\n              * Returns an iterable of key, value pairs for every entry in the array\r\n              */\r\n             ArraySchema.prototype.entries = function () { return this.$items.entries(); };\r\n             /**\r\n              * Returns an iterable of keys in the array\r\n              */\r\n             ArraySchema.prototype.keys = function () { return this.$items.keys(); };\r\n             /**\r\n              * Returns an iterable of values in the array\r\n              */\r\n             ArraySchema.prototype.values = function () { return this.$items.values(); };\r\n             /**\r\n              * Determines whether an array includes a certain element, returning true or false as appropriate.\r\n              * @param searchElement The element to search for.\r\n              * @param fromIndex The position in this array at which to begin searching for searchElement.\r\n              */\r\n             ArraySchema.prototype.includes = function (searchElement, fromIndex) {\r\n                 return Array.from(this.$items.values()).includes(searchElement, fromIndex);\r\n             };\r\n             /**\r\n              * Calls a defined callback function on each element of an array. Then, flattens the result into\r\n              * a new array.\r\n              * This is identical to a map followed by flat with depth 1.\r\n              *\r\n              * @param callback A function that accepts up to three arguments. The flatMap method calls the\r\n              * callback function one time for each element in the array.\r\n              * @param thisArg An object to which the this keyword can refer in the callback function. If\r\n              * thisArg is omitted, undefined is used as the this value.\r\n              */\r\n             // @ts-ignore\r\n             ArraySchema.prototype.flatMap = function (callback, thisArg) {\r\n                 // @ts-ignore\r\n                 throw new Error(\"ArraySchema#flatMap() is not supported.\");\r\n             };\r\n             /**\r\n              * Returns a new array with all sub-array elements concatenated into it recursively up to the\r\n              * specified depth.\r\n              *\r\n              * @param depth The maximum recursion depth\r\n              */\r\n             // @ts-ignore\r\n             ArraySchema.prototype.flat = function (depth) {\r\n                 throw new Error(\"ArraySchema#flat() is not supported.\");\r\n             };\r\n             ArraySchema.prototype.findLast = function () {\r\n                 var arr = Array.from(this.$items.values());\r\n                 // @ts-ignore\r\n                 return arr.findLast.apply(arr, arguments);\r\n             };\r\n             ArraySchema.prototype.findLastIndex = function () {\r\n                 var arr = Array.from(this.$items.values());\r\n                 // @ts-ignore\r\n                 return arr.findLastIndex.apply(arr, arguments);\r\n             };\r\n             // get size () {\r\n             //     return this.$items.size;\r\n             // }\r\n             ArraySchema.prototype.setIndex = function (index, key) {\r\n                 this.$indexes.set(index, key);\r\n             };\r\n             ArraySchema.prototype.getIndex = function (index) {\r\n                 return this.$indexes.get(index);\r\n             };\r\n             ArraySchema.prototype.getByIndex = function (index) {\r\n                 return this.$items.get(this.$indexes.get(index));\r\n             };\r\n             ArraySchema.prototype.deleteByIndex = function (index) {\r\n                 var key = this.$indexes.get(index);\r\n                 this.$items.delete(key);\r\n                 this.$indexes.delete(index);\r\n             };\r\n             ArraySchema.prototype.toArray = function () {\r\n                 return Array.from(this.$items.values());\r\n             };\r\n             ArraySchema.prototype.toJSON = function () {\r\n                 return this.toArray().map(function (value) {\r\n                     return (typeof (value['toJSON']) === \"function\")\r\n                         ? value['toJSON']()\r\n                         : value;\r\n                 });\r\n             };\r\n             //\r\n             // Decoding utilities\r\n             //\r\n             ArraySchema.prototype.clone = function (isDecoding) {\r\n                 var cloned;\r\n                 if (isDecoding) {\r\n                     cloned = new (ArraySchema.bind.apply(ArraySchema, __spreadArray([void 0], Array.from(this.$items.values()), false)))();\r\n                 }\r\n                 else {\r\n                     cloned = new (ArraySchema.bind.apply(ArraySchema, __spreadArray([void 0], this.map(function (item) { return ((item['$changes'])\r\n                         ? item.clone()\r\n                         : item); }), false)))();\r\n                 }\r\n                 return cloned;\r\n             };\r\n             return ArraySchema;\r\n         }());\r\n\r\n         function getMapProxy(value) {\r\n             value['$proxy'] = true;\r\n             value = new Proxy(value, {\r\n                 get: function (obj, prop) {\r\n                     if (typeof (prop) !== \"symbol\" && // accessing properties\r\n                         typeof (obj[prop]) === \"undefined\") {\r\n                         return obj.get(prop);\r\n                     }\r\n                     else {\r\n                         return obj[prop];\r\n                     }\r\n                 },\r\n                 set: function (obj, prop, setValue) {\r\n                     if (typeof (prop) !== \"symbol\" &&\r\n                         (prop.indexOf(\"$\") === -1 &&\r\n                             prop !== \"onAdd\" &&\r\n                             prop !== \"onRemove\" &&\r\n                             prop !== \"onChange\")) {\r\n                         obj.set(prop, setValue);\r\n                     }\r\n                     else {\r\n                         obj[prop] = setValue;\r\n                     }\r\n                     return true;\r\n                 },\r\n                 deleteProperty: function (obj, prop) {\r\n                     obj.delete(prop);\r\n                     return true;\r\n                 },\r\n             });\r\n             return value;\r\n         }\r\n         var MapSchema = /** @class */ (function () {\r\n             function MapSchema(initialValues) {\r\n                 var _this = this;\r\n                 this.$changes = new ChangeTree(this);\r\n                 this.$items = new Map();\r\n                 this.$indexes = new Map();\r\n                 this.$refId = 0;\r\n                 if (initialValues) {\r\n                     if (initialValues instanceof Map ||\r\n                         initialValues instanceof MapSchema) {\r\n                         initialValues.forEach(function (v, k) { return _this.set(k, v); });\r\n                     }\r\n                     else {\r\n                         for (var k in initialValues) {\r\n                             this.set(k, initialValues[k]);\r\n                         }\r\n                     }\r\n                 }\r\n             }\r\n             MapSchema.prototype.onAdd = function (callback, triggerAll) {\r\n                 if (triggerAll === void 0) { triggerAll = true; }\r\n                 return addCallback((this.$callbacks || (this.$callbacks = [])), exports.OPERATION.ADD, callback, (triggerAll)\r\n                     ? this.$items\r\n                     : undefined);\r\n             };\r\n             MapSchema.prototype.onRemove = function (callback) { return addCallback(this.$callbacks || (this.$callbacks = []), exports.OPERATION.DELETE, callback); };\r\n             MapSchema.prototype.onChange = function (callback) { return addCallback(this.$callbacks || (this.$callbacks = []), exports.OPERATION.REPLACE, callback); };\r\n             MapSchema.is = function (type) {\r\n                 return type['map'] !== undefined;\r\n             };\r\n             /** Iterator */\r\n             MapSchema.prototype[Symbol.iterator] = function () { return this.$items[Symbol.iterator](); };\r\n             Object.defineProperty(MapSchema.prototype, Symbol.toStringTag, {\r\n                 get: function () { return this.$items[Symbol.toStringTag]; },\r\n                 enumerable: false,\r\n                 configurable: true\r\n             });\r\n             MapSchema.prototype.set = function (key, value) {\r\n                 if (value === undefined || value === null) {\r\n                     throw new Error(\"MapSchema#set('\".concat(key, \"', \").concat(value, \"): trying to set \").concat(value, \" value on '\").concat(key, \"'.\"));\r\n                 }\r\n                 // get \"index\" for this value.\r\n                 var hasIndex = typeof (this.$changes.indexes[key]) !== \"undefined\";\r\n                 var index = (hasIndex)\r\n                     ? this.$changes.indexes[key]\r\n                     : this.$refId++;\r\n                 var operation = (hasIndex)\r\n                     ? exports.OPERATION.REPLACE\r\n                     : exports.OPERATION.ADD;\r\n                 var isRef = (value['$changes']) !== undefined;\r\n                 if (isRef) {\r\n                     value['$changes'].setParent(this, this.$changes.root, index);\r\n                 }\r\n                 //\r\n                 // (encoding)\r\n                 // set a unique id to relate directly with this key/value.\r\n                 //\r\n                 if (!hasIndex) {\r\n                     this.$changes.indexes[key] = index;\r\n                     this.$indexes.set(index, key);\r\n                 }\r\n                 else if (isRef && // if is schema, force ADD operation if value differ from previous one.\r\n                     this.$items.get(key) !== value) {\r\n                     operation = exports.OPERATION.ADD;\r\n                 }\r\n                 this.$items.set(key, value);\r\n                 this.$changes.change(key, operation);\r\n                 return this;\r\n             };\r\n             MapSchema.prototype.get = function (key) {\r\n                 return this.$items.get(key);\r\n             };\r\n             MapSchema.prototype.delete = function (key) {\r\n                 //\r\n                 // TODO: add a \"purge\" method after .encode() runs, to cleanup removed `$indexes`\r\n                 //\r\n                 // We don't remove $indexes to allow setting the same key in the same patch\r\n                 // (See \"should allow to remove and set an item in the same place\" test)\r\n                 //\r\n                 // // const index = this.$changes.indexes[key];\r\n                 // // this.$indexes.delete(index);\r\n                 this.$changes.delete(key);\r\n                 return this.$items.delete(key);\r\n             };\r\n             MapSchema.prototype.clear = function (changes) {\r\n                 // discard previous operations.\r\n                 this.$changes.discard(true, true);\r\n                 this.$changes.indexes = {};\r\n                 // clear previous indexes\r\n                 this.$indexes.clear();\r\n                 //\r\n                 // When decoding:\r\n                 // - enqueue items for DELETE callback.\r\n                 // - flag child items for garbage collection.\r\n                 //\r\n                 if (changes) {\r\n                     removeChildRefs.call(this, changes);\r\n                 }\r\n                 // clear items\r\n                 this.$items.clear();\r\n                 this.$changes.operation({ index: 0, op: exports.OPERATION.CLEAR });\r\n                 // touch all structures until reach root\r\n                 this.$changes.touchParents();\r\n             };\r\n             MapSchema.prototype.has = function (key) {\r\n                 return this.$items.has(key);\r\n             };\r\n             MapSchema.prototype.forEach = function (callbackfn) {\r\n                 this.$items.forEach(callbackfn);\r\n             };\r\n             MapSchema.prototype.entries = function () {\r\n                 return this.$items.entries();\r\n             };\r\n             MapSchema.prototype.keys = function () {\r\n                 return this.$items.keys();\r\n             };\r\n             MapSchema.prototype.values = function () {\r\n                 return this.$items.values();\r\n             };\r\n             Object.defineProperty(MapSchema.prototype, \"size\", {\r\n                 get: function () {\r\n                     return this.$items.size;\r\n                 },\r\n                 enumerable: false,\r\n                 configurable: true\r\n             });\r\n             MapSchema.prototype.setIndex = function (index, key) {\r\n                 this.$indexes.set(index, key);\r\n             };\r\n             MapSchema.prototype.getIndex = function (index) {\r\n                 return this.$indexes.get(index);\r\n             };\r\n             MapSchema.prototype.getByIndex = function (index) {\r\n                 return this.$items.get(this.$indexes.get(index));\r\n             };\r\n             MapSchema.prototype.deleteByIndex = function (index) {\r\n                 var key = this.$indexes.get(index);\r\n                 this.$items.delete(key);\r\n                 this.$indexes.delete(index);\r\n             };\r\n             MapSchema.prototype.toJSON = function () {\r\n                 var map = {};\r\n                 this.forEach(function (value, key) {\r\n                     map[key] = (typeof (value['toJSON']) === \"function\")\r\n                         ? value['toJSON']()\r\n                         : value;\r\n                 });\r\n                 return map;\r\n             };\r\n             //\r\n             // Decoding utilities\r\n             //\r\n             MapSchema.prototype.clone = function (isDecoding) {\r\n                 var cloned;\r\n                 if (isDecoding) {\r\n                     // client-side\r\n                     cloned = Object.assign(new MapSchema(), this);\r\n                 }\r\n                 else {\r\n                     // server-side\r\n                     cloned = new MapSchema();\r\n                     this.forEach(function (value, key) {\r\n                         if (value['$changes']) {\r\n                             cloned.set(key, value['clone']());\r\n                         }\r\n                         else {\r\n                             cloned.set(key, value);\r\n                         }\r\n                     });\r\n                 }\r\n                 return cloned;\r\n             };\r\n             return MapSchema;\r\n         }());\r\n\r\n         var registeredTypes = {};\r\n         function registerType(identifier, definition) {\r\n             registeredTypes[identifier] = definition;\r\n         }\r\n         function getType(identifier) {\r\n             return registeredTypes[identifier];\r\n         }\r\n\r\n         var SchemaDefinition = /** @class */ (function () {\r\n             function SchemaDefinition() {\r\n                 //\r\n                 // TODO: use a \"field\" structure combining all these properties per-field.\r\n                 //\r\n                 this.indexes = {};\r\n                 this.fieldsByIndex = {};\r\n                 this.deprecated = {};\r\n                 this.descriptors = {};\r\n             }\r\n             SchemaDefinition.create = function (parent) {\r\n                 var definition = new SchemaDefinition();\r\n                 // support inheritance\r\n                 definition.schema = Object.assign({}, parent && parent.schema || {});\r\n                 definition.indexes = Object.assign({}, parent && parent.indexes || {});\r\n                 definition.fieldsByIndex = Object.assign({}, parent && parent.fieldsByIndex || {});\r\n                 definition.descriptors = Object.assign({}, parent && parent.descriptors || {});\r\n                 definition.deprecated = Object.assign({}, parent && parent.deprecated || {});\r\n                 return definition;\r\n             };\r\n             SchemaDefinition.prototype.addField = function (field, type) {\r\n                 var index = this.getNextFieldIndex();\r\n                 this.fieldsByIndex[index] = field;\r\n                 this.indexes[field] = index;\r\n                 this.schema[field] = (Array.isArray(type))\r\n                     ? { array: type[0] }\r\n                     : type;\r\n             };\r\n             SchemaDefinition.prototype.hasField = function (field) {\r\n                 return this.indexes[field] !== undefined;\r\n             };\r\n             SchemaDefinition.prototype.addFilter = function (field, cb) {\r\n                 if (!this.filters) {\r\n                     this.filters = {};\r\n                     this.indexesWithFilters = [];\r\n                 }\r\n                 this.filters[this.indexes[field]] = cb;\r\n                 this.indexesWithFilters.push(this.indexes[field]);\r\n                 return true;\r\n             };\r\n             SchemaDefinition.prototype.addChildrenFilter = function (field, cb) {\r\n                 var index = this.indexes[field];\r\n                 var type = this.schema[field];\r\n                 if (getType(Object.keys(type)[0])) {\r\n                     if (!this.childFilters) {\r\n                         this.childFilters = {};\r\n                     }\r\n                     this.childFilters[index] = cb;\r\n                     return true;\r\n                 }\r\n                 else {\r\n                     console.warn(\"@filterChildren: field '\".concat(field, \"' can't have children. Ignoring filter.\"));\r\n                 }\r\n             };\r\n             SchemaDefinition.prototype.getChildrenFilter = function (field) {\r\n                 return this.childFilters && this.childFilters[this.indexes[field]];\r\n             };\r\n             SchemaDefinition.prototype.getNextFieldIndex = function () {\r\n                 return Object.keys(this.schema || {}).length;\r\n             };\r\n             return SchemaDefinition;\r\n         }());\r\n         function hasFilter(klass) {\r\n             return klass._context && klass._context.useFilters;\r\n         }\r\n         var Context = /** @class */ (function () {\r\n             function Context() {\r\n                 this.types = {};\r\n                 this.schemas = new Map();\r\n                 this.useFilters = false;\r\n             }\r\n             Context.prototype.has = function (schema) {\r\n                 return this.schemas.has(schema);\r\n             };\r\n             Context.prototype.get = function (typeid) {\r\n                 return this.types[typeid];\r\n             };\r\n             Context.prototype.add = function (schema, typeid) {\r\n                 if (typeid === void 0) { typeid = this.schemas.size; }\r\n                 // FIXME: move this to somewhere else?\r\n                 // support inheritance\r\n                 schema._definition = SchemaDefinition.create(schema._definition);\r\n                 schema._typeid = typeid;\r\n                 this.types[typeid] = schema;\r\n                 this.schemas.set(schema, typeid);\r\n             };\r\n             Context.create = function (options) {\r\n                 if (options === void 0) { options = {}; }\r\n                 return function (definition) {\r\n                     if (!options.context) {\r\n                         options.context = new Context();\r\n                     }\r\n                     return type(definition, options);\r\n                 };\r\n             };\r\n             return Context;\r\n         }());\r\n         var globalContext = new Context();\r\n         /**\r\n          * [See documentation](https://docs.colyseus.io/state/schema/)\r\n          *\r\n          * Annotate a Schema property to be serializeable.\r\n          * \\@type()'d fields are automatically flagged as \"dirty\" for the next patch.\r\n          *\r\n          * @example Standard usage, with automatic change tracking.\r\n          * ```\r\n          * \\@type(\"string\") propertyName: string;\r\n          * ```\r\n          *\r\n          * @example You can provide the \"manual\" option if you'd like to manually control your patches via .setDirty().\r\n          * ```\r\n          * \\@type(\"string\", { manual: true })\r\n          * ```\r\n          */\r\n         function type(type, options) {\r\n             if (options === void 0) { options = {}; }\r\n             return function (target, field) {\r\n                 var context = options.context || globalContext;\r\n                 var constructor = target.constructor;\r\n                 constructor._context = context;\r\n                 if (!type) {\r\n                     throw new Error(\"\".concat(constructor.name, \": @type() reference provided for \\\"\").concat(field, \"\\\" is undefined. Make sure you don't have any circular dependencies.\"));\r\n                 }\r\n                 /*\r\n                  * static schema\r\n                  */\r\n                 if (!context.has(constructor)) {\r\n                     context.add(constructor);\r\n                 }\r\n                 var definition = constructor._definition;\r\n                 definition.addField(field, type);\r\n                 /**\r\n                  * skip if descriptor already exists for this field (`@deprecated()`)\r\n                  */\r\n                 if (definition.descriptors[field]) {\r\n                     if (definition.deprecated[field]) {\r\n                         // do not create accessors for deprecated properties.\r\n                         return;\r\n                     }\r\n                     else {\r\n                         // trying to define same property multiple times across inheritance.\r\n                         // https://github.com/colyseus/colyseus-unity3d/issues/131#issuecomment-814308572\r\n                         try {\r\n                             throw new Error(\"@colyseus/schema: Duplicate '\".concat(field, \"' definition on '\").concat(constructor.name, \"'.\\nCheck @type() annotation\"));\r\n                         }\r\n                         catch (e) {\r\n                             var definitionAtLine = e.stack.split(\"\\n\")[4].trim();\r\n                             throw new Error(\"\".concat(e.message, \" \").concat(definitionAtLine));\r\n                         }\r\n                     }\r\n                 }\r\n                 var isArray = ArraySchema.is(type);\r\n                 var isMap = !isArray && MapSchema.is(type);\r\n                 // TODO: refactor me.\r\n                 // Allow abstract intermediary classes with no fields to be serialized\r\n                 // (See \"should support an inheritance with a Schema type without fields\" test)\r\n                 if (typeof (type) !== \"string\" && !Schema.is(type)) {\r\n                     var childType = Object.values(type)[0];\r\n                     if (typeof (childType) !== \"string\" && !context.has(childType)) {\r\n                         context.add(childType);\r\n                     }\r\n                 }\r\n                 if (options.manual) {\r\n                     // do not declare getter/setter descriptor\r\n                     definition.descriptors[field] = {\r\n                         enumerable: true,\r\n                         configurable: true,\r\n                         writable: true,\r\n                     };\r\n                     return;\r\n                 }\r\n                 var fieldCached = \"_\".concat(field);\r\n                 definition.descriptors[fieldCached] = {\r\n                     enumerable: false,\r\n                     configurable: false,\r\n                     writable: true,\r\n                 };\r\n                 definition.descriptors[field] = {\r\n                     get: function () {\r\n                         return this[fieldCached];\r\n                     },\r\n                     set: function (value) {\r\n                         /**\r\n                          * Create Proxy for array or map items\r\n                          */\r\n                         // skip if value is the same as cached.\r\n                         if (value === this[fieldCached]) {\r\n                             return;\r\n                         }\r\n                         if (value !== undefined &&\r\n                             value !== null) {\r\n                             // automaticallty transform Array into ArraySchema\r\n                             if (isArray && !(value instanceof ArraySchema)) {\r\n                                 value = new (ArraySchema.bind.apply(ArraySchema, __spreadArray([void 0], value, false)))();\r\n                             }\r\n                             // automaticallty transform Map into MapSchema\r\n                             if (isMap && !(value instanceof MapSchema)) {\r\n                                 value = new MapSchema(value);\r\n                             }\r\n                             // try to turn provided structure into a Proxy\r\n                             if (value['$proxy'] === undefined) {\r\n                                 if (isMap) {\r\n                                     value = getMapProxy(value);\r\n                                 }\r\n                                 else if (isArray) {\r\n                                     value = getArrayProxy(value);\r\n                                 }\r\n                             }\r\n                             // flag the change for encoding.\r\n                             this.$changes.change(field);\r\n                             //\r\n                             // call setParent() recursively for this and its child\r\n                             // structures.\r\n                             //\r\n                             if (value['$changes']) {\r\n                                 value['$changes'].setParent(this, this.$changes.root, this._definition.indexes[field]);\r\n                             }\r\n                         }\r\n                         else if (this[fieldCached]) {\r\n                             //\r\n                             // Setting a field to `null` or `undefined` will delete it.\r\n                             //\r\n                             this.$changes.delete(field);\r\n                         }\r\n                         this[fieldCached] = value;\r\n                     },\r\n                     enumerable: true,\r\n                     configurable: true\r\n                 };\r\n             };\r\n         }\r\n         /**\r\n          * `@filter()` decorator for defining data filters per client\r\n          */\r\n         function filter(cb) {\r\n             return function (target, field) {\r\n                 var constructor = target.constructor;\r\n                 var definition = constructor._definition;\r\n                 if (definition.addFilter(field, cb)) {\r\n                     constructor._context.useFilters = true;\r\n                 }\r\n             };\r\n         }\r\n         function filterChildren(cb) {\r\n             return function (target, field) {\r\n                 var constructor = target.constructor;\r\n                 var definition = constructor._definition;\r\n                 if (definition.addChildrenFilter(field, cb)) {\r\n                     constructor._context.useFilters = true;\r\n                 }\r\n             };\r\n         }\r\n         /**\r\n          * `@deprecated()` flag a field as deprecated.\r\n          * The previous `@type()` annotation should remain along with this one.\r\n          */\r\n         function deprecated(throws) {\r\n             if (throws === void 0) { throws = true; }\r\n             return function (target, field) {\r\n                 var constructor = target.constructor;\r\n                 var definition = constructor._definition;\r\n                 definition.deprecated[field] = true;\r\n                 if (throws) {\r\n                     definition.descriptors[field] = {\r\n                         get: function () { throw new Error(\"\".concat(field, \" is deprecated.\")); },\r\n                         set: function (value) { },\r\n                         enumerable: false,\r\n                         configurable: true\r\n                     };\r\n                 }\r\n             };\r\n         }\r\n         function defineTypes(target, fields, options) {\r\n             if (options === void 0) { options = {}; }\r\n             if (!options.context) {\r\n                 options.context = target._context || options.context || globalContext;\r\n             }\r\n             for (var field in fields) {\r\n                 type(fields[field], options)(target.prototype, field);\r\n             }\r\n             return target;\r\n         }\r\n\r\n         /**\r\n          * Copyright (c) 2018 Endel Dreyer\r\n          * Copyright (c) 2014 Ion Drive Software Ltd.\r\n          *\r\n          * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n          * of this software and associated documentation files (the \"Software\"), to deal\r\n          * in the Software without restriction, including without limitation the rights\r\n          * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n          * copies of the Software, and to permit persons to whom the Software is\r\n          * furnished to do so, subject to the following conditions:\r\n          *\r\n          * The above copyright notice and this permission notice shall be included in all\r\n          * copies or substantial portions of the Software.\r\n          *\r\n          * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n          * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n          * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n          * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n          * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n          * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n          * SOFTWARE\r\n          */\r\n         /**\r\n          * msgpack implementation highly based on notepack.io\r\n          * https://github.com/darrachequesne/notepack\r\n          */\r\n         function utf8Length(str) {\r\n             var c = 0, length = 0;\r\n             for (var i = 0, l = str.length; i < l; i++) {\r\n                 c = str.charCodeAt(i);\r\n                 if (c < 0x80) {\r\n                     length += 1;\r\n                 }\r\n                 else if (c < 0x800) {\r\n                     length += 2;\r\n                 }\r\n                 else if (c < 0xd800 || c >= 0xe000) {\r\n                     length += 3;\r\n                 }\r\n                 else {\r\n                     i++;\r\n                     length += 4;\r\n                 }\r\n             }\r\n             return length;\r\n         }\r\n         function utf8Write(view, offset, str) {\r\n             var c = 0;\r\n             for (var i = 0, l = str.length; i < l; i++) {\r\n                 c = str.charCodeAt(i);\r\n                 if (c < 0x80) {\r\n                     view[offset++] = c;\r\n                 }\r\n                 else if (c < 0x800) {\r\n                     view[offset++] = 0xc0 | (c >> 6);\r\n                     view[offset++] = 0x80 | (c & 0x3f);\r\n                 }\r\n                 else if (c < 0xd800 || c >= 0xe000) {\r\n                     view[offset++] = 0xe0 | (c >> 12);\r\n                     view[offset++] = 0x80 | (c >> 6 & 0x3f);\r\n                     view[offset++] = 0x80 | (c & 0x3f);\r\n                 }\r\n                 else {\r\n                     i++;\r\n                     c = 0x10000 + (((c & 0x3ff) << 10) | (str.charCodeAt(i) & 0x3ff));\r\n                     view[offset++] = 0xf0 | (c >> 18);\r\n                     view[offset++] = 0x80 | (c >> 12 & 0x3f);\r\n                     view[offset++] = 0x80 | (c >> 6 & 0x3f);\r\n                     view[offset++] = 0x80 | (c & 0x3f);\r\n                 }\r\n             }\r\n         }\r\n         function int8$1(bytes, value) {\r\n             bytes.push(value & 255);\r\n         }\r\n         function uint8$1(bytes, value) {\r\n             bytes.push(value & 255);\r\n         }\r\n         function int16$1(bytes, value) {\r\n             bytes.push(value & 255);\r\n             bytes.push((value >> 8) & 255);\r\n         }\r\n         function uint16$1(bytes, value) {\r\n             bytes.push(value & 255);\r\n             bytes.push((value >> 8) & 255);\r\n         }\r\n         function int32$1(bytes, value) {\r\n             bytes.push(value & 255);\r\n             bytes.push((value >> 8) & 255);\r\n             bytes.push((value >> 16) & 255);\r\n             bytes.push((value >> 24) & 255);\r\n         }\r\n         function uint32$1(bytes, value) {\r\n             var b4 = value >> 24;\r\n             var b3 = value >> 16;\r\n             var b2 = value >> 8;\r\n             var b1 = value;\r\n             bytes.push(b1 & 255);\r\n             bytes.push(b2 & 255);\r\n             bytes.push(b3 & 255);\r\n             bytes.push(b4 & 255);\r\n         }\r\n         function int64$1(bytes, value) {\r\n             var high = Math.floor(value / Math.pow(2, 32));\r\n             var low = value >>> 0;\r\n             uint32$1(bytes, low);\r\n             uint32$1(bytes, high);\r\n         }\r\n         function uint64$1(bytes, value) {\r\n             var high = (value / Math.pow(2, 32)) >> 0;\r\n             var low = value >>> 0;\r\n             uint32$1(bytes, low);\r\n             uint32$1(bytes, high);\r\n         }\r\n         function float32$1(bytes, value) {\r\n             writeFloat32(bytes, value);\r\n         }\r\n         function float64$1(bytes, value) {\r\n             writeFloat64(bytes, value);\r\n         }\r\n         var _int32$1 = new Int32Array(2);\r\n         var _float32$1 = new Float32Array(_int32$1.buffer);\r\n         var _float64$1 = new Float64Array(_int32$1.buffer);\r\n         function writeFloat32(bytes, value) {\r\n             _float32$1[0] = value;\r\n             int32$1(bytes, _int32$1[0]);\r\n         }\r\n         function writeFloat64(bytes, value) {\r\n             _float64$1[0] = value;\r\n             int32$1(bytes, _int32$1[0 ]);\r\n             int32$1(bytes, _int32$1[1 ]);\r\n         }\r\n         function boolean$1(bytes, value) {\r\n             return uint8$1(bytes, value ? 1 : 0);\r\n         }\r\n         function string$1(bytes, value) {\r\n             // encode `null` strings as empty.\r\n             if (!value) {\r\n                 value = \"\";\r\n             }\r\n             var length = utf8Length(value);\r\n             var size = 0;\r\n             // fixstr\r\n             if (length < 0x20) {\r\n                 bytes.push(length | 0xa0);\r\n                 size = 1;\r\n             }\r\n             // str 8\r\n             else if (length < 0x100) {\r\n                 bytes.push(0xd9);\r\n                 uint8$1(bytes, length);\r\n                 size = 2;\r\n             }\r\n             // str 16\r\n             else if (length < 0x10000) {\r\n                 bytes.push(0xda);\r\n                 uint16$1(bytes, length);\r\n                 size = 3;\r\n             }\r\n             // str 32\r\n             else if (length < 0x100000000) {\r\n                 bytes.push(0xdb);\r\n                 uint32$1(bytes, length);\r\n                 size = 5;\r\n             }\r\n             else {\r\n                 throw new Error('String too long');\r\n             }\r\n             utf8Write(bytes, bytes.length, value);\r\n             return size + length;\r\n         }\r\n         function number$1(bytes, value) {\r\n             if (isNaN(value)) {\r\n                 return number$1(bytes, 0);\r\n             }\r\n             else if (!isFinite(value)) {\r\n                 return number$1(bytes, (value > 0) ? Number.MAX_SAFE_INTEGER : -Number.MAX_SAFE_INTEGER);\r\n             }\r\n             else if (value !== (value | 0)) {\r\n                 bytes.push(0xcb);\r\n                 writeFloat64(bytes, value);\r\n                 return 9;\r\n                 // TODO: encode float 32?\r\n                 // is it possible to differentiate between float32 / float64 here?\r\n                 // // float 32\r\n                 // bytes.push(0xca);\r\n                 // writeFloat32(bytes, value);\r\n                 // return 5;\r\n             }\r\n             if (value >= 0) {\r\n                 // positive fixnum\r\n                 if (value < 0x80) {\r\n                     uint8$1(bytes, value);\r\n                     return 1;\r\n                 }\r\n                 // uint 8\r\n                 if (value < 0x100) {\r\n                     bytes.push(0xcc);\r\n                     uint8$1(bytes, value);\r\n                     return 2;\r\n                 }\r\n                 // uint 16\r\n                 if (value < 0x10000) {\r\n                     bytes.push(0xcd);\r\n                     uint16$1(bytes, value);\r\n                     return 3;\r\n                 }\r\n                 // uint 32\r\n                 if (value < 0x100000000) {\r\n                     bytes.push(0xce);\r\n                     uint32$1(bytes, value);\r\n                     return 5;\r\n                 }\r\n                 // uint 64\r\n                 bytes.push(0xcf);\r\n                 uint64$1(bytes, value);\r\n                 return 9;\r\n             }\r\n             else {\r\n                 // negative fixnum\r\n                 if (value >= -0x20) {\r\n                     bytes.push(0xe0 | (value + 0x20));\r\n                     return 1;\r\n                 }\r\n                 // int 8\r\n                 if (value >= -0x80) {\r\n                     bytes.push(0xd0);\r\n                     int8$1(bytes, value);\r\n                     return 2;\r\n                 }\r\n                 // int 16\r\n                 if (value >= -0x8000) {\r\n                     bytes.push(0xd1);\r\n                     int16$1(bytes, value);\r\n                     return 3;\r\n                 }\r\n                 // int 32\r\n                 if (value >= -0x80000000) {\r\n                     bytes.push(0xd2);\r\n                     int32$1(bytes, value);\r\n                     return 5;\r\n                 }\r\n                 // int 64\r\n                 bytes.push(0xd3);\r\n                 int64$1(bytes, value);\r\n                 return 9;\r\n             }\r\n         }\r\n\r\n         var encode = /*#__PURE__*/Object.freeze({\r\n             __proto__: null,\r\n             utf8Write: utf8Write,\r\n             int8: int8$1,\r\n             uint8: uint8$1,\r\n             int16: int16$1,\r\n             uint16: uint16$1,\r\n             int32: int32$1,\r\n             uint32: uint32$1,\r\n             int64: int64$1,\r\n             uint64: uint64$1,\r\n             float32: float32$1,\r\n             float64: float64$1,\r\n             writeFloat32: writeFloat32,\r\n             writeFloat64: writeFloat64,\r\n             boolean: boolean$1,\r\n             string: string$1,\r\n             number: number$1\r\n         });\r\n\r\n         /**\r\n          * Copyright (c) 2018 Endel Dreyer\r\n          * Copyright (c) 2014 Ion Drive Software Ltd.\r\n          *\r\n          * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n          * of this software and associated documentation files (the \"Software\"), to deal\r\n          * in the Software without restriction, including without limitation the rights\r\n          * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n          * copies of the Software, and to permit persons to whom the Software is\r\n          * furnished to do so, subject to the following conditions:\r\n          *\r\n          * The above copyright notice and this permission notice shall be included in all\r\n          * copies or substantial portions of the Software.\r\n          *\r\n          * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n          * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n          * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n          * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n          * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n          * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n          * SOFTWARE\r\n          */\r\n         function utf8Read(bytes, offset, length) {\r\n             var string = '', chr = 0;\r\n             for (var i = offset, end = offset + length; i < end; i++) {\r\n                 var byte = bytes[i];\r\n                 if ((byte & 0x80) === 0x00) {\r\n                     string += String.fromCharCode(byte);\r\n                     continue;\r\n                 }\r\n                 if ((byte & 0xe0) === 0xc0) {\r\n                     string += String.fromCharCode(((byte & 0x1f) << 6) |\r\n                         (bytes[++i] & 0x3f));\r\n                     continue;\r\n                 }\r\n                 if ((byte & 0xf0) === 0xe0) {\r\n                     string += String.fromCharCode(((byte & 0x0f) << 12) |\r\n                         ((bytes[++i] & 0x3f) << 6) |\r\n                         ((bytes[++i] & 0x3f) << 0));\r\n                     continue;\r\n                 }\r\n                 if ((byte & 0xf8) === 0xf0) {\r\n                     chr = ((byte & 0x07) << 18) |\r\n                         ((bytes[++i] & 0x3f) << 12) |\r\n                         ((bytes[++i] & 0x3f) << 6) |\r\n                         ((bytes[++i] & 0x3f) << 0);\r\n                     if (chr >= 0x010000) { // surrogate pair\r\n                         chr -= 0x010000;\r\n                         string += String.fromCharCode((chr >>> 10) + 0xD800, (chr & 0x3FF) + 0xDC00);\r\n                     }\r\n                     else {\r\n                         string += String.fromCharCode(chr);\r\n                     }\r\n                     continue;\r\n                 }\r\n                 console.error('Invalid byte ' + byte.toString(16));\r\n                 // (do not throw error to avoid server/client from crashing due to hack attemps)\r\n                 // throw new Error('Invalid byte ' + byte.toString(16));\r\n             }\r\n             return string;\r\n         }\r\n         function int8(bytes, it) {\r\n             return uint8(bytes, it) << 24 >> 24;\r\n         }\r\n         function uint8(bytes, it) {\r\n             return bytes[it.offset++];\r\n         }\r\n         function int16(bytes, it) {\r\n             return uint16(bytes, it) << 16 >> 16;\r\n         }\r\n         function uint16(bytes, it) {\r\n             return bytes[it.offset++] | bytes[it.offset++] << 8;\r\n         }\r\n         function int32(bytes, it) {\r\n             return bytes[it.offset++] | bytes[it.offset++] << 8 | bytes[it.offset++] << 16 | bytes[it.offset++] << 24;\r\n         }\r\n         function uint32(bytes, it) {\r\n             return int32(bytes, it) >>> 0;\r\n         }\r\n         function float32(bytes, it) {\r\n             return readFloat32(bytes, it);\r\n         }\r\n         function float64(bytes, it) {\r\n             return readFloat64(bytes, it);\r\n         }\r\n         function int64(bytes, it) {\r\n             var low = uint32(bytes, it);\r\n             var high = int32(bytes, it) * Math.pow(2, 32);\r\n             return high + low;\r\n         }\r\n         function uint64(bytes, it) {\r\n             var low = uint32(bytes, it);\r\n             var high = uint32(bytes, it) * Math.pow(2, 32);\r\n             return high + low;\r\n         }\r\n         var _int32 = new Int32Array(2);\r\n         var _float32 = new Float32Array(_int32.buffer);\r\n         var _float64 = new Float64Array(_int32.buffer);\r\n         function readFloat32(bytes, it) {\r\n             _int32[0] = int32(bytes, it);\r\n             return _float32[0];\r\n         }\r\n         function readFloat64(bytes, it) {\r\n             _int32[0 ] = int32(bytes, it);\r\n             _int32[1 ] = int32(bytes, it);\r\n             return _float64[0];\r\n         }\r\n         function boolean(bytes, it) {\r\n             return uint8(bytes, it) > 0;\r\n         }\r\n         function string(bytes, it) {\r\n             var prefix = bytes[it.offset++];\r\n             var length;\r\n             if (prefix < 0xc0) {\r\n                 // fixstr\r\n                 length = prefix & 0x1f;\r\n             }\r\n             else if (prefix === 0xd9) {\r\n                 length = uint8(bytes, it);\r\n             }\r\n             else if (prefix === 0xda) {\r\n                 length = uint16(bytes, it);\r\n             }\r\n             else if (prefix === 0xdb) {\r\n                 length = uint32(bytes, it);\r\n             }\r\n             var value = utf8Read(bytes, it.offset, length);\r\n             it.offset += length;\r\n             return value;\r\n         }\r\n         function stringCheck(bytes, it) {\r\n             var prefix = bytes[it.offset];\r\n             return (\r\n             // fixstr\r\n             (prefix < 0xc0 && prefix > 0xa0) ||\r\n                 // str 8\r\n                 prefix === 0xd9 ||\r\n                 // str 16\r\n                 prefix === 0xda ||\r\n                 // str 32\r\n                 prefix === 0xdb);\r\n         }\r\n         function number(bytes, it) {\r\n             var prefix = bytes[it.offset++];\r\n             if (prefix < 0x80) {\r\n                 // positive fixint\r\n                 return prefix;\r\n             }\r\n             else if (prefix === 0xca) {\r\n                 // float 32\r\n                 return readFloat32(bytes, it);\r\n             }\r\n             else if (prefix === 0xcb) {\r\n                 // float 64\r\n                 return readFloat64(bytes, it);\r\n             }\r\n             else if (prefix === 0xcc) {\r\n                 // uint 8\r\n                 return uint8(bytes, it);\r\n             }\r\n             else if (prefix === 0xcd) {\r\n                 // uint 16\r\n                 return uint16(bytes, it);\r\n             }\r\n             else if (prefix === 0xce) {\r\n                 // uint 32\r\n                 return uint32(bytes, it);\r\n             }\r\n             else if (prefix === 0xcf) {\r\n                 // uint 64\r\n                 return uint64(bytes, it);\r\n             }\r\n             else if (prefix === 0xd0) {\r\n                 // int 8\r\n                 return int8(bytes, it);\r\n             }\r\n             else if (prefix === 0xd1) {\r\n                 // int 16\r\n                 return int16(bytes, it);\r\n             }\r\n             else if (prefix === 0xd2) {\r\n                 // int 32\r\n                 return int32(bytes, it);\r\n             }\r\n             else if (prefix === 0xd3) {\r\n                 // int 64\r\n                 return int64(bytes, it);\r\n             }\r\n             else if (prefix > 0xdf) {\r\n                 // negative fixint\r\n                 return (0xff - prefix + 1) * -1;\r\n             }\r\n         }\r\n         function numberCheck(bytes, it) {\r\n             var prefix = bytes[it.offset];\r\n             // positive fixint - 0x00 - 0x7f\r\n             // float 32        - 0xca\r\n             // float 64        - 0xcb\r\n             // uint 8          - 0xcc\r\n             // uint 16         - 0xcd\r\n             // uint 32         - 0xce\r\n             // uint 64         - 0xcf\r\n             // int 8           - 0xd0\r\n             // int 16          - 0xd1\r\n             // int 32          - 0xd2\r\n             // int 64          - 0xd3\r\n             return (prefix < 0x80 ||\r\n                 (prefix >= 0xca && prefix <= 0xd3));\r\n         }\r\n         function arrayCheck(bytes, it) {\r\n             return bytes[it.offset] < 0xa0;\r\n             // const prefix = bytes[it.offset] ;\r\n             // if (prefix < 0xa0) {\r\n             //   return prefix;\r\n             // // array\r\n             // } else if (prefix === 0xdc) {\r\n             //   it.offset += 2;\r\n             // } else if (0xdd) {\r\n             //   it.offset += 4;\r\n             // }\r\n             // return prefix;\r\n         }\r\n         function switchStructureCheck(bytes, it) {\r\n             return (\r\n             // previous byte should be `SWITCH_TO_STRUCTURE`\r\n             bytes[it.offset - 1] === SWITCH_TO_STRUCTURE &&\r\n                 // next byte should be a number\r\n                 (bytes[it.offset] < 0x80 || (bytes[it.offset] >= 0xca && bytes[it.offset] <= 0xd3)));\r\n         }\r\n\r\n         var decode = /*#__PURE__*/Object.freeze({\r\n             __proto__: null,\r\n             int8: int8,\r\n             uint8: uint8,\r\n             int16: int16,\r\n             uint16: uint16,\r\n             int32: int32,\r\n             uint32: uint32,\r\n             float32: float32,\r\n             float64: float64,\r\n             int64: int64,\r\n             uint64: uint64,\r\n             readFloat32: readFloat32,\r\n             readFloat64: readFloat64,\r\n             boolean: boolean,\r\n             string: string,\r\n             stringCheck: stringCheck,\r\n             number: number,\r\n             numberCheck: numberCheck,\r\n             arrayCheck: arrayCheck,\r\n             switchStructureCheck: switchStructureCheck\r\n         });\r\n\r\n         var CollectionSchema = /** @class */ (function () {\r\n             function CollectionSchema(initialValues) {\r\n                 var _this = this;\r\n                 this.$changes = new ChangeTree(this);\r\n                 this.$items = new Map();\r\n                 this.$indexes = new Map();\r\n                 this.$refId = 0;\r\n                 if (initialValues) {\r\n                     initialValues.forEach(function (v) { return _this.add(v); });\r\n                 }\r\n             }\r\n             CollectionSchema.prototype.onAdd = function (callback, triggerAll) {\r\n                 if (triggerAll === void 0) { triggerAll = true; }\r\n                 return addCallback((this.$callbacks || (this.$callbacks = [])), exports.OPERATION.ADD, callback, (triggerAll)\r\n                     ? this.$items\r\n                     : undefined);\r\n             };\r\n             CollectionSchema.prototype.onRemove = function (callback) { return addCallback(this.$callbacks || (this.$callbacks = []), exports.OPERATION.DELETE, callback); };\r\n             CollectionSchema.prototype.onChange = function (callback) { return addCallback(this.$callbacks || (this.$callbacks = []), exports.OPERATION.REPLACE, callback); };\r\n             CollectionSchema.is = function (type) {\r\n                 return type['collection'] !== undefined;\r\n             };\r\n             CollectionSchema.prototype.add = function (value) {\r\n                 // set \"index\" for reference.\r\n                 var index = this.$refId++;\r\n                 var isRef = (value['$changes']) !== undefined;\r\n                 if (isRef) {\r\n                     value['$changes'].setParent(this, this.$changes.root, index);\r\n                 }\r\n                 this.$changes.indexes[index] = index;\r\n                 this.$indexes.set(index, index);\r\n                 this.$items.set(index, value);\r\n                 this.$changes.change(index);\r\n                 return index;\r\n             };\r\n             CollectionSchema.prototype.at = function (index) {\r\n                 var key = Array.from(this.$items.keys())[index];\r\n                 return this.$items.get(key);\r\n             };\r\n             CollectionSchema.prototype.entries = function () {\r\n                 return this.$items.entries();\r\n             };\r\n             CollectionSchema.prototype.delete = function (item) {\r\n                 var entries = this.$items.entries();\r\n                 var index;\r\n                 var entry;\r\n                 while (entry = entries.next()) {\r\n                     if (entry.done) {\r\n                         break;\r\n                     }\r\n                     if (item === entry.value[1]) {\r\n                         index = entry.value[0];\r\n                         break;\r\n                     }\r\n                 }\r\n                 if (index === undefined) {\r\n                     return false;\r\n                 }\r\n                 this.$changes.delete(index);\r\n                 this.$indexes.delete(index);\r\n                 return this.$items.delete(index);\r\n             };\r\n             CollectionSchema.prototype.clear = function (changes) {\r\n                 // discard previous operations.\r\n                 this.$changes.discard(true, true);\r\n                 this.$changes.indexes = {};\r\n                 // clear previous indexes\r\n                 this.$indexes.clear();\r\n                 //\r\n                 // When decoding:\r\n                 // - enqueue items for DELETE callback.\r\n                 // - flag child items for garbage collection.\r\n                 //\r\n                 if (changes) {\r\n                     removeChildRefs.call(this, changes);\r\n                 }\r\n                 // clear items\r\n                 this.$items.clear();\r\n                 this.$changes.operation({ index: 0, op: exports.OPERATION.CLEAR });\r\n                 // touch all structures until reach root\r\n                 this.$changes.touchParents();\r\n             };\r\n             CollectionSchema.prototype.has = function (value) {\r\n                 return Array.from(this.$items.values()).some(function (v) { return v === value; });\r\n             };\r\n             CollectionSchema.prototype.forEach = function (callbackfn) {\r\n                 var _this = this;\r\n                 this.$items.forEach(function (value, key, _) { return callbackfn(value, key, _this); });\r\n             };\r\n             CollectionSchema.prototype.values = function () {\r\n                 return this.$items.values();\r\n             };\r\n             Object.defineProperty(CollectionSchema.prototype, \"size\", {\r\n                 get: function () {\r\n                     return this.$items.size;\r\n                 },\r\n                 enumerable: false,\r\n                 configurable: true\r\n             });\r\n             CollectionSchema.prototype.setIndex = function (index, key) {\r\n                 this.$indexes.set(index, key);\r\n             };\r\n             CollectionSchema.prototype.getIndex = function (index) {\r\n                 return this.$indexes.get(index);\r\n             };\r\n             CollectionSchema.prototype.getByIndex = function (index) {\r\n                 return this.$items.get(this.$indexes.get(index));\r\n             };\r\n             CollectionSchema.prototype.deleteByIndex = function (index) {\r\n                 var key = this.$indexes.get(index);\r\n                 this.$items.delete(key);\r\n                 this.$indexes.delete(index);\r\n             };\r\n             CollectionSchema.prototype.toArray = function () {\r\n                 return Array.from(this.$items.values());\r\n             };\r\n             CollectionSchema.prototype.toJSON = function () {\r\n                 var values = [];\r\n                 this.forEach(function (value, key) {\r\n                     values.push((typeof (value['toJSON']) === \"function\")\r\n                         ? value['toJSON']()\r\n                         : value);\r\n                 });\r\n                 return values;\r\n             };\r\n             //\r\n             // Decoding utilities\r\n             //\r\n             CollectionSchema.prototype.clone = function (isDecoding) {\r\n                 var cloned;\r\n                 if (isDecoding) {\r\n                     // client-side\r\n                     cloned = Object.assign(new CollectionSchema(), this);\r\n                 }\r\n                 else {\r\n                     // server-side\r\n                     cloned = new CollectionSchema();\r\n                     this.forEach(function (value) {\r\n                         if (value['$changes']) {\r\n                             cloned.add(value['clone']());\r\n                         }\r\n                         else {\r\n                             cloned.add(value);\r\n                         }\r\n                     });\r\n                 }\r\n                 return cloned;\r\n             };\r\n             return CollectionSchema;\r\n         }());\r\n\r\n         var SetSchema = /** @class */ (function () {\r\n             function SetSchema(initialValues) {\r\n                 var _this = this;\r\n                 this.$changes = new ChangeTree(this);\r\n                 this.$items = new Map();\r\n                 this.$indexes = new Map();\r\n                 this.$refId = 0;\r\n                 if (initialValues) {\r\n                     initialValues.forEach(function (v) { return _this.add(v); });\r\n                 }\r\n             }\r\n             SetSchema.prototype.onAdd = function (callback, triggerAll) {\r\n                 if (triggerAll === void 0) { triggerAll = true; }\r\n                 return addCallback((this.$callbacks || (this.$callbacks = [])), exports.OPERATION.ADD, callback, (triggerAll)\r\n                     ? this.$items\r\n                     : undefined);\r\n             };\r\n             SetSchema.prototype.onRemove = function (callback) { return addCallback(this.$callbacks || (this.$callbacks = []), exports.OPERATION.DELETE, callback); };\r\n             SetSchema.prototype.onChange = function (callback) { return addCallback(this.$callbacks || (this.$callbacks = []), exports.OPERATION.REPLACE, callback); };\r\n             SetSchema.is = function (type) {\r\n                 return type['set'] !== undefined;\r\n             };\r\n             SetSchema.prototype.add = function (value) {\r\n                 var _a, _b;\r\n                 // immediatelly return false if value already added.\r\n                 if (this.has(value)) {\r\n                     return false;\r\n                 }\r\n                 // set \"index\" for reference.\r\n                 var index = this.$refId++;\r\n                 if ((value['$changes']) !== undefined) {\r\n                     value['$changes'].setParent(this, this.$changes.root, index);\r\n                 }\r\n                 var operation = (_b = (_a = this.$changes.indexes[index]) === null || _a === void 0 ? void 0 : _a.op) !== null && _b !== void 0 ? _b : exports.OPERATION.ADD;\r\n                 this.$changes.indexes[index] = index;\r\n                 this.$indexes.set(index, index);\r\n                 this.$items.set(index, value);\r\n                 this.$changes.change(index, operation);\r\n                 return index;\r\n             };\r\n             SetSchema.prototype.entries = function () {\r\n                 return this.$items.entries();\r\n             };\r\n             SetSchema.prototype.delete = function (item) {\r\n                 var entries = this.$items.entries();\r\n                 var index;\r\n                 var entry;\r\n                 while (entry = entries.next()) {\r\n                     if (entry.done) {\r\n                         break;\r\n                     }\r\n                     if (item === entry.value[1]) {\r\n                         index = entry.value[0];\r\n                         break;\r\n                     }\r\n                 }\r\n                 if (index === undefined) {\r\n                     return false;\r\n                 }\r\n                 this.$changes.delete(index);\r\n                 this.$indexes.delete(index);\r\n                 return this.$items.delete(index);\r\n             };\r\n             SetSchema.prototype.clear = function (changes) {\r\n                 // discard previous operations.\r\n                 this.$changes.discard(true, true);\r\n                 this.$changes.indexes = {};\r\n                 // clear previous indexes\r\n                 this.$indexes.clear();\r\n                 //\r\n                 // When decoding:\r\n                 // - enqueue items for DELETE callback.\r\n                 // - flag child items for garbage collection.\r\n                 //\r\n                 if (changes) {\r\n                     removeChildRefs.call(this, changes);\r\n                 }\r\n                 // clear items\r\n                 this.$items.clear();\r\n                 this.$changes.operation({ index: 0, op: exports.OPERATION.CLEAR });\r\n                 // touch all structures until reach root\r\n                 this.$changes.touchParents();\r\n             };\r\n             SetSchema.prototype.has = function (value) {\r\n                 var values = this.$items.values();\r\n                 var has = false;\r\n                 var entry;\r\n                 while (entry = values.next()) {\r\n                     if (entry.done) {\r\n                         break;\r\n                     }\r\n                     if (value === entry.value) {\r\n                         has = true;\r\n                         break;\r\n                     }\r\n                 }\r\n                 return has;\r\n             };\r\n             SetSchema.prototype.forEach = function (callbackfn) {\r\n                 var _this = this;\r\n                 this.$items.forEach(function (value, key, _) { return callbackfn(value, key, _this); });\r\n             };\r\n             SetSchema.prototype.values = function () {\r\n                 return this.$items.values();\r\n             };\r\n             Object.defineProperty(SetSchema.prototype, \"size\", {\r\n                 get: function () {\r\n                     return this.$items.size;\r\n                 },\r\n                 enumerable: false,\r\n                 configurable: true\r\n             });\r\n             SetSchema.prototype.setIndex = function (index, key) {\r\n                 this.$indexes.set(index, key);\r\n             };\r\n             SetSchema.prototype.getIndex = function (index) {\r\n                 return this.$indexes.get(index);\r\n             };\r\n             SetSchema.prototype.getByIndex = function (index) {\r\n                 return this.$items.get(this.$indexes.get(index));\r\n             };\r\n             SetSchema.prototype.deleteByIndex = function (index) {\r\n                 var key = this.$indexes.get(index);\r\n                 this.$items.delete(key);\r\n                 this.$indexes.delete(index);\r\n             };\r\n             SetSchema.prototype.toArray = function () {\r\n                 return Array.from(this.$items.values());\r\n             };\r\n             SetSchema.prototype.toJSON = function () {\r\n                 var values = [];\r\n                 this.forEach(function (value, key) {\r\n                     values.push((typeof (value['toJSON']) === \"function\")\r\n                         ? value['toJSON']()\r\n                         : value);\r\n                 });\r\n                 return values;\r\n             };\r\n             //\r\n             // Decoding utilities\r\n             //\r\n             SetSchema.prototype.clone = function (isDecoding) {\r\n                 var cloned;\r\n                 if (isDecoding) {\r\n                     // client-side\r\n                     cloned = Object.assign(new SetSchema(), this);\r\n                 }\r\n                 else {\r\n                     // server-side\r\n                     cloned = new SetSchema();\r\n                     this.forEach(function (value) {\r\n                         if (value['$changes']) {\r\n                             cloned.add(value['clone']());\r\n                         }\r\n                         else {\r\n                             cloned.add(value);\r\n                         }\r\n                     });\r\n                 }\r\n                 return cloned;\r\n             };\r\n             return SetSchema;\r\n         }());\r\n\r\n         var ClientState = /** @class */ (function () {\r\n             function ClientState() {\r\n                 this.refIds = new WeakSet();\r\n                 this.containerIndexes = new WeakMap();\r\n             }\r\n             // containerIndexes = new Map<ChangeTree, Set<number>>();\r\n             ClientState.prototype.addRefId = function (changeTree) {\r\n                 if (!this.refIds.has(changeTree)) {\r\n                     this.refIds.add(changeTree);\r\n                     this.containerIndexes.set(changeTree, new Set());\r\n                 }\r\n             };\r\n             ClientState.get = function (client) {\r\n                 if (client.$filterState === undefined) {\r\n                     client.$filterState = new ClientState();\r\n                 }\r\n                 return client.$filterState;\r\n             };\r\n             return ClientState;\r\n         }());\r\n\r\n         var ReferenceTracker = /** @class */ (function () {\r\n             function ReferenceTracker() {\r\n                 //\r\n                 // Relation of refId => Schema structure\r\n                 // For direct access of structures during decoding time.\r\n                 //\r\n                 this.refs = new Map();\r\n                 this.refCounts = {};\r\n                 this.deletedRefs = new Set();\r\n                 this.nextUniqueId = 0;\r\n             }\r\n             ReferenceTracker.prototype.getNextUniqueId = function () {\r\n                 return this.nextUniqueId++;\r\n             };\r\n             // for decoding\r\n             ReferenceTracker.prototype.addRef = function (refId, ref, incrementCount) {\r\n                 if (incrementCount === void 0) { incrementCount = true; }\r\n                 this.refs.set(refId, ref);\r\n                 if (incrementCount) {\r\n                     this.refCounts[refId] = (this.refCounts[refId] || 0) + 1;\r\n                 }\r\n             };\r\n             // for decoding\r\n             ReferenceTracker.prototype.removeRef = function (refId) {\r\n                 this.refCounts[refId] = this.refCounts[refId] - 1;\r\n                 this.deletedRefs.add(refId);\r\n             };\r\n             ReferenceTracker.prototype.clearRefs = function () {\r\n                 this.refs.clear();\r\n                 this.deletedRefs.clear();\r\n                 this.refCounts = {};\r\n             };\r\n             // for decoding\r\n             ReferenceTracker.prototype.garbageCollectDeletedRefs = function () {\r\n                 var _this = this;\r\n                 this.deletedRefs.forEach(function (refId) {\r\n                     //\r\n                     // Skip active references.\r\n                     //\r\n                     if (_this.refCounts[refId] > 0) {\r\n                         return;\r\n                     }\r\n                     var ref = _this.refs.get(refId);\r\n                     //\r\n                     // Ensure child schema instances have their references removed as well.\r\n                     //\r\n                     if (ref instanceof Schema) {\r\n                         for (var fieldName in ref['_definition'].schema) {\r\n                             if (typeof (ref['_definition'].schema[fieldName]) !== \"string\" &&\r\n                                 ref[fieldName] &&\r\n                                 ref[fieldName]['$changes']) {\r\n                                 _this.removeRef(ref[fieldName]['$changes'].refId);\r\n                             }\r\n                         }\r\n                     }\r\n                     else {\r\n                         var definition = ref['$changes'].parent._definition;\r\n                         var type = definition.schema[definition.fieldsByIndex[ref['$changes'].parentIndex]];\r\n                         if (typeof (Object.values(type)[0]) === \"function\") {\r\n                             Array.from(ref.values())\r\n                                 .forEach(function (child) { return _this.removeRef(child['$changes'].refId); });\r\n                         }\r\n                     }\r\n                     _this.refs.delete(refId);\r\n                     delete _this.refCounts[refId];\r\n                 });\r\n                 // clear deleted refs.\r\n                 this.deletedRefs.clear();\r\n             };\r\n             return ReferenceTracker;\r\n         }());\r\n\r\n         var EncodeSchemaError = /** @class */ (function (_super) {\r\n             __extends(EncodeSchemaError, _super);\r\n             function EncodeSchemaError() {\r\n                 return _super !== null && _super.apply(this, arguments) || this;\r\n             }\r\n             return EncodeSchemaError;\r\n         }(Error));\r\n         function assertType(value, type, klass, field) {\r\n             var typeofTarget;\r\n             var allowNull = false;\r\n             switch (type) {\r\n                 case \"number\":\r\n                 case \"int8\":\r\n                 case \"uint8\":\r\n                 case \"int16\":\r\n                 case \"uint16\":\r\n                 case \"int32\":\r\n                 case \"uint32\":\r\n                 case \"int64\":\r\n                 case \"uint64\":\r\n                 case \"float32\":\r\n                 case \"float64\":\r\n                     typeofTarget = \"number\";\r\n                     if (isNaN(value)) {\r\n                         console.log(\"trying to encode \\\"NaN\\\" in \".concat(klass.constructor.name, \"#\").concat(field));\r\n                     }\r\n                     break;\r\n                 case \"string\":\r\n                     typeofTarget = \"string\";\r\n                     allowNull = true;\r\n                     break;\r\n                 case \"boolean\":\r\n                     // boolean is always encoded as true/false based on truthiness\r\n                     return;\r\n             }\r\n             if (typeof (value) !== typeofTarget && (!allowNull || (allowNull && value !== null))) {\r\n                 var foundValue = \"'\".concat(JSON.stringify(value), \"'\").concat((value && value.constructor && \" (\".concat(value.constructor.name, \")\")) || '');\r\n                 throw new EncodeSchemaError(\"a '\".concat(typeofTarget, \"' was expected, but \").concat(foundValue, \" was provided in \").concat(klass.constructor.name, \"#\").concat(field));\r\n             }\r\n         }\r\n         function assertInstanceType(value, type, klass, field) {\r\n             if (!(value instanceof type)) {\r\n                 throw new EncodeSchemaError(\"a '\".concat(type.name, \"' was expected, but '\").concat(value.constructor.name, \"' was provided in \").concat(klass.constructor.name, \"#\").concat(field));\r\n             }\r\n         }\r\n         function encodePrimitiveType(type, bytes, value, klass, field) {\r\n             assertType(value, type, klass, field);\r\n             var encodeFunc = encode[type];\r\n             if (encodeFunc) {\r\n                 encodeFunc(bytes, value);\r\n             }\r\n             else {\r\n                 throw new EncodeSchemaError(\"a '\".concat(type, \"' was expected, but \").concat(value, \" was provided in \").concat(klass.constructor.name, \"#\").concat(field));\r\n             }\r\n         }\r\n         function decodePrimitiveType(type, bytes, it) {\r\n             return decode[type](bytes, it);\r\n         }\r\n         /**\r\n          * Schema encoder / decoder\r\n          */\r\n         var Schema = /** @class */ (function () {\r\n             // allow inherited classes to have a constructor\r\n             function Schema() {\r\n                 var args = [];\r\n                 for (var _i = 0; _i < arguments.length; _i++) {\r\n                     args[_i] = arguments[_i];\r\n                 }\r\n                 // fix enumerability of fields for end-user\r\n                 Object.defineProperties(this, {\r\n                     $changes: {\r\n                         value: new ChangeTree(this, undefined, new ReferenceTracker()),\r\n                         enumerable: false,\r\n                         writable: true\r\n                     },\r\n                     // $listeners: {\r\n                     //     value: undefined,\r\n                     //     enumerable: false,\r\n                     //     writable: true\r\n                     // },\r\n                     $callbacks: {\r\n                         value: undefined,\r\n                         enumerable: false,\r\n                         writable: true\r\n                     },\r\n                 });\r\n                 var descriptors = this._definition.descriptors;\r\n                 if (descriptors) {\r\n                     Object.defineProperties(this, descriptors);\r\n                 }\r\n                 //\r\n                 // Assign initial values\r\n                 //\r\n                 if (args[0]) {\r\n                     this.assign(args[0]);\r\n                 }\r\n             }\r\n             Schema.onError = function (e) {\r\n                 console.error(e);\r\n             };\r\n             Schema.is = function (type) {\r\n                 return (type['_definition'] &&\r\n                     type['_definition'].schema !== undefined);\r\n             };\r\n             Schema.prototype.onChange = function (callback) {\r\n                 return addCallback((this.$callbacks || (this.$callbacks = [])), exports.OPERATION.REPLACE, callback);\r\n             };\r\n             Schema.prototype.onRemove = function (callback) {\r\n                 return addCallback((this.$callbacks || (this.$callbacks = [])), exports.OPERATION.DELETE, callback);\r\n             };\r\n             Schema.prototype.assign = function (props) {\r\n                 Object.assign(this, props);\r\n                 return this;\r\n             };\r\n             Object.defineProperty(Schema.prototype, \"_definition\", {\r\n                 get: function () { return this.constructor._definition; },\r\n                 enumerable: false,\r\n                 configurable: true\r\n             });\r\n             /**\r\n              * (Server-side): Flag a property to be encoded for the next patch.\r\n              * @param instance Schema instance\r\n              * @param property string representing the property name, or number representing the index of the property.\r\n              * @param operation OPERATION to perform (detected automatically)\r\n              */\r\n             Schema.prototype.setDirty = function (property, operation) {\r\n                 this.$changes.change(property, operation);\r\n             };\r\n             /**\r\n              * Client-side: listen for changes on property.\r\n              * @param prop the property name\r\n              * @param callback callback to be triggered on property change\r\n              * @param immediate trigger immediatelly if property has been already set.\r\n              */\r\n             Schema.prototype.listen = function (prop, callback, immediate) {\r\n                 var _this = this;\r\n                 if (immediate === void 0) { immediate = true; }\r\n                 if (!this.$callbacks) {\r\n                     this.$callbacks = {};\r\n                 }\r\n                 if (!this.$callbacks[prop]) {\r\n                     this.$callbacks[prop] = [];\r\n                 }\r\n                 this.$callbacks[prop].push(callback);\r\n                 if (immediate && this[prop] !== undefined) {\r\n                     callback(this[prop], undefined);\r\n                 }\r\n                 // return un-register callback.\r\n                 return function () { return spliceOne(_this.$callbacks[prop], _this.$callbacks[prop].indexOf(callback)); };\r\n             };\r\n             Schema.prototype.decode = function (bytes, it, ref) {\r\n                 var _a;\r\n                 if (it === void 0) { it = { offset: 0 }; }\r\n                 if (ref === void 0) { ref = this; }\r\n                 var allChanges = [];\r\n                 var $root = this.$changes.root;\r\n                 var totalBytes = bytes.length;\r\n                 var refId = 0;\r\n                 $root.refs.set(refId, this);\r\n                 while (it.offset < totalBytes) {\r\n                     var byte = bytes[it.offset++];\r\n                     if (byte == SWITCH_TO_STRUCTURE) {\r\n                         refId = number(bytes, it);\r\n                         var nextRef = $root.refs.get(refId);\r\n                         //\r\n                         // Trying to access a reference that haven't been decoded yet.\r\n                         //\r\n                         if (!nextRef) {\r\n                             throw new Error(\"\\\"refId\\\" not found: \".concat(refId));\r\n                         }\r\n                         ref = nextRef;\r\n                         continue;\r\n                     }\r\n                     var changeTree = ref['$changes'];\r\n                     var isSchema = (ref['_definition'] !== undefined);\r\n                     var operation = (isSchema)\r\n                         ? (byte >> 6) << 6 // \"compressed\" index + operation\r\n                         : byte; // \"uncompressed\" index + operation (array/map items)\r\n                     if (operation === exports.OPERATION.CLEAR) {\r\n                         //\r\n                         // TODO: refactor me!\r\n                         // The `.clear()` method is calling `$root.removeRef(refId)` for\r\n                         // each item inside this collection\r\n                         //\r\n                         ref.clear(allChanges);\r\n                         continue;\r\n                     }\r\n                     var fieldIndex = (isSchema)\r\n                         ? byte % (operation || 255) // if \"REPLACE\" operation (0), use 255\r\n                         : number(bytes, it);\r\n                     var fieldName = (isSchema)\r\n                         ? (ref['_definition'].fieldsByIndex[fieldIndex])\r\n                         : \"\";\r\n                     var type = changeTree.getType(fieldIndex);\r\n                     var value = void 0;\r\n                     var previousValue = void 0;\r\n                     var dynamicIndex = void 0;\r\n                     if (!isSchema) {\r\n                         previousValue = ref['getByIndex'](fieldIndex);\r\n                         if ((operation & exports.OPERATION.ADD) === exports.OPERATION.ADD) { // ADD or DELETE_AND_ADD\r\n                             dynamicIndex = (ref instanceof MapSchema)\r\n                                 ? string(bytes, it)\r\n                                 : fieldIndex;\r\n                             ref['setIndex'](fieldIndex, dynamicIndex);\r\n                         }\r\n                         else {\r\n                             // here\r\n                             dynamicIndex = ref['getIndex'](fieldIndex);\r\n                         }\r\n                     }\r\n                     else {\r\n                         previousValue = ref[\"_\".concat(fieldName)];\r\n                     }\r\n                     //\r\n                     // Delete operations\r\n                     //\r\n                     if ((operation & exports.OPERATION.DELETE) === exports.OPERATION.DELETE) {\r\n                         if (operation !== exports.OPERATION.DELETE_AND_ADD) {\r\n                             ref['deleteByIndex'](fieldIndex);\r\n                         }\r\n                         // Flag `refId` for garbage collection.\r\n                         if (previousValue && previousValue['$changes']) {\r\n                             $root.removeRef(previousValue['$changes'].refId);\r\n                         }\r\n                         value = null;\r\n                     }\r\n                     if (fieldName === undefined) {\r\n                         console.warn(\"@colyseus/schema: definition mismatch\");\r\n                         //\r\n                         // keep skipping next bytes until reaches a known structure\r\n                         // by local decoder.\r\n                         //\r\n                         var nextIterator = { offset: it.offset };\r\n                         while (it.offset < totalBytes) {\r\n                             if (switchStructureCheck(bytes, it)) {\r\n                                 nextIterator.offset = it.offset + 1;\r\n                                 if ($root.refs.has(number(bytes, nextIterator))) {\r\n                                     break;\r\n                                 }\r\n                             }\r\n                             it.offset++;\r\n                         }\r\n                         continue;\r\n                     }\r\n                     else if (operation === exports.OPERATION.DELETE) ;\r\n                     else if (Schema.is(type)) {\r\n                         var refId_1 = number(bytes, it);\r\n                         value = $root.refs.get(refId_1);\r\n                         if (operation !== exports.OPERATION.REPLACE) {\r\n                             var childType = this.getSchemaType(bytes, it, type);\r\n                             if (!value) {\r\n                                 value = this.createTypeInstance(childType);\r\n                                 value.$changes.refId = refId_1;\r\n                                 if (previousValue) {\r\n                                     value.$callbacks = previousValue.$callbacks;\r\n                                     // value.$listeners = previousValue.$listeners;\r\n                                     if (previousValue['$changes'].refId &&\r\n                                         refId_1 !== previousValue['$changes'].refId) {\r\n                                         $root.removeRef(previousValue['$changes'].refId);\r\n                                     }\r\n                                 }\r\n                             }\r\n                             $root.addRef(refId_1, value, (value !== previousValue));\r\n                         }\r\n                     }\r\n                     else if (typeof (type) === \"string\") {\r\n                         //\r\n                         // primitive value (number, string, boolean, etc)\r\n                         //\r\n                         value = decodePrimitiveType(type, bytes, it);\r\n                     }\r\n                     else {\r\n                         var typeDef = getType(Object.keys(type)[0]);\r\n                         var refId_2 = number(bytes, it);\r\n                         var valueRef = ($root.refs.has(refId_2))\r\n                             ? previousValue || $root.refs.get(refId_2)\r\n                             : new typeDef.constructor();\r\n                         value = valueRef.clone(true);\r\n                         value.$changes.refId = refId_2;\r\n                         // preserve schema callbacks\r\n                         if (previousValue) {\r\n                             value['$callbacks'] = previousValue['$callbacks'];\r\n                             if (previousValue['$changes'].refId &&\r\n                                 refId_2 !== previousValue['$changes'].refId) {\r\n                                 $root.removeRef(previousValue['$changes'].refId);\r\n                                 //\r\n                                 // Trigger onRemove if structure has been replaced.\r\n                                 //\r\n                                 var entries = previousValue.entries();\r\n                                 var iter = void 0;\r\n                                 while ((iter = entries.next()) && !iter.done) {\r\n                                     var key = (_a = iter.value, _a[0]), value_1 = _a[1];\r\n                                     allChanges.push({\r\n                                         refId: refId_2,\r\n                                         op: exports.OPERATION.DELETE,\r\n                                         field: key,\r\n                                         value: undefined,\r\n                                         previousValue: value_1,\r\n                                     });\r\n                                 }\r\n                             }\r\n                         }\r\n                         $root.addRef(refId_2, value, (valueRef !== previousValue));\r\n                     }\r\n                     if (value !== null &&\r\n                         value !== undefined) {\r\n                         if (value['$changes']) {\r\n                             value['$changes'].setParent(changeTree.ref, changeTree.root, fieldIndex);\r\n                         }\r\n                         if (ref instanceof Schema) {\r\n                             ref[fieldName] = value;\r\n                             // ref[`_${fieldName}`] = value;\r\n                         }\r\n                         else if (ref instanceof MapSchema) {\r\n                             // const key = ref['$indexes'].get(field);\r\n                             var key = dynamicIndex;\r\n                             // ref.set(key, value);\r\n                             ref['$items'].set(key, value);\r\n                             ref['$changes'].allChanges.add(fieldIndex);\r\n                         }\r\n                         else if (ref instanceof ArraySchema) {\r\n                             // const key = ref['$indexes'][field];\r\n                             // console.log(\"SETTING FOR ArraySchema =>\", { field, key, value });\r\n                             // ref[key] = value;\r\n                             ref.setAt(fieldIndex, value);\r\n                         }\r\n                         else if (ref instanceof CollectionSchema) {\r\n                             var index = ref.add(value);\r\n                             ref['setIndex'](fieldIndex, index);\r\n                         }\r\n                         else if (ref instanceof SetSchema) {\r\n                             var index = ref.add(value);\r\n                             if (index !== false) {\r\n                                 ref['setIndex'](fieldIndex, index);\r\n                             }\r\n                         }\r\n                     }\r\n                     if (previousValue !== value) {\r\n                         allChanges.push({\r\n                             refId: refId,\r\n                             op: operation,\r\n                             field: fieldName,\r\n                             dynamicIndex: dynamicIndex,\r\n                             value: value,\r\n                             previousValue: previousValue,\r\n                         });\r\n                     }\r\n                 }\r\n                 this._triggerChanges(allChanges);\r\n                 // drop references of unused schemas\r\n                 $root.garbageCollectDeletedRefs();\r\n                 return allChanges;\r\n             };\r\n             Schema.prototype.encode = function (encodeAll, bytes, useFilters) {\r\n                 if (encodeAll === void 0) { encodeAll = false; }\r\n                 if (bytes === void 0) { bytes = []; }\r\n                 if (useFilters === void 0) { useFilters = false; }\r\n                 var rootChangeTree = this.$changes;\r\n                 var refIdsVisited = new WeakSet();\r\n                 var changeTrees = [rootChangeTree];\r\n                 var numChangeTrees = 1;\r\n                 for (var i = 0; i < numChangeTrees; i++) {\r\n                     var changeTree = changeTrees[i];\r\n                     var ref = changeTree.ref;\r\n                     var isSchema = (ref instanceof Schema);\r\n                     // Generate unique refId for the ChangeTree.\r\n                     changeTree.ensureRefId();\r\n                     // mark this ChangeTree as visited.\r\n                     refIdsVisited.add(changeTree);\r\n                     // root `refId` is skipped.\r\n                     if (changeTree !== rootChangeTree &&\r\n                         (changeTree.changed || encodeAll)) {\r\n                         uint8$1(bytes, SWITCH_TO_STRUCTURE);\r\n                         number$1(bytes, changeTree.refId);\r\n                     }\r\n                     var changes = (encodeAll)\r\n                         ? Array.from(changeTree.allChanges)\r\n                         : Array.from(changeTree.changes.values());\r\n                     for (var j = 0, cl = changes.length; j < cl; j++) {\r\n                         var operation = (encodeAll)\r\n                             ? { op: exports.OPERATION.ADD, index: changes[j] }\r\n                             : changes[j];\r\n                         var fieldIndex = operation.index;\r\n                         var field = (isSchema)\r\n                             ? ref['_definition'].fieldsByIndex && ref['_definition'].fieldsByIndex[fieldIndex]\r\n                             : fieldIndex;\r\n                         // cache begin index if `useFilters`\r\n                         var beginIndex = bytes.length;\r\n                         // encode field index + operation\r\n                         if (operation.op !== exports.OPERATION.TOUCH) {\r\n                             if (isSchema) {\r\n                                 //\r\n                                 // Compress `fieldIndex` + `operation` into a single byte.\r\n                                 // This adds a limitaion of 64 fields per Schema structure\r\n                                 //\r\n                                 uint8$1(bytes, (fieldIndex | operation.op));\r\n                             }\r\n                             else {\r\n                                 uint8$1(bytes, operation.op);\r\n                                 // custom operations\r\n                                 if (operation.op === exports.OPERATION.CLEAR) {\r\n                                     continue;\r\n                                 }\r\n                                 // indexed operations\r\n                                 number$1(bytes, fieldIndex);\r\n                             }\r\n                         }\r\n                         //\r\n                         // encode \"alias\" for dynamic fields (maps)\r\n                         //\r\n                         if (!isSchema &&\r\n                             (operation.op & exports.OPERATION.ADD) == exports.OPERATION.ADD // ADD or DELETE_AND_ADD\r\n                         ) {\r\n                             if (ref instanceof MapSchema) {\r\n                                 //\r\n                                 // MapSchema dynamic key\r\n                                 //\r\n                                 var dynamicIndex = changeTree.ref['$indexes'].get(fieldIndex);\r\n                                 string$1(bytes, dynamicIndex);\r\n                             }\r\n                         }\r\n                         if (operation.op === exports.OPERATION.DELETE) {\r\n                             //\r\n                             // TODO: delete from filter cache data.\r\n                             //\r\n                             // if (useFilters) {\r\n                             //     delete changeTree.caches[fieldIndex];\r\n                             // }\r\n                             continue;\r\n                         }\r\n                         // const type = changeTree.childType || ref._schema[field];\r\n                         var type = changeTree.getType(fieldIndex);\r\n                         // const type = changeTree.getType(fieldIndex);\r\n                         var value = changeTree.getValue(fieldIndex);\r\n                         // Enqueue ChangeTree to be visited\r\n                         if (value &&\r\n                             value['$changes'] &&\r\n                             !refIdsVisited.has(value['$changes'])) {\r\n                             changeTrees.push(value['$changes']);\r\n                             value['$changes'].ensureRefId();\r\n                             numChangeTrees++;\r\n                         }\r\n                         if (operation.op === exports.OPERATION.TOUCH) {\r\n                             continue;\r\n                         }\r\n                         if (Schema.is(type)) {\r\n                             assertInstanceType(value, type, ref, field);\r\n                             //\r\n                             // Encode refId for this instance.\r\n                             // The actual instance is going to be encoded on next `changeTree` iteration.\r\n                             //\r\n                             number$1(bytes, value.$changes.refId);\r\n                             // Try to encode inherited TYPE_ID if it's an ADD operation.\r\n                             if ((operation.op & exports.OPERATION.ADD) === exports.OPERATION.ADD) {\r\n                                 this.tryEncodeTypeId(bytes, type, value.constructor);\r\n                             }\r\n                         }\r\n                         else if (typeof (type) === \"string\") {\r\n                             //\r\n                             // Primitive values\r\n                             //\r\n                             encodePrimitiveType(type, bytes, value, ref, field);\r\n                         }\r\n                         else {\r\n                             //\r\n                             // Custom type (MapSchema, ArraySchema, etc)\r\n                             //\r\n                             var definition = getType(Object.keys(type)[0]);\r\n                             //\r\n                             // ensure a ArraySchema has been provided\r\n                             //\r\n                             assertInstanceType(ref[\"_\".concat(field)], definition.constructor, ref, field);\r\n                             //\r\n                             // Encode refId for this instance.\r\n                             // The actual instance is going to be encoded on next `changeTree` iteration.\r\n                             //\r\n                             number$1(bytes, value.$changes.refId);\r\n                         }\r\n                         if (useFilters) {\r\n                             // cache begin / end index\r\n                             changeTree.cache(fieldIndex, bytes.slice(beginIndex));\r\n                         }\r\n                     }\r\n                     if (!encodeAll && !useFilters) {\r\n                         changeTree.discard();\r\n                     }\r\n                 }\r\n                 return bytes;\r\n             };\r\n             Schema.prototype.encodeAll = function (useFilters) {\r\n                 return this.encode(true, [], useFilters);\r\n             };\r\n             Schema.prototype.applyFilters = function (client, encodeAll) {\r\n                 var _a, _b;\r\n                 if (encodeAll === void 0) { encodeAll = false; }\r\n                 var root = this;\r\n                 var refIdsDissallowed = new Set();\r\n                 var $filterState = ClientState.get(client);\r\n                 var changeTrees = [this.$changes];\r\n                 var numChangeTrees = 1;\r\n                 var filteredBytes = [];\r\n                 var _loop_1 = function (i) {\r\n                     var changeTree = changeTrees[i];\r\n                     if (refIdsDissallowed.has(changeTree.refId)) {\r\n                         return \"continue\";\r\n                     }\r\n                     var ref = changeTree.ref;\r\n                     var isSchema = ref instanceof Schema;\r\n                     uint8$1(filteredBytes, SWITCH_TO_STRUCTURE);\r\n                     number$1(filteredBytes, changeTree.refId);\r\n                     var clientHasRefId = $filterState.refIds.has(changeTree);\r\n                     var isEncodeAll = (encodeAll || !clientHasRefId);\r\n                     // console.log(\"REF:\", ref.constructor.name);\r\n                     // console.log(\"Encode all?\", isEncodeAll);\r\n                     //\r\n                     // include `changeTree` on list of known refIds by this client.\r\n                     //\r\n                     $filterState.addRefId(changeTree);\r\n                     var containerIndexes = $filterState.containerIndexes.get(changeTree);\r\n                     var changes = (isEncodeAll)\r\n                         ? Array.from(changeTree.allChanges)\r\n                         : Array.from(changeTree.changes.values());\r\n                     //\r\n                     // WORKAROUND: tries to re-evaluate previously not included @filter() attributes\r\n                     // - see \"DELETE a field of Schema\" test case.\r\n                     //\r\n                     if (!encodeAll &&\r\n                         isSchema &&\r\n                         ref._definition.indexesWithFilters) {\r\n                         var indexesWithFilters = ref._definition.indexesWithFilters;\r\n                         indexesWithFilters.forEach(function (indexWithFilter) {\r\n                             if (!containerIndexes.has(indexWithFilter) &&\r\n                                 changeTree.allChanges.has(indexWithFilter)) {\r\n                                 if (isEncodeAll) {\r\n                                     changes.push(indexWithFilter);\r\n                                 }\r\n                                 else {\r\n                                     changes.push({ op: exports.OPERATION.ADD, index: indexWithFilter, });\r\n                                 }\r\n                             }\r\n                         });\r\n                     }\r\n                     for (var j = 0, cl = changes.length; j < cl; j++) {\r\n                         var change = (isEncodeAll)\r\n                             ? { op: exports.OPERATION.ADD, index: changes[j] }\r\n                             : changes[j];\r\n                         // custom operations\r\n                         if (change.op === exports.OPERATION.CLEAR) {\r\n                             uint8$1(filteredBytes, change.op);\r\n                             continue;\r\n                         }\r\n                         var fieldIndex = change.index;\r\n                         //\r\n                         // Deleting fields: encode the operation + field index\r\n                         //\r\n                         if (change.op === exports.OPERATION.DELETE) {\r\n                             //\r\n                             // DELETE operations also need to go through filtering.\r\n                             //\r\n                             // TODO: cache the previous value so we can access the value (primitive or `refId`)\r\n                             // (check against `$filterState.refIds`)\r\n                             //\r\n                             if (isSchema) {\r\n                                 uint8$1(filteredBytes, change.op | fieldIndex);\r\n                             }\r\n                             else {\r\n                                 uint8$1(filteredBytes, change.op);\r\n                                 number$1(filteredBytes, fieldIndex);\r\n                             }\r\n                             continue;\r\n                         }\r\n                         // indexed operation\r\n                         var value = changeTree.getValue(fieldIndex);\r\n                         var type = changeTree.getType(fieldIndex);\r\n                         if (isSchema) {\r\n                             // Is a Schema!\r\n                             var filter = (ref._definition.filters &&\r\n                                 ref._definition.filters[fieldIndex]);\r\n                             if (filter && !filter.call(ref, client, value, root)) {\r\n                                 if (value && value['$changes']) {\r\n                                     refIdsDissallowed.add(value['$changes'].refId);\r\n                                 }\r\n                                 continue;\r\n                             }\r\n                         }\r\n                         else {\r\n                             // Is a collection! (map, array, etc.)\r\n                             var parent = changeTree.parent;\r\n                             var filter = changeTree.getChildrenFilter();\r\n                             if (filter && !filter.call(parent, client, ref['$indexes'].get(fieldIndex), value, root)) {\r\n                                 if (value && value['$changes']) {\r\n                                     refIdsDissallowed.add(value['$changes'].refId);\r\n                                 }\r\n                                 continue;\r\n                             }\r\n                         }\r\n                         // visit child ChangeTree on further iteration.\r\n                         if (value['$changes']) {\r\n                             changeTrees.push(value['$changes']);\r\n                             numChangeTrees++;\r\n                         }\r\n                         //\r\n                         // Copy cached bytes\r\n                         //\r\n                         if (change.op !== exports.OPERATION.TOUCH) {\r\n                             //\r\n                             // TODO: refactor me!\r\n                             //\r\n                             if (change.op === exports.OPERATION.ADD || isSchema) {\r\n                                 //\r\n                                 // use cached bytes directly if is from Schema type.\r\n                                 //\r\n                                 filteredBytes.push.apply(filteredBytes, (_a = changeTree.caches[fieldIndex]) !== null && _a !== void 0 ? _a : []);\r\n                                 containerIndexes.add(fieldIndex);\r\n                             }\r\n                             else {\r\n                                 if (containerIndexes.has(fieldIndex)) {\r\n                                     //\r\n                                     // use cached bytes if already has the field\r\n                                     //\r\n                                     filteredBytes.push.apply(filteredBytes, (_b = changeTree.caches[fieldIndex]) !== null && _b !== void 0 ? _b : []);\r\n                                 }\r\n                                 else {\r\n                                     //\r\n                                     // force ADD operation if field is not known by this client.\r\n                                     //\r\n                                     containerIndexes.add(fieldIndex);\r\n                                     uint8$1(filteredBytes, exports.OPERATION.ADD);\r\n                                     number$1(filteredBytes, fieldIndex);\r\n                                     if (ref instanceof MapSchema) {\r\n                                         //\r\n                                         // MapSchema dynamic key\r\n                                         //\r\n                                         var dynamicIndex = changeTree.ref['$indexes'].get(fieldIndex);\r\n                                         string$1(filteredBytes, dynamicIndex);\r\n                                     }\r\n                                     if (value['$changes']) {\r\n                                         number$1(filteredBytes, value['$changes'].refId);\r\n                                     }\r\n                                     else {\r\n                                         // \"encodePrimitiveType\" without type checking.\r\n                                         // the type checking has been done on the first .encode() call.\r\n                                         encode[type](filteredBytes, value);\r\n                                     }\r\n                                 }\r\n                             }\r\n                         }\r\n                         else if (value['$changes'] && !isSchema) {\r\n                             //\r\n                             // TODO:\r\n                             // - track ADD/REPLACE/DELETE instances on `$filterState`\r\n                             // - do NOT always encode dynamicIndex for MapSchema.\r\n                             //   (If client already has that key, only the first index is necessary.)\r\n                             //\r\n                             uint8$1(filteredBytes, exports.OPERATION.ADD);\r\n                             number$1(filteredBytes, fieldIndex);\r\n                             if (ref instanceof MapSchema) {\r\n                                 //\r\n                                 // MapSchema dynamic key\r\n                                 //\r\n                                 var dynamicIndex = changeTree.ref['$indexes'].get(fieldIndex);\r\n                                 string$1(filteredBytes, dynamicIndex);\r\n                             }\r\n                             number$1(filteredBytes, value['$changes'].refId);\r\n                         }\r\n                     }\r\n                 };\r\n                 for (var i = 0; i < numChangeTrees; i++) {\r\n                     _loop_1(i);\r\n                 }\r\n                 return filteredBytes;\r\n             };\r\n             Schema.prototype.clone = function () {\r\n                 var _a;\r\n                 var cloned = new (this.constructor);\r\n                 var schema = this._definition.schema;\r\n                 for (var field in schema) {\r\n                     if (typeof (this[field]) === \"object\" &&\r\n                         typeof ((_a = this[field]) === null || _a === void 0 ? void 0 : _a.clone) === \"function\") {\r\n                         // deep clone\r\n                         cloned[field] = this[field].clone();\r\n                     }\r\n                     else {\r\n                         // primitive values\r\n                         cloned[field] = this[field];\r\n                     }\r\n                 }\r\n                 return cloned;\r\n             };\r\n             Schema.prototype.toJSON = function () {\r\n                 var schema = this._definition.schema;\r\n                 var deprecated = this._definition.deprecated;\r\n                 var obj = {};\r\n                 for (var field in schema) {\r\n                     if (!deprecated[field] && this[field] !== null && typeof (this[field]) !== \"undefined\") {\r\n                         obj[field] = (typeof (this[field]['toJSON']) === \"function\")\r\n                             ? this[field]['toJSON']()\r\n                             : this[\"_\".concat(field)];\r\n                     }\r\n                 }\r\n                 return obj;\r\n             };\r\n             Schema.prototype.discardAllChanges = function () {\r\n                 this.$changes.discardAll();\r\n             };\r\n             Schema.prototype.getByIndex = function (index) {\r\n                 return this[this._definition.fieldsByIndex[index]];\r\n             };\r\n             Schema.prototype.deleteByIndex = function (index) {\r\n                 this[this._definition.fieldsByIndex[index]] = undefined;\r\n             };\r\n             Schema.prototype.tryEncodeTypeId = function (bytes, type, targetType) {\r\n                 if (type._typeid !== targetType._typeid) {\r\n                     uint8$1(bytes, TYPE_ID);\r\n                     number$1(bytes, targetType._typeid);\r\n                 }\r\n             };\r\n             Schema.prototype.getSchemaType = function (bytes, it, defaultType) {\r\n                 var type;\r\n                 if (bytes[it.offset] === TYPE_ID) {\r\n                     it.offset++;\r\n                     type = this.constructor._context.get(number(bytes, it));\r\n                 }\r\n                 return type || defaultType;\r\n             };\r\n             Schema.prototype.createTypeInstance = function (type) {\r\n                 var instance = new type();\r\n                 // assign root on $changes\r\n                 instance.$changes.root = this.$changes.root;\r\n                 return instance;\r\n             };\r\n             Schema.prototype._triggerChanges = function (changes) {\r\n                 var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n                 var uniqueRefIds = new Set();\r\n                 var $refs = this.$changes.root.refs;\r\n                 var _loop_2 = function (i) {\r\n                     var change = changes[i];\r\n                     var refId = change.refId;\r\n                     var ref = $refs.get(refId);\r\n                     var $callbacks = ref['$callbacks'];\r\n                     //\r\n                     // trigger onRemove on child structure.\r\n                     //\r\n                     if ((change.op & exports.OPERATION.DELETE) === exports.OPERATION.DELETE &&\r\n                         change.previousValue instanceof Schema) {\r\n                         (_b = (_a = change.previousValue['$callbacks']) === null || _a === void 0 ? void 0 : _a[exports.OPERATION.DELETE]) === null || _b === void 0 ? void 0 : _b.forEach(function (callback) { return callback(); });\r\n                     }\r\n                     // no callbacks defined, skip this structure!\r\n                     if (!$callbacks) {\r\n                         return \"continue\";\r\n                     }\r\n                     if (ref instanceof Schema) {\r\n                         if (!uniqueRefIds.has(refId)) {\r\n                             try {\r\n                                 // trigger onChange\r\n                                 (_c = $callbacks === null || $callbacks === void 0 ? void 0 : $callbacks[exports.OPERATION.REPLACE]) === null || _c === void 0 ? void 0 : _c.forEach(function (callback) {\r\n                                     return callback(changes);\r\n                                 });\r\n                             }\r\n                             catch (e) {\r\n                                 Schema.onError(e);\r\n                             }\r\n                         }\r\n                         try {\r\n                             if ($callbacks.hasOwnProperty(change.field)) {\r\n                                 (_d = $callbacks[change.field]) === null || _d === void 0 ? void 0 : _d.forEach(function (callback) {\r\n                                     return callback(change.value, change.previousValue);\r\n                                 });\r\n                             }\r\n                         }\r\n                         catch (e) {\r\n                             Schema.onError(e);\r\n                         }\r\n                     }\r\n                     else {\r\n                         // is a collection of items\r\n                         if (change.op === exports.OPERATION.ADD && change.previousValue === undefined) {\r\n                             // triger onAdd\r\n                             (_e = $callbacks[exports.OPERATION.ADD]) === null || _e === void 0 ? void 0 : _e.forEach(function (callback) { var _a; return callback(change.value, (_a = change.dynamicIndex) !== null && _a !== void 0 ? _a : change.field); });\r\n                         }\r\n                         else if (change.op === exports.OPERATION.DELETE) {\r\n                             //\r\n                             // FIXME: `previousValue` should always be available.\r\n                             // ADD + DELETE operations are still encoding DELETE operation.\r\n                             //\r\n                             if (change.previousValue !== undefined) {\r\n                                 // triger onRemove\r\n                                 (_f = $callbacks[exports.OPERATION.DELETE]) === null || _f === void 0 ? void 0 : _f.forEach(function (callback) { var _a; return callback(change.previousValue, (_a = change.dynamicIndex) !== null && _a !== void 0 ? _a : change.field); });\r\n                             }\r\n                         }\r\n                         else if (change.op === exports.OPERATION.DELETE_AND_ADD) {\r\n                             // triger onRemove\r\n                             if (change.previousValue !== undefined) {\r\n                                 (_g = $callbacks[exports.OPERATION.DELETE]) === null || _g === void 0 ? void 0 : _g.forEach(function (callback) { var _a; return callback(change.previousValue, (_a = change.dynamicIndex) !== null && _a !== void 0 ? _a : change.field); });\r\n                             }\r\n                             // triger onAdd\r\n                             (_h = $callbacks[exports.OPERATION.ADD]) === null || _h === void 0 ? void 0 : _h.forEach(function (callback) { var _a; return callback(change.value, (_a = change.dynamicIndex) !== null && _a !== void 0 ? _a : change.field); });\r\n                         }\r\n                         // trigger onChange\r\n                         if (change.value !== change.previousValue) {\r\n                             (_j = $callbacks[exports.OPERATION.REPLACE]) === null || _j === void 0 ? void 0 : _j.forEach(function (callback) { var _a; return callback(change.value, (_a = change.dynamicIndex) !== null && _a !== void 0 ? _a : change.field); });\r\n                         }\r\n                     }\r\n                     uniqueRefIds.add(refId);\r\n                 };\r\n                 for (var i = 0; i < changes.length; i++) {\r\n                     _loop_2(i);\r\n                 }\r\n             };\r\n             Schema._definition = SchemaDefinition.create();\r\n             return Schema;\r\n         }());\r\n\r\n         function dumpChanges(schema) {\r\n             var changeTrees = [schema['$changes']];\r\n             var numChangeTrees = 1;\r\n             var dump = {};\r\n             var currentStructure = dump;\r\n             var _loop_1 = function (i) {\r\n                 var changeTree = changeTrees[i];\r\n                 changeTree.changes.forEach(function (change) {\r\n                     var ref = changeTree.ref;\r\n                     var fieldIndex = change.index;\r\n                     var field = (ref['_definition'])\r\n                         ? ref['_definition'].fieldsByIndex[fieldIndex]\r\n                         : ref['$indexes'].get(fieldIndex);\r\n                     currentStructure[field] = changeTree.getValue(fieldIndex);\r\n                 });\r\n             };\r\n             for (var i = 0; i < numChangeTrees; i++) {\r\n                 _loop_1(i);\r\n             }\r\n             return dump;\r\n         }\r\n\r\n         var reflectionContext = { context: new Context() };\r\n         /**\r\n          * Reflection\r\n          */\r\n         var ReflectionField = /** @class */ (function (_super) {\r\n             __extends(ReflectionField, _super);\r\n             function ReflectionField() {\r\n                 return _super !== null && _super.apply(this, arguments) || this;\r\n             }\r\n             __decorate([\r\n                 type(\"string\", reflectionContext)\r\n             ], ReflectionField.prototype, \"name\", void 0);\r\n             __decorate([\r\n                 type(\"string\", reflectionContext)\r\n             ], ReflectionField.prototype, \"type\", void 0);\r\n             __decorate([\r\n                 type(\"number\", reflectionContext)\r\n             ], ReflectionField.prototype, \"referencedType\", void 0);\r\n             return ReflectionField;\r\n         }(Schema));\r\n         var ReflectionType = /** @class */ (function (_super) {\r\n             __extends(ReflectionType, _super);\r\n             function ReflectionType() {\r\n                 var _this = _super !== null && _super.apply(this, arguments) || this;\r\n                 _this.fields = new ArraySchema();\r\n                 return _this;\r\n             }\r\n             __decorate([\r\n                 type(\"number\", reflectionContext)\r\n             ], ReflectionType.prototype, \"id\", void 0);\r\n             __decorate([\r\n                 type([ReflectionField], reflectionContext)\r\n             ], ReflectionType.prototype, \"fields\", void 0);\r\n             return ReflectionType;\r\n         }(Schema));\r\n         var Reflection = /** @class */ (function (_super) {\r\n             __extends(Reflection, _super);\r\n             function Reflection() {\r\n                 var _this = _super !== null && _super.apply(this, arguments) || this;\r\n                 _this.types = new ArraySchema();\r\n                 return _this;\r\n             }\r\n             Reflection.encode = function (instance) {\r\n                 var rootSchemaType = instance.constructor;\r\n                 var reflection = new Reflection();\r\n                 reflection.rootType = rootSchemaType._typeid;\r\n                 var buildType = function (currentType, schema) {\r\n                     for (var fieldName in schema) {\r\n                         var field = new ReflectionField();\r\n                         field.name = fieldName;\r\n                         var fieldType = void 0;\r\n                         if (typeof (schema[fieldName]) === \"string\") {\r\n                             fieldType = schema[fieldName];\r\n                         }\r\n                         else {\r\n                             var type_1 = schema[fieldName];\r\n                             var childTypeSchema = void 0;\r\n                             //\r\n                             // TODO: refactor below.\r\n                             //\r\n                             if (Schema.is(type_1)) {\r\n                                 fieldType = \"ref\";\r\n                                 childTypeSchema = schema[fieldName];\r\n                             }\r\n                             else {\r\n                                 fieldType = Object.keys(type_1)[0];\r\n                                 if (typeof (type_1[fieldType]) === \"string\") {\r\n                                     fieldType += \":\" + type_1[fieldType]; // array:string\r\n                                 }\r\n                                 else {\r\n                                     childTypeSchema = type_1[fieldType];\r\n                                 }\r\n                             }\r\n                             field.referencedType = (childTypeSchema)\r\n                                 ? childTypeSchema._typeid\r\n                                 : -1;\r\n                         }\r\n                         field.type = fieldType;\r\n                         currentType.fields.push(field);\r\n                     }\r\n                     reflection.types.push(currentType);\r\n                 };\r\n                 var types = rootSchemaType._context.types;\r\n                 for (var typeid in types) {\r\n                     var type_2 = new ReflectionType();\r\n                     type_2.id = Number(typeid);\r\n                     buildType(type_2, types[typeid]._definition.schema);\r\n                 }\r\n                 return reflection.encodeAll();\r\n             };\r\n             Reflection.decode = function (bytes, it) {\r\n                 var context = new Context();\r\n                 var reflection = new Reflection();\r\n                 reflection.decode(bytes, it);\r\n                 var schemaTypes = reflection.types.reduce(function (types, reflectionType) {\r\n                     var schema = /** @class */ (function (_super) {\r\n                         __extends(_, _super);\r\n                         function _() {\r\n                             return _super !== null && _super.apply(this, arguments) || this;\r\n                         }\r\n                         return _;\r\n                     }(Schema));\r\n                     var typeid = reflectionType.id;\r\n                     types[typeid] = schema;\r\n                     context.add(schema, typeid);\r\n                     return types;\r\n                 }, {});\r\n                 reflection.types.forEach(function (reflectionType) {\r\n                     var schemaType = schemaTypes[reflectionType.id];\r\n                     reflectionType.fields.forEach(function (field) {\r\n                         var _a;\r\n                         if (field.referencedType !== undefined) {\r\n                             var fieldType = field.type;\r\n                             var refType = schemaTypes[field.referencedType];\r\n                             // map or array of primitive type (-1)\r\n                             if (!refType) {\r\n                                 var typeInfo = field.type.split(\":\");\r\n                                 fieldType = typeInfo[0];\r\n                                 refType = typeInfo[1];\r\n                             }\r\n                             if (fieldType === \"ref\") {\r\n                                 type(refType, { context: context })(schemaType.prototype, field.name);\r\n                             }\r\n                             else {\r\n                                 type((_a = {}, _a[fieldType] = refType, _a), { context: context })(schemaType.prototype, field.name);\r\n                             }\r\n                         }\r\n                         else {\r\n                             type(field.type, { context: context })(schemaType.prototype, field.name);\r\n                         }\r\n                     });\r\n                 });\r\n                 var rootType = schemaTypes[reflection.rootType];\r\n                 var rootInstance = new rootType();\r\n                 /**\r\n                  * auto-initialize referenced types on root type\r\n                  * to allow registering listeners immediatelly on client-side\r\n                  */\r\n                 for (var fieldName in rootType._definition.schema) {\r\n                     var fieldType = rootType._definition.schema[fieldName];\r\n                     if (typeof (fieldType) !== \"string\") {\r\n                         rootInstance[fieldName] = (typeof (fieldType) === \"function\")\r\n                             ? new fieldType() // is a schema reference\r\n                             : new (getType(Object.keys(fieldType)[0])).constructor(); // is a \"collection\"\r\n                     }\r\n                 }\r\n                 return rootInstance;\r\n             };\r\n             __decorate([\r\n                 type([ReflectionType], reflectionContext)\r\n             ], Reflection.prototype, \"types\", void 0);\r\n             __decorate([\r\n                 type(\"number\", reflectionContext)\r\n             ], Reflection.prototype, \"rootType\", void 0);\r\n             return Reflection;\r\n         }(Schema));\r\n\r\n         registerType(\"map\", { constructor: MapSchema });\r\n         registerType(\"array\", { constructor: ArraySchema });\r\n         registerType(\"set\", { constructor: SetSchema });\r\n         registerType(\"collection\", { constructor: CollectionSchema, });\r\n\r\n         exports.ArraySchema = ArraySchema;\r\n         exports.CollectionSchema = CollectionSchema;\r\n         exports.Context = Context;\r\n         exports.MapSchema = MapSchema;\r\n         exports.Reflection = Reflection;\r\n         exports.ReflectionField = ReflectionField;\r\n         exports.ReflectionType = ReflectionType;\r\n         exports.Schema = Schema;\r\n         exports.SchemaDefinition = SchemaDefinition;\r\n         exports.SetSchema = SetSchema;\r\n         exports.decode = decode;\r\n         exports.defineTypes = defineTypes;\r\n         exports.deprecated = deprecated;\r\n         exports.dumpChanges = dumpChanges;\r\n         exports.encode = encode;\r\n         exports.filter = filter;\r\n         exports.filterChildren = filterChildren;\r\n         exports.hasFilter = hasFilter;\r\n         exports.registerType = registerType;\r\n         exports.type = type;\r\n\r\n         Object.defineProperty(exports, '__esModule', { value: true });\r\n\r\n     }));\r\n     });\r\n\r\n     var Room = /** @class */ (function () {\r\n         function Room(name, rootSchema) {\r\n             var _this = this;\r\n             // Public signals\r\n             this.onStateChange = createSignal();\r\n             this.onError = createSignal();\r\n             this.onLeave = createSignal();\r\n             this.onJoin = createSignal();\r\n             this.hasJoined = false;\r\n             this.onMessageHandlers = createNanoEvents();\r\n             this.roomId = null;\r\n             this.name = name;\r\n             if (rootSchema) {\r\n                 this.serializer = new (getSerializer(\"schema\"));\r\n                 this.rootSchema = rootSchema;\r\n                 this.serializer.state = new rootSchema();\r\n             }\r\n             this.onError(function (code, message) { var _a; return (_a = console.warn) === null || _a === void 0 ? void 0 : _a.call(console, \"colyseus.js - onError => (\".concat(code, \") \").concat(message)); });\r\n             this.onLeave(function () { return _this.removeAllListeners(); });\r\n         }\r\n         Object.defineProperty(Room.prototype, \"id\", {\r\n             // TODO: deprecate me on version 1.0\r\n             get: function () { return this.roomId; },\r\n             enumerable: false,\r\n             configurable: true\r\n         });\r\n         Room.prototype.connect = function (endpoint, devModeCloseCallback, room // when reconnecting on devMode, re-use previous room intance for handling events.\r\n         ) {\r\n             if (room === void 0) { room = this; }\r\n             var connection = new Connection();\r\n             room.connection = connection;\r\n             connection.events.onmessage = Room.prototype.onMessageCallback.bind(room);\r\n             connection.events.onclose = function (e) {\r\n                 var _a;\r\n                 if (!room.hasJoined) {\r\n                     (_a = console.warn) === null || _a === void 0 ? void 0 : _a.call(console, \"Room connection was closed unexpectedly (\".concat(e.code, \"): \").concat(e.reason));\r\n                     room.onError.invoke(e.code, e.reason);\r\n                     return;\r\n                 }\r\n                 if (e.code === CloseCode.DEVMODE_RESTART && devModeCloseCallback) {\r\n                     devModeCloseCallback();\r\n                 }\r\n                 else {\r\n                     room.onLeave.invoke(e.code);\r\n                     room.destroy();\r\n                 }\r\n             };\r\n             connection.events.onerror = function (e) {\r\n                 var _a;\r\n                 (_a = console.warn) === null || _a === void 0 ? void 0 : _a.call(console, \"Room, onError (\".concat(e.code, \"): \").concat(e.reason));\r\n                 room.onError.invoke(e.code, e.reason);\r\n             };\r\n             connection.connect(endpoint);\r\n         };\r\n         Room.prototype.leave = function (consented) {\r\n             var _this = this;\r\n             if (consented === void 0) { consented = true; }\r\n             return new Promise(function (resolve) {\r\n                 _this.onLeave(function (code) { return resolve(code); });\r\n                 if (_this.connection) {\r\n                     if (consented) {\r\n                         _this.connection.send([exports.Protocol.LEAVE_ROOM]);\r\n                     }\r\n                     else {\r\n                         _this.connection.close();\r\n                     }\r\n                 }\r\n                 else {\r\n                     _this.onLeave.invoke(CloseCode.CONSENTED);\r\n                 }\r\n             });\r\n         };\r\n         Room.prototype.onMessage = function (type, callback) {\r\n             return this.onMessageHandlers.on(this.getMessageHandlerKey(type), callback);\r\n         };\r\n         Room.prototype.send = function (type, message) {\r\n             var initialBytes = [exports.Protocol.ROOM_DATA];\r\n             if (typeof (type) === \"string\") {\r\n                 umd.encode.string(initialBytes, type);\r\n             }\r\n             else {\r\n                 umd.encode.number(initialBytes, type);\r\n             }\r\n             var arr;\r\n             if (message !== undefined) {\r\n                 var encoded = encode(message);\r\n                 arr = new Uint8Array(initialBytes.length + encoded.byteLength);\r\n                 arr.set(new Uint8Array(initialBytes), 0);\r\n                 arr.set(new Uint8Array(encoded), initialBytes.length);\r\n             }\r\n             else {\r\n                 arr = new Uint8Array(initialBytes);\r\n             }\r\n             this.connection.send(arr.buffer);\r\n         };\r\n         Room.prototype.sendBytes = function (type, bytes) {\r\n             var initialBytes = [exports.Protocol.ROOM_DATA_BYTES];\r\n             if (typeof (type) === \"string\") {\r\n                 umd.encode.string(initialBytes, type);\r\n             }\r\n             else {\r\n                 umd.encode.number(initialBytes, type);\r\n             }\r\n             var arr;\r\n             arr = new Uint8Array(initialBytes.length + (bytes.byteLength || bytes.length));\r\n             arr.set(new Uint8Array(initialBytes), 0);\r\n             arr.set(new Uint8Array(bytes), initialBytes.length);\r\n             this.connection.send(arr.buffer);\r\n         };\r\n         Object.defineProperty(Room.prototype, \"state\", {\r\n             get: function () {\r\n                 return this.serializer.getState();\r\n             },\r\n             enumerable: false,\r\n             configurable: true\r\n         });\r\n         Room.prototype.removeAllListeners = function () {\r\n             this.onJoin.clear();\r\n             this.onStateChange.clear();\r\n             this.onError.clear();\r\n             this.onLeave.clear();\r\n             this.onMessageHandlers.events = {};\r\n         };\r\n         Room.prototype.onMessageCallback = function (event) {\r\n             var bytes = Array.from(new Uint8Array(event.data));\r\n             var code = bytes[0];\r\n             if (code === exports.Protocol.JOIN_ROOM) {\r\n                 var offset = 1;\r\n                 var reconnectionToken = utf8Read(bytes, offset);\r\n                 offset += utf8Length(reconnectionToken);\r\n                 this.serializerId = utf8Read(bytes, offset);\r\n                 offset += utf8Length(this.serializerId);\r\n                 // Instantiate serializer if not locally available.\r\n                 if (!this.serializer) {\r\n                     var serializer = getSerializer(this.serializerId);\r\n                     this.serializer = new serializer();\r\n                 }\r\n                 if (bytes.length > offset && this.serializer.handshake) {\r\n                     this.serializer.handshake(bytes, { offset: offset });\r\n                 }\r\n                 this.reconnectionToken = \"\".concat(this.roomId, \":\").concat(reconnectionToken);\r\n                 this.hasJoined = true;\r\n                 this.onJoin.invoke();\r\n                 // acknowledge successfull JOIN_ROOM\r\n                 this.connection.send([exports.Protocol.JOIN_ROOM]);\r\n             }\r\n             else if (code === exports.Protocol.ERROR) {\r\n                 var it_1 = { offset: 1 };\r\n                 var code_1 = umd.decode.number(bytes, it_1);\r\n                 var message = umd.decode.string(bytes, it_1);\r\n                 this.onError.invoke(code_1, message);\r\n             }\r\n             else if (code === exports.Protocol.LEAVE_ROOM) {\r\n                 this.leave();\r\n             }\r\n             else if (code === exports.Protocol.ROOM_DATA_SCHEMA) {\r\n                 var it_2 = { offset: 1 };\r\n                 var context_1 = this.serializer.getState().constructor._context;\r\n                 var type = context_1.get(umd.decode.number(bytes, it_2));\r\n                 var message = new type();\r\n                 message.decode(bytes, it_2);\r\n                 this.dispatchMessage(type, message);\r\n             }\r\n             else if (code === exports.Protocol.ROOM_STATE) {\r\n                 bytes.shift(); // drop `code` byte\r\n                 this.setState(bytes);\r\n             }\r\n             else if (code === exports.Protocol.ROOM_STATE_PATCH) {\r\n                 bytes.shift(); // drop `code` byte\r\n                 this.patch(bytes);\r\n             }\r\n             else if (code === exports.Protocol.ROOM_DATA) {\r\n                 var it_3 = { offset: 1 };\r\n                 var type = (umd.decode.stringCheck(bytes, it_3))\r\n                     ? umd.decode.string(bytes, it_3)\r\n                     : umd.decode.number(bytes, it_3);\r\n                 var message = (bytes.length > it_3.offset)\r\n                     ? decode(event.data, it_3.offset)\r\n                     : undefined;\r\n                 this.dispatchMessage(type, message);\r\n             }\r\n             else if (code === exports.Protocol.ROOM_DATA_BYTES) {\r\n                 var it_4 = { offset: 1 };\r\n                 var type = (umd.decode.stringCheck(bytes, it_4))\r\n                     ? umd.decode.string(bytes, it_4)\r\n                     : umd.decode.number(bytes, it_4);\r\n                 this.dispatchMessage(type, new Uint8Array(bytes.slice(it_4.offset)));\r\n             }\r\n         };\r\n         Room.prototype.setState = function (encodedState) {\r\n             this.serializer.setState(encodedState);\r\n             this.onStateChange.invoke(this.serializer.getState());\r\n         };\r\n         Room.prototype.patch = function (binaryPatch) {\r\n             this.serializer.patch(binaryPatch);\r\n             this.onStateChange.invoke(this.serializer.getState());\r\n         };\r\n         Room.prototype.dispatchMessage = function (type, message) {\r\n             var _a;\r\n             var messageType = this.getMessageHandlerKey(type);\r\n             if (this.onMessageHandlers.events[messageType]) {\r\n                 this.onMessageHandlers.emit(messageType, message);\r\n             }\r\n             else if (this.onMessageHandlers.events['*']) {\r\n                 this.onMessageHandlers.emit('*', type, message);\r\n             }\r\n             else {\r\n                 (_a = console.warn) === null || _a === void 0 ? void 0 : _a.call(console, \"colyseus.js: onMessage() not registered for type '\".concat(type, \"'.\"));\r\n             }\r\n         };\r\n         Room.prototype.destroy = function () {\r\n             if (this.serializer) {\r\n                 this.serializer.teardown();\r\n             }\r\n         };\r\n         Room.prototype.getMessageHandlerKey = function (type) {\r\n             switch (typeof (type)) {\r\n                 // typeof Schema\r\n                 case \"function\": return \"$\".concat(type._typeid);\r\n                 // string\r\n                 case \"string\": return type;\r\n                 // number\r\n                 case \"number\": return \"i\".concat(type);\r\n                 default: throw new Error(\"invalid message type.\");\r\n             }\r\n         };\r\n         return Room;\r\n     }());\r\n\r\n     function apply(src, tar) {\r\n     \ttar.headers = src.headers || {};\r\n     \ttar.statusMessage = src.statusText;\r\n     \ttar.statusCode = src.status;\r\n     \ttar.data = src.response;\r\n     }\r\n\r\n     function send(method, uri, opts) {\r\n     \treturn new Promise(function (res, rej) {\r\n     \t\topts = opts || {};\r\n     \t\tvar req = new XMLHttpRequest;\r\n     \t\tvar k, tmp, arr, str=opts.body;\r\n     \t\tvar headers = opts.headers || {};\r\n\r\n     \t\t// IE compatible\r\n     \t\tif (opts.timeout) req.timeout = opts.timeout;\r\n     \t\treq.ontimeout = req.onerror = function (err) {\r\n     \t\t\terr.timeout = err.type == 'timeout';\r\n     \t\t\trej(err);\r\n     \t\t};\r\n\r\n     \t\treq.open(method, uri.href || uri);\r\n\r\n     \t\treq.onload = function () {\r\n     \t\t\tarr = req.getAllResponseHeaders().trim().split(/[\\r\\n]+/);\r\n     \t\t\tapply(req, req); //=> req.headers\r\n\r\n     \t\t\twhile (tmp = arr.shift()) {\r\n     \t\t\t\ttmp = tmp.split(': ');\r\n     \t\t\t\treq.headers[tmp.shift().toLowerCase()] = tmp.join(': ');\r\n     \t\t\t}\r\n\r\n     \t\t\ttmp = req.headers['content-type'];\r\n     \t\t\tif (tmp && !!~tmp.indexOf('application/json')) {\r\n     \t\t\t\ttry {\r\n     \t\t\t\t\treq.data = JSON.parse(req.data, opts.reviver);\r\n     \t\t\t\t} catch (err) {\r\n     \t\t\t\t\tapply(req, err);\r\n     \t\t\t\t\treturn rej(err);\r\n     \t\t\t\t}\r\n     \t\t\t}\r\n\r\n     \t\t\t(req.status >= 400 ? rej : res)(req);\r\n     \t\t};\r\n\r\n     \t\tif (typeof FormData < 'u' && str instanceof FormData) ; else if (str && typeof str == 'object') {\r\n     \t\t\theaders['content-type'] = 'application/json';\r\n     \t\t\tstr = JSON.stringify(str);\r\n     \t\t}\r\n\r\n     \t\treq.withCredentials = !!opts.withCredentials;\r\n\r\n     \t\tfor (k in headers) {\r\n     \t\t\treq.setRequestHeader(k, headers[k]);\r\n     \t\t}\r\n\r\n     \t\treq.send(str);\r\n     \t});\r\n     }\r\n\r\n     var get = /*#__PURE__*/ send.bind(send, 'GET');\r\n     var post = /*#__PURE__*/ send.bind(send, 'POST');\r\n     var patch = /*#__PURE__*/ send.bind(send, 'PATCH');\r\n     var del = /*#__PURE__*/ send.bind(send, 'DELETE');\r\n     var put = /*#__PURE__*/ send.bind(send, 'PUT');\r\n\r\n     var del_1 = del;\r\n     var get_1 = get;\r\n     var patch_1 = patch;\r\n     var post_1 = post;\r\n     var put_1 = put;\r\n     var send_1 = send;\r\n\r\n     var xhr = {\r\n     \tdel: del_1,\r\n     \tget: get_1,\r\n     \tpatch: patch_1,\r\n     \tpost: post_1,\r\n     \tput: put_1,\r\n     \tsend: send_1\r\n     };\r\n\r\n     var httpie = /*#__PURE__*/_mergeNamespaces({\r\n         __proto__: null,\r\n         'default': xhr,\r\n         del: del_1,\r\n         get: get_1,\r\n         patch: patch_1,\r\n         post: post_1,\r\n         put: put_1,\r\n         send: send_1\r\n     }, [xhr]);\r\n\r\n     var HTTP = /** @class */ (function () {\r\n         function HTTP(client) {\r\n             this.client = client;\r\n         }\r\n         HTTP.prototype.get = function (path, options) {\r\n             if (options === void 0) { options = {}; }\r\n             return this.request(\"get\", path, options);\r\n         };\r\n         HTTP.prototype.post = function (path, options) {\r\n             if (options === void 0) { options = {}; }\r\n             return this.request(\"post\", path, options);\r\n         };\r\n         HTTP.prototype.del = function (path, options) {\r\n             if (options === void 0) { options = {}; }\r\n             return this.request(\"del\", path, options);\r\n         };\r\n         HTTP.prototype.put = function (path, options) {\r\n             if (options === void 0) { options = {}; }\r\n             return this.request(\"put\", path, options);\r\n         };\r\n         HTTP.prototype.request = function (method, path, options) {\r\n             if (options === void 0) { options = {}; }\r\n             return httpie[method](this.client['getHttpEndpoint'](path), this.getOptions(options)).catch(function (e) {\r\n                 var _a;\r\n                 throw new ServerError(e.statusCode || -1, ((_a = e.data) === null || _a === void 0 ? void 0 : _a.error) || e.statusMessage || e.message || \"offline\");\r\n             });\r\n         };\r\n         HTTP.prototype.getOptions = function (options) {\r\n             if (this.authToken) {\r\n                 if (!options.headers) {\r\n                     options.headers = {};\r\n                 }\r\n                 options.headers['Authorization'] = \"Bearer \".concat(this.authToken);\r\n                 options.withCredentials = true;\r\n             }\r\n             return options;\r\n         };\r\n         return HTTP;\r\n     }());\r\n\r\n     /// <reference path=\"../typings/cocos-creator.d.ts\" />\r\n     /**\r\n      * We do not assign 'storage' to window.localStorage immediatelly for React\r\n      * Native compatibility. window.localStorage is not present when this module is\r\n      * loaded.\r\n      */\r\n     var storage;\r\n     function getStorage() {\r\n         if (!storage) {\r\n             storage = (typeof (cc) !== 'undefined' && cc.sys && cc.sys.localStorage)\r\n                 ? cc.sys.localStorage // compatibility with cocos creator\r\n                 : typeof (window) !== \"undefined\" && window.localStorage //RN does have window object at this point, but localStorage is not defined\r\n                     ? window.localStorage // regular browser environment\r\n                     : {\r\n                         cache: {},\r\n                         setItem: function (key, value) { this.cache[key] = value; },\r\n                         getItem: function (key) { this.cache[key]; },\r\n                         removeItem: function (key) { delete this.cache[key]; },\r\n                     };\r\n         }\r\n         return storage;\r\n     }\r\n     function setItem(key, value) {\r\n         getStorage().setItem(key, value);\r\n     }\r\n     function removeItem(key) {\r\n         getStorage().removeItem(key);\r\n     }\r\n     function getItem(key, callback) {\r\n         var value = getStorage().getItem(key);\r\n         if (typeof (Promise) === 'undefined' || // old browsers\r\n             !(value instanceof Promise)) {\r\n             // browser has synchronous return\r\n             callback(value);\r\n         }\r\n         else {\r\n             // react-native is asynchronous\r\n             value.then(function (id) { return callback(id); });\r\n         }\r\n     }\r\n\r\n     var _Auth__initialized, _Auth__initializationPromise, _Auth__signInWindow, _Auth__events;\r\n     var Auth = /** @class */ (function () {\r\n         function Auth(http) {\r\n             var _this = this;\r\n             this.http = http;\r\n             this.settings = {\r\n                 path: \"/auth\",\r\n                 key: \"colyseus-auth-token\",\r\n             };\r\n             _Auth__initialized.set(this, false);\r\n             _Auth__initializationPromise.set(this, void 0);\r\n             _Auth__signInWindow.set(this, undefined);\r\n             _Auth__events.set(this, createNanoEvents());\r\n             getItem(this.settings.key, function (token) { return _this.token = token; });\r\n         }\r\n         Object.defineProperty(Auth.prototype, \"token\", {\r\n             get: function () {\r\n                 return this.http.authToken;\r\n             },\r\n             set: function (token) {\r\n                 this.http.authToken = token;\r\n             },\r\n             enumerable: false,\r\n             configurable: true\r\n         });\r\n         Auth.prototype.onChange = function (callback) {\r\n             var _this = this;\r\n             var unbindChange = __classPrivateFieldGet(this, _Auth__events, \"f\").on(\"change\", callback);\r\n             if (!__classPrivateFieldGet(this, _Auth__initialized, \"f\")) {\r\n                 __classPrivateFieldSet(this, _Auth__initializationPromise, new Promise(function (resolve, reject) {\r\n                     _this.getUserData().then(function (userData) {\r\n                         _this.emitChange(__assign(__assign({}, userData), { token: _this.token }));\r\n                     }).catch(function (e) {\r\n                         // user is not logged in, or service is down\r\n                         _this.emitChange({ user: null, token: undefined });\r\n                     }).finally(function () {\r\n                         resolve();\r\n                     });\r\n                 }), \"f\");\r\n             }\r\n             __classPrivateFieldSet(this, _Auth__initialized, true, \"f\");\r\n             return unbindChange;\r\n         };\r\n         Auth.prototype.getUserData = function () {\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0:\r\n                             if (!this.token) return [3 /*break*/, 2];\r\n                             return [4 /*yield*/, this.http.get(\"\".concat(this.settings.path, \"/userdata\"))];\r\n                         case 1: return [2 /*return*/, (_a.sent()).data];\r\n                         case 2: throw new Error(\"missing auth.token\");\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Auth.prototype.registerWithEmailAndPassword = function (email, password, options) {\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 var data;\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0: return [4 /*yield*/, this.http.post(\"\".concat(this.settings.path, \"/register\"), {\r\n                                 body: { email: email, password: password, options: options, },\r\n                             })];\r\n                         case 1:\r\n                             data = (_a.sent()).data;\r\n                             this.emitChange(data);\r\n                             return [2 /*return*/, data];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Auth.prototype.signInWithEmailAndPassword = function (email, password) {\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 var data;\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0: return [4 /*yield*/, this.http.post(\"\".concat(this.settings.path, \"/login\"), {\r\n                                 body: { email: email, password: password, },\r\n                             })];\r\n                         case 1:\r\n                             data = (_a.sent()).data;\r\n                             this.emitChange(data);\r\n                             return [2 /*return*/, data];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Auth.prototype.signInAnonymously = function (options) {\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 var data;\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0: return [4 /*yield*/, this.http.post(\"\".concat(this.settings.path, \"/anonymous\"), {\r\n                                 body: { options: options, }\r\n                             })];\r\n                         case 1:\r\n                             data = (_a.sent()).data;\r\n                             this.emitChange(data);\r\n                             return [2 /*return*/, data];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Auth.prototype.sendPasswordResetEmail = function (email) {\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0: return [4 /*yield*/, this.http.post(\"\".concat(this.settings.path, \"/forgot-password\"), {\r\n                                 body: { email: email, }\r\n                             })];\r\n                         case 1: return [2 /*return*/, (_a.sent()).data];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Auth.prototype.signInWithProvider = function (providerName, settings) {\r\n             if (settings === void 0) { settings = {}; }\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 var _this = this;\r\n                 return __generator(this, function (_a) {\r\n                     return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                             var w = settings.width || 480;\r\n                             var h = settings.height || 768;\r\n                             // forward existing token for upgrading\r\n                             var upgradingToken = _this.token ? \"?token=\".concat(_this.token) : \"\";\r\n                             // Capitalize first letter of providerName\r\n                             var title = \"Login with \".concat((providerName[0].toUpperCase() + providerName.substring(1)));\r\n                             var url = _this.http['client']['getHttpEndpoint'](\"\".concat((settings.prefix || \"\".concat(_this.settings.path, \"/provider\")), \"/\").concat(providerName).concat(upgradingToken));\r\n                             var left = (screen.width / 2) - (w / 2);\r\n                             var top = (screen.height / 2) - (h / 2);\r\n                             __classPrivateFieldSet(_this, _Auth__signInWindow, window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left), \"f\");\r\n                             var onMessage = function (event) {\r\n                                 // TODO: it is a good idea to check if event.origin can be trusted!\r\n                                 // if (event.origin.indexOf(window.location.hostname) === -1) { return; }\r\n                                 // require 'user' and 'token' inside received data.\r\n                                 if (event.data.user === undefined && event.data.token === undefined) {\r\n                                     return;\r\n                                 }\r\n                                 clearInterval(rejectionChecker);\r\n                                 __classPrivateFieldGet(_this, _Auth__signInWindow, \"f\").close();\r\n                                 __classPrivateFieldSet(_this, _Auth__signInWindow, undefined, \"f\");\r\n                                 window.removeEventListener(\"message\", onMessage);\r\n                                 if (event.data.error !== undefined) {\r\n                                     reject(event.data.error);\r\n                                 }\r\n                                 else {\r\n                                     resolve(event.data);\r\n                                     _this.emitChange(event.data);\r\n                                 }\r\n                             };\r\n                             var rejectionChecker = setInterval(function () {\r\n                                 if (!__classPrivateFieldGet(_this, _Auth__signInWindow, \"f\") || __classPrivateFieldGet(_this, _Auth__signInWindow, \"f\").closed) {\r\n                                     __classPrivateFieldSet(_this, _Auth__signInWindow, undefined, \"f\");\r\n                                     reject(\"cancelled\");\r\n                                     window.removeEventListener(\"message\", onMessage);\r\n                                 }\r\n                             }, 200);\r\n                             window.addEventListener(\"message\", onMessage);\r\n                         })];\r\n                 });\r\n             });\r\n         };\r\n         Auth.prototype.signOut = function () {\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 return __generator(this, function (_a) {\r\n                     this.emitChange({ user: null, token: null });\r\n                     return [2 /*return*/];\r\n                 });\r\n             });\r\n         };\r\n         Auth.prototype.emitChange = function (authData) {\r\n             if (authData.token !== undefined) {\r\n                 this.token = authData.token;\r\n                 if (authData.token === null) {\r\n                     removeItem(this.settings.key);\r\n                 }\r\n                 else {\r\n                     // store key in localStorage\r\n                     setItem(this.settings.key, authData.token);\r\n                 }\r\n             }\r\n             __classPrivateFieldGet(this, _Auth__events, \"f\").emit(\"change\", authData);\r\n         };\r\n         return Auth;\r\n     }());\r\n     _Auth__initialized = new WeakMap(), _Auth__initializationPromise = new WeakMap(), _Auth__signInWindow = new WeakMap(), _Auth__events = new WeakMap();\r\n\r\n     var _a;\r\n     var MatchMakeError = /** @class */ (function (_super) {\r\n         __extends(MatchMakeError, _super);\r\n         function MatchMakeError(message, code) {\r\n             var _this = _super.call(this, message) || this;\r\n             _this.code = code;\r\n             Object.setPrototypeOf(_this, MatchMakeError.prototype);\r\n             return _this;\r\n         }\r\n         return MatchMakeError;\r\n     }(Error));\r\n     // - React Native does not provide `window.location`\r\n     // - Cocos Creator (Native) does not provide `window.location.hostname`\r\n     var DEFAULT_ENDPOINT = (typeof (window) !== \"undefined\" && typeof ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.hostname) !== \"undefined\")\r\n         ? \"\".concat(window.location.protocol.replace(\"http\", \"ws\"), \"//\").concat(window.location.hostname).concat((window.location.port && \":\".concat(window.location.port)))\r\n         : \"ws://127.0.0.1:2567\";\r\n     var Client = /** @class */ (function () {\r\n         function Client(settings) {\r\n             if (settings === void 0) { settings = DEFAULT_ENDPOINT; }\r\n             if (typeof (settings) === \"string\") {\r\n                 //\r\n                 // endpoint by url\r\n                 //\r\n                 var url = new URL(settings);\r\n                 var secure = (url.protocol === \"https:\" || url.protocol === \"wss:\");\r\n                 var port = Number(url.port || (secure ? 443 : 80));\r\n                 this.settings = {\r\n                     hostname: url.hostname,\r\n                     pathname: url.pathname,\r\n                     port: port,\r\n                     secure: secure\r\n                 };\r\n             }\r\n             else {\r\n                 //\r\n                 // endpoint by settings\r\n                 //\r\n                 if (settings.port === undefined) {\r\n                     settings.port = (settings.secure) ? 443 : 80;\r\n                 }\r\n                 if (settings.pathname === undefined) {\r\n                     settings.pathname = \"\";\r\n                 }\r\n                 this.settings = settings;\r\n             }\r\n             // make sure pathname does not end with \"/\"\r\n             if (this.settings.pathname.endsWith(\"/\")) {\r\n                 this.settings.pathname = this.settings.pathname.slice(0, -1);\r\n             }\r\n             this.http = new HTTP(this);\r\n             this.auth = new Auth(this.http);\r\n         }\r\n         Client.prototype.joinOrCreate = function (roomName, options, rootSchema) {\r\n             if (options === void 0) { options = {}; }\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0: return [4 /*yield*/, this.createMatchMakeRequest('joinOrCreate', roomName, options, rootSchema)];\r\n                         case 1: return [2 /*return*/, _a.sent()];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Client.prototype.create = function (roomName, options, rootSchema) {\r\n             if (options === void 0) { options = {}; }\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0: return [4 /*yield*/, this.createMatchMakeRequest('create', roomName, options, rootSchema)];\r\n                         case 1: return [2 /*return*/, _a.sent()];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Client.prototype.join = function (roomName, options, rootSchema) {\r\n             if (options === void 0) { options = {}; }\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0: return [4 /*yield*/, this.createMatchMakeRequest('join', roomName, options, rootSchema)];\r\n                         case 1: return [2 /*return*/, _a.sent()];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Client.prototype.joinById = function (roomId, options, rootSchema) {\r\n             if (options === void 0) { options = {}; }\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0: return [4 /*yield*/, this.createMatchMakeRequest('joinById', roomId, options, rootSchema)];\r\n                         case 1: return [2 /*return*/, _a.sent()];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         /**\r\n          * Re-establish connection with a room this client was previously connected to.\r\n          *\r\n          * @param reconnectionToken The `room.reconnectionToken` from previously connected room.\r\n          * @param rootSchema (optional) Concrete root schema definition\r\n          * @returns Promise<Room>\r\n          */\r\n         Client.prototype.reconnect = function (reconnectionToken, rootSchema) {\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 var _a, roomId, token;\r\n                 return __generator(this, function (_b) {\r\n                     switch (_b.label) {\r\n                         case 0:\r\n                             if (typeof (reconnectionToken) === \"string\" && typeof (rootSchema) === \"string\") {\r\n                                 throw new Error(\"DEPRECATED: .reconnect() now only accepts 'reconnectionToken' as argument.\\nYou can get this token from previously connected `room.reconnectionToken`\");\r\n                             }\r\n                             _a = reconnectionToken.split(\":\"), roomId = _a[0], token = _a[1];\r\n                             if (!roomId || !token) {\r\n                                 throw new Error(\"Invalid reconnection token format.\\nThe format should be roomId:reconnectionToken\");\r\n                             }\r\n                             return [4 /*yield*/, this.createMatchMakeRequest('reconnect', roomId, { reconnectionToken: token }, rootSchema)];\r\n                         case 1: return [2 /*return*/, _b.sent()];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Client.prototype.getAvailableRooms = function (roomName) {\r\n             if (roomName === void 0) { roomName = \"\"; }\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0: return [4 /*yield*/, this.http.get(\"matchmake/\".concat(roomName), {\r\n                                 headers: {\r\n                                     'Accept': 'application/json'\r\n                                 }\r\n                             })];\r\n                         case 1: return [2 /*return*/, (_a.sent()).data];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Client.prototype.consumeSeatReservation = function (response, rootSchema, reuseRoomInstance // used in devMode\r\n         ) {\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 var room, options, targetRoom;\r\n                 var _this = this;\r\n                 return __generator(this, function (_a) {\r\n                     room = this.createRoom(response.room.name, rootSchema);\r\n                     room.roomId = response.room.roomId;\r\n                     room.sessionId = response.sessionId;\r\n                     options = { sessionId: room.sessionId };\r\n                     // forward \"reconnection token\" in case of reconnection.\r\n                     if (response.reconnectionToken) {\r\n                         options.reconnectionToken = response.reconnectionToken;\r\n                     }\r\n                     targetRoom = reuseRoomInstance || room;\r\n                     room.connect(this.buildEndpoint(response.room, options), response.devMode && (function () { return __awaiter(_this, void 0, void 0, function () {\r\n                         var retryCount, retryMaxRetries, retryReconnection;\r\n                         var _this = this;\r\n                         return __generator(this, function (_a) {\r\n                             console.info(\"[Colyseus devMode]: \".concat(String.fromCodePoint(0x1F504), \" Re-establishing connection with room id '\").concat(room.roomId, \"'...\")); // \r\n                             retryCount = 0;\r\n                             retryMaxRetries = 8;\r\n                             retryReconnection = function () { return __awaiter(_this, void 0, void 0, function () {\r\n                                 return __generator(this, function (_a) {\r\n                                     switch (_a.label) {\r\n                                         case 0:\r\n                                             retryCount++;\r\n                                             _a.label = 1;\r\n                                         case 1:\r\n                                             _a.trys.push([1, 3, , 4]);\r\n                                             return [4 /*yield*/, this.consumeSeatReservation(response, rootSchema, targetRoom)];\r\n                                         case 2:\r\n                                             _a.sent();\r\n                                             console.info(\"[Colyseus devMode]: \".concat(String.fromCodePoint(0x2705), \" Successfully re-established connection with room '\").concat(room.roomId, \"'\")); // \r\n                                             return [3 /*break*/, 4];\r\n                                         case 3:\r\n                                             _a.sent();\r\n                                             if (retryCount < retryMaxRetries) {\r\n                                                 console.info(\"[Colyseus devMode]: \".concat(String.fromCodePoint(0x1F504), \" retrying... (\").concat(retryCount, \" out of \").concat(retryMaxRetries, \")\")); // \r\n                                                 setTimeout(retryReconnection, 2000);\r\n                                             }\r\n                                             else {\r\n                                                 console.info(\"[Colyseus devMode]: \".concat(String.fromCodePoint(0x274C), \" Failed to reconnect. Is your server running? Please check server logs.\")); // \r\n                                             }\r\n                                             return [3 /*break*/, 4];\r\n                                         case 4: return [2 /*return*/];\r\n                                     }\r\n                                 });\r\n                             }); };\r\n                             setTimeout(retryReconnection, 2000);\r\n                             return [2 /*return*/];\r\n                         });\r\n                     }); }), targetRoom);\r\n                     return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                             var onError = function (code, message) { return reject(new ServerError(code, message)); };\r\n                             targetRoom.onError.once(onError);\r\n                             targetRoom['onJoin'].once(function () {\r\n                                 targetRoom.onError.remove(onError);\r\n                                 resolve(targetRoom);\r\n                             });\r\n                         })];\r\n                 });\r\n             });\r\n         };\r\n         Client.prototype.createMatchMakeRequest = function (method, roomName, options, rootSchema, reuseRoomInstance) {\r\n             if (options === void 0) { options = {}; }\r\n             return __awaiter(this, void 0, void 0, function () {\r\n                 var response;\r\n                 return __generator(this, function (_a) {\r\n                     switch (_a.label) {\r\n                         case 0: return [4 /*yield*/, this.http.post(\"matchmake/\".concat(method, \"/\").concat(roomName), {\r\n                                 headers: {\r\n                                     'Accept': 'application/json',\r\n                                     'Content-Type': 'application/json'\r\n                                 },\r\n                                 body: JSON.stringify(options)\r\n                             })];\r\n                         case 1:\r\n                             response = (_a.sent()).data;\r\n                             // FIXME: HTTP class is already handling this as ServerError.\r\n                             if (response.error) {\r\n                                 throw new MatchMakeError(response.error, response.code);\r\n                             }\r\n                             // forward reconnection token during \"reconnect\" methods.\r\n                             if (method === \"reconnect\") {\r\n                                 response.reconnectionToken = options.reconnectionToken;\r\n                             }\r\n                             return [4 /*yield*/, this.consumeSeatReservation(response, rootSchema, reuseRoomInstance)];\r\n                         case 2: return [2 /*return*/, _a.sent()];\r\n                     }\r\n                 });\r\n             });\r\n         };\r\n         Client.prototype.createRoom = function (roomName, rootSchema) {\r\n             return new Room(roomName, rootSchema);\r\n         };\r\n         Client.prototype.buildEndpoint = function (room, options) {\r\n             if (options === void 0) { options = {}; }\r\n             var params = [];\r\n             // append provided options\r\n             for (var name_1 in options) {\r\n                 if (!options.hasOwnProperty(name_1)) {\r\n                     continue;\r\n                 }\r\n                 params.push(\"\".concat(name_1, \"=\").concat(options[name_1]));\r\n             }\r\n             var endpoint = (this.settings.secure)\r\n                 ? \"wss://\"\r\n                 : \"ws://\";\r\n             if (room.publicAddress) {\r\n                 endpoint += \"\".concat(room.publicAddress);\r\n             }\r\n             else {\r\n                 endpoint += \"\".concat(this.settings.hostname).concat(this.getEndpointPort()).concat(this.settings.pathname);\r\n             }\r\n             return \"\".concat(endpoint, \"/\").concat(room.processId, \"/\").concat(room.roomId, \"?\").concat(params.join('&'));\r\n         };\r\n         Client.prototype.getHttpEndpoint = function (segments) {\r\n             if (segments === void 0) { segments = ''; }\r\n             var path = segments.startsWith(\"/\") ? segments : \"/\".concat(segments);\r\n             return \"\".concat((this.settings.secure) ? \"https\" : \"http\", \"://\").concat(this.settings.hostname).concat(this.getEndpointPort()).concat(this.settings.pathname).concat(path);\r\n         };\r\n         Client.prototype.getEndpointPort = function () {\r\n             return (this.settings.port !== 80 && this.settings.port !== 443)\r\n                 ? \":\".concat(this.settings.port)\r\n                 : \"\";\r\n         };\r\n         return Client;\r\n     }());\r\n\r\n     var SchemaSerializer = /** @class */ (function () {\r\n         function SchemaSerializer() {\r\n         }\r\n         SchemaSerializer.prototype.setState = function (rawState) {\r\n             return this.state.decode(rawState);\r\n         };\r\n         SchemaSerializer.prototype.getState = function () {\r\n             return this.state;\r\n         };\r\n         SchemaSerializer.prototype.patch = function (patches) {\r\n             return this.state.decode(patches);\r\n         };\r\n         SchemaSerializer.prototype.teardown = function () {\r\n             var _a, _b;\r\n             (_b = (_a = this.state) === null || _a === void 0 ? void 0 : _a['$changes']) === null || _b === void 0 ? void 0 : _b.root.clearRefs();\r\n         };\r\n         SchemaSerializer.prototype.handshake = function (bytes, it) {\r\n             if (this.state) {\r\n                 // TODO: validate client/server definitinos\r\n                 var reflection = new umd.Reflection();\r\n                 reflection.decode(bytes, it);\r\n             }\r\n             else {\r\n                 // initialize reflected state from server\r\n                 this.state = umd.Reflection.decode(bytes, it);\r\n             }\r\n         };\r\n         return SchemaSerializer;\r\n     }());\r\n\r\n     var NoneSerializer = /** @class */ (function () {\r\n         function NoneSerializer() {\r\n         }\r\n         NoneSerializer.prototype.setState = function (rawState) { };\r\n         NoneSerializer.prototype.getState = function () { return null; };\r\n         NoneSerializer.prototype.patch = function (patches) { };\r\n         NoneSerializer.prototype.teardown = function () { };\r\n         NoneSerializer.prototype.handshake = function (bytes) { };\r\n         return NoneSerializer;\r\n     }());\r\n\r\n     registerSerializer('schema', SchemaSerializer);\r\n     registerSerializer('none', NoneSerializer);\r\n\r\n     exports.Auth = Auth;\r\n     exports.Client = Client;\r\n     exports.Room = Room;\r\n     exports.SchemaSerializer = SchemaSerializer;\r\n     exports.registerSerializer = registerSerializer;\r\n\r\n     Object.defineProperty(exports, '__esModule', { value: true });\r\n\r\n }));\r\n //# sourceMappingURL=colyseus-cocos-creator.js.map\r\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n_Protocol = module.exports.Protocol;\n_ErrorCode = module.exports.ErrorCode;\n_OPERATION = module.exports.OPERATION;\n_ArraySchema = module.exports.ArraySchema;\n_CollectionSchema = module.exports.CollectionSchema;\n_Context = module.exports.Context;\n_MapSchema = module.exports.MapSchema;\n_Reflection = module.exports.Reflection;\n_ReflectionField = module.exports.ReflectionField;\n_ReflectionType = module.exports.ReflectionType;\n_Schema = module.exports.Schema;\n_SchemaDefinition = module.exports.SchemaDefinition;\n_SetSchema = module.exports.SetSchema;\n_decode = module.exports.decode;\n_defineTypes = module.exports.defineTypes;\n_deprecated = module.exports.deprecated;\n_dumpChanges = module.exports.dumpChanges;\n_encode0 = module.exports.encode;\n_filter = module.exports.filter;\n_filterChildren = module.exports.filterChildren;\n_hasFilter = module.exports.hasFilter;\n_registerType = module.exports.registerType;\n_type = module.exports.type;\n___esModule = module.exports.__esModule;\n_Auth = module.exports.Auth;\n_Client = module.exports.Client;\n_Room = module.exports.Room;\n_SchemaSerializer = module.exports.SchemaSerializer;\n_registerSerializer = module.exports.registerSerializer;\n\n}, {});\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}